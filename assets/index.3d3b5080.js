(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function yr(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const gc="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",pc=yr(gc),vc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mc=yr(vc);function Bo(e){return!!e||e===""}function Ne(e){if(J(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=yt(i)?yc(i):Ne(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(yt(e))return e;if(mt(e))return e}}const _c=/;(?![^(]*\))/g,bc=/:(.+)/;function yc(e){const t={};return e.split(_c).forEach(n=>{if(n){const i=n.split(bc);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Pi(e){let t="";if(yt(e))t=e;else if(J(e))for(let n=0;n<e.length;n++){const i=Pi(e[n]);i&&(t+=i+" ")}else if(mt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Cc(e){if(!e)return null;let{class:t,style:n}=e;return t&&!yt(t)&&(e.class=Pi(t)),n&&(e.style=Ne(n)),e}function Sc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Be(e[i],t[i]);return n}function Be(e,t){if(e===t)return!0;let n=ba(e),i=ba(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=vi(e),i=vi(t),n||i)return e===t;if(n=J(e),i=J(t),n||i)return n&&i?Sc(e,t):!1;if(n=mt(e),i=mt(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Be(e[a],t[a]))return!1}}return String(e)===String(t)}function Cr(e,t){return e.findIndex(n=>Be(n,t))}const En=e=>yt(e)?e:e==null?"":J(e)||mt(e)&&(e.toString===Uo||!nt(e.toString))?JSON.stringify(e,jo,2):String(e),jo=(e,t)=>t&&t.__v_isRef?jo(e,t.value):An(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:cn(t)?{[`Set(${t.size})`]:[...t.values()]}:mt(t)&&!J(t)&&!Vo(t)?String(t):t,ft={},Tn=[],ae=()=>{},wc=()=>!1,xc=/^on[^a-z]/,Ei=e=>xc.test(e),Ds=e=>e.startsWith("onUpdate:"),Et=Object.assign,Ns=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Pc=Object.prototype.hasOwnProperty,lt=(e,t)=>Pc.call(e,t),J=Array.isArray,An=e=>Ti(e)==="[object Map]",cn=e=>Ti(e)==="[object Set]",ba=e=>Ti(e)==="[object Date]",nt=e=>typeof e=="function",yt=e=>typeof e=="string",vi=e=>typeof e=="symbol",mt=e=>e!==null&&typeof e=="object",Fs=e=>mt(e)&&nt(e.then)&&nt(e.catch),Uo=Object.prototype.toString,Ti=e=>Uo.call(e),Ec=e=>Ti(e).slice(8,-1),Vo=e=>Ti(e)==="[object Object]",Gs=e=>yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ai=yr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Tc=/-(\w)/g,Qt=Sr(e=>e.replace(Tc,(t,n)=>n?n.toUpperCase():"")),Ac=/\B([A-Z])/g,ge=Sr(e=>e.replace(Ac,"-$1").toLowerCase()),Ai=Sr(e=>e.charAt(0).toUpperCase()+e.slice(1)),oi=Sr(e=>e?`on${Ai(e)}`:""),Nn=(e,t)=>!Object.is(e,t),kn=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},fr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},je=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ya;const kc=()=>ya||(ya=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let zt;class Hs{constructor(t=!1){this.detached=t,this.active=!0,this.effects=[],this.cleanups=[],this.parent=zt,!t&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=zt;try{return zt=this,t()}finally{zt=n}}}on(){zt=this}off(){zt=this.parent}stop(t){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function Mc(e){return new Hs(e)}function Wo(e,t=zt){t&&t.active&&t.effects.push(e)}function Ko(){return zt}function zo(e){zt&&zt.cleanups.push(e)}const Bs=e=>{const t=new Set(e);return t.w=0,t.n=0,t},$o=e=>(e.w&Ue)>0,Yo=e=>(e.n&Ue)>0,Oc=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ue},Rc=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];$o(r)&&!Yo(r)?r.delete(e):t[n++]=r,r.w&=~Ue,r.n&=~Ue}t.length=n}},as=new WeakMap;let ti=0,Ue=1;const os=30;let se;const nn=Symbol(""),ls=Symbol("");class ki{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Wo(this,i)}run(){if(!this.active)return this.fn();let t=se,n=Fe;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=se,se=this,Fe=!0,Ue=1<<++ti,ti<=os?Oc(this):Ca(this),this.fn()}finally{ti<=os&&Rc(this),Ue=1<<--ti,se=this.parent,Fe=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){se===this?this.deferStop=!0:this.active&&(Ca(this),this.onStop&&this.onStop(),this.active=!1)}}function Ca(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function Lc(e,t){e.effect&&(e=e.effect.fn);const n=new ki(e);t&&(Et(n,t),t.scope&&Wo(n,t.scope)),(!t||!t.lazy)&&n.run();const i=n.run.bind(n);return i.effect=n,i}function Ic(e){e.effect.stop()}let Fe=!0;const Xo=[];function un(){Xo.push(Fe),Fe=!1}function fn(){const e=Xo.pop();Fe=e===void 0?!0:e}function Jt(e,t,n){if(Fe&&se){let i=as.get(e);i||as.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=Bs()),qo(r)}}function qo(e,t){let n=!1;ti<=os?Yo(e)||(e.n|=Ue,n=!$o(e)):n=!e.has(se),n&&(e.add(se),se.deps.push(e))}function Se(e,t,n,i,r,s){const a=as.get(e);if(!a)return;let o=[];if(t==="clear")o=[...a.values()];else if(n==="length"&&J(e))a.forEach((l,h)=>{(h==="length"||h>=i)&&o.push(l)});else switch(n!==void 0&&o.push(a.get(n)),t){case"add":J(e)?Gs(n)&&o.push(a.get("length")):(o.push(a.get(nn)),An(e)&&o.push(a.get(ls)));break;case"delete":J(e)||(o.push(a.get(nn)),An(e)&&o.push(a.get(ls)));break;case"set":An(e)&&o.push(a.get(nn));break}if(o.length===1)o[0]&&hs(o[0]);else{const l=[];for(const h of o)h&&l.push(...h);hs(Bs(l))}}function hs(e,t){const n=J(e)?e:[...e];for(const i of n)i.computed&&Sa(i);for(const i of n)i.computed||Sa(i)}function Sa(e,t){(e!==se||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Dc=yr("__proto__,__v_isRef,__isVue"),Qo=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vi)),Nc=wr(),Fc=wr(!1,!0),Gc=wr(!0),Hc=wr(!0,!0),wa=Bc();function Bc(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=ht(this);for(let s=0,a=this.length;s<a;s++)Jt(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(ht)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){un();const i=ht(this)[t].apply(this,n);return fn(),i}}),e}function wr(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?rl:il:t?nl:el).get(i))return i;const a=J(i);if(!e&&a&&lt(wa,r))return Reflect.get(wa,r,s);const o=Reflect.get(i,r,s);return(vi(r)?Qo.has(r):Dc(r))||(e||Jt(i,"get",r),t)?o:Rt(o)?a&&Gs(r)?o:o.value:mt(o)?e?Us(o):Ie(o):o}}const jc=Jo(),Uc=Jo(!0);function Jo(e=!1){return function(n,i,r,s){let a=n[i];if(on(a)&&Rt(a)&&!Rt(r))return!1;if(!e&&(!mi(r)&&!on(r)&&(a=ht(a),r=ht(r)),!J(n)&&Rt(a)&&!Rt(r)))return a.value=r,!0;const o=J(n)&&Gs(i)?Number(i)<n.length:lt(n,i),l=Reflect.set(n,i,r,s);return n===ht(s)&&(o?Nn(r,a)&&Se(n,"set",i,r):Se(n,"add",i,r)),l}}function Vc(e,t){const n=lt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Se(e,"delete",t,void 0),i}function Wc(e,t){const n=Reflect.has(e,t);return(!vi(t)||!Qo.has(t))&&Jt(e,"has",t),n}function Kc(e){return Jt(e,"iterate",J(e)?"length":nn),Reflect.ownKeys(e)}const Zo={get:Nc,set:jc,deleteProperty:Vc,has:Wc,ownKeys:Kc},tl={get:Gc,set(e,t){return!0},deleteProperty(e,t){return!0}},zc=Et({},Zo,{get:Fc,set:Uc}),$c=Et({},tl,{get:Hc}),js=e=>e,xr=e=>Reflect.getPrototypeOf(e);function Ni(e,t,n=!1,i=!1){e=e.__v_raw;const r=ht(e),s=ht(t);n||(t!==s&&Jt(r,"get",t),Jt(r,"get",s));const{has:a}=xr(r),o=i?js:n?Ks:_i;if(a.call(r,t))return o(e.get(t));if(a.call(r,s))return o(e.get(s));e!==r&&e.get(t)}function Fi(e,t=!1){const n=this.__v_raw,i=ht(n),r=ht(e);return t||(e!==r&&Jt(i,"has",e),Jt(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Gi(e,t=!1){return e=e.__v_raw,!t&&Jt(ht(e),"iterate",nn),Reflect.get(e,"size",e)}function xa(e){e=ht(e);const t=ht(this);return xr(t).has.call(t,e)||(t.add(e),Se(t,"add",e,e)),this}function Pa(e,t){t=ht(t);const n=ht(this),{has:i,get:r}=xr(n);let s=i.call(n,e);s||(e=ht(e),s=i.call(n,e));const a=r.call(n,e);return n.set(e,t),s?Nn(t,a)&&Se(n,"set",e,t):Se(n,"add",e,t),this}function Ea(e){const t=ht(this),{has:n,get:i}=xr(t);let r=n.call(t,e);r||(e=ht(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Se(t,"delete",e,void 0),s}function Ta(){const e=ht(this),t=e.size!==0,n=e.clear();return t&&Se(e,"clear",void 0,void 0),n}function Hi(e,t){return function(i,r){const s=this,a=s.__v_raw,o=ht(a),l=t?js:e?Ks:_i;return!e&&Jt(o,"iterate",nn),a.forEach((h,c)=>i.call(r,l(h),l(c),s))}}function Bi(e,t,n){return function(...i){const r=this.__v_raw,s=ht(r),a=An(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=r[e](...i),c=n?js:t?Ks:_i;return!t&&Jt(s,"iterate",l?ls:nn),{next(){const{value:u,done:f}=h.next();return f?{value:u,done:f}:{value:o?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function Ae(e){return function(...t){return e==="delete"?!1:this}}function Yc(){const e={get(s){return Ni(this,s)},get size(){return Gi(this)},has:Fi,add:xa,set:Pa,delete:Ea,clear:Ta,forEach:Hi(!1,!1)},t={get(s){return Ni(this,s,!1,!0)},get size(){return Gi(this)},has:Fi,add:xa,set:Pa,delete:Ea,clear:Ta,forEach:Hi(!1,!0)},n={get(s){return Ni(this,s,!0)},get size(){return Gi(this,!0)},has(s){return Fi.call(this,s,!0)},add:Ae("add"),set:Ae("set"),delete:Ae("delete"),clear:Ae("clear"),forEach:Hi(!0,!1)},i={get(s){return Ni(this,s,!0,!0)},get size(){return Gi(this,!0)},has(s){return Fi.call(this,s,!0)},add:Ae("add"),set:Ae("set"),delete:Ae("delete"),clear:Ae("clear"),forEach:Hi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Bi(s,!1,!1),n[s]=Bi(s,!0,!1),t[s]=Bi(s,!1,!0),i[s]=Bi(s,!0,!0)}),[e,n,t,i]}const[Xc,qc,Qc,Jc]=Yc();function Pr(e,t){const n=t?e?Jc:Qc:e?qc:Xc;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(lt(n,r)&&r in i?n:i,r,s)}const Zc={get:Pr(!1,!1)},tu={get:Pr(!1,!0)},eu={get:Pr(!0,!1)},nu={get:Pr(!0,!0)},el=new WeakMap,nl=new WeakMap,il=new WeakMap,rl=new WeakMap;function iu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ru(e){return e.__v_skip||!Object.isExtensible(e)?0:iu(Ec(e))}function Ie(e){return on(e)?e:Er(e,!1,Zo,Zc,el)}function sl(e){return Er(e,!1,zc,tu,nl)}function Us(e){return Er(e,!0,tl,eu,il)}function su(e){return Er(e,!0,$c,nu,rl)}function Er(e,t,n,i,r){if(!mt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const a=ru(e);if(a===0)return e;const o=new Proxy(e,a===2?i:n);return r.set(e,o),o}function rn(e){return on(e)?rn(e.__v_raw):!!(e&&e.__v_isReactive)}function on(e){return!!(e&&e.__v_isReadonly)}function mi(e){return!!(e&&e.__v_isShallow)}function Vs(e){return rn(e)||on(e)}function ht(e){const t=e&&e.__v_raw;return t?ht(t):e}function Ws(e){return fr(e,"__v_skip",!0),e}const _i=e=>mt(e)?Ie(e):e,Ks=e=>mt(e)?Us(e):e;function zs(e){Fe&&se&&(e=ht(e),qo(e.dep||(e.dep=Bs())))}function Tr(e,t){e=ht(e),e.dep&&hs(e.dep)}function Rt(e){return!!(e&&e.__v_isRef===!0)}function Mt(e){return al(e,!1)}function au(e){return al(e,!0)}function al(e,t){return Rt(e)?e:new ou(e,t)}class ou{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ht(t),this._value=n?t:_i(t)}get value(){return zs(this),this._value}set value(t){const n=this.__v_isShallow||mi(t)||on(t);t=n?t:ht(t),Nn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:_i(t),Tr(this))}}function lu(e){Tr(e)}function Pt(e){return Rt(e)?e.value:e}const hu={get:(e,t,n)=>Pt(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Rt(r)&&!Rt(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function $s(e){return rn(e)?e:new Proxy(e,hu)}class cu{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:i}=t(()=>zs(this),()=>Tr(this));this._get=n,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function uu(e){return new cu(e)}function fu(e){const t=J(e)?new Array(e.length):{};for(const n in e)t[n]=ol(e,n);return t}class du{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function ol(e,t,n){const i=e[t];return Rt(i)?i:new du(e,t,n)}var ll;class gu{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[ll]=!1,this._dirty=!0,this.effect=new ki(t,()=>{this._dirty||(this._dirty=!0,Tr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=ht(this);return zs(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}ll="__v_isReadonly";function pu(e,t,n=!1){let i,r;const s=nt(e);return s?(i=e,r=ae):(i=e.get,r=e.set),new gu(i,r,s||!r,n)}const li=[];function hl(e,...t){un();const n=li.length?li[li.length-1].component:null,i=n&&n.appContext.config.warnHandler,r=vu();if(i)pe(i,n,11,[e+t.join(""),n&&n.proxy,r.map(({vnode:s})=>`at <${eh(n,s.type)}>`).join(`
`),r]);else{const s=[`[Vue warn]: ${e}`,...t];r.length&&s.push(`
`,...mu(r)),console.warn(...s)}fn()}function vu(){let e=li[li.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function mu(e){const t=[];return e.forEach((n,i)=>{t.push(...i===0?[]:[`
`],..._u(n))}),t}function _u({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,r=` at <${eh(e.component,e.type,i)}`,s=">"+n;return e.props?[r,...bu(e.props),s]:[r+s]}function bu(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(i=>{t.push(...cl(i,e[i]))}),n.length>3&&t.push(" ..."),t}function cl(e,t,n){return yt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:Rt(t)?(t=cl(e,ht(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):nt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=ht(t),n?t:[`${e}=`,t])}function pe(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){dn(s,t,n)}return r}function Xt(e,t,n,i){if(nt(e)){const s=pe(e,t,n,i);return s&&Fs(s)&&s.catch(a=>{dn(a,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(Xt(e[s],t,n,i));return r}function dn(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,o=n;for(;s;){const h=s.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](e,a,o)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){pe(l,null,10,[e,a,o]);return}}yu(e,n,r,i)}function yu(e,t,n,i=!0){console.error(e)}let bi=!1,cs=!1;const Gt=[];let fe=0;const Mn=[];let ye=null,Ze=0;const ul=Promise.resolve();let Ys=null;function Ar(e){const t=Ys||ul;return e?t.then(this?e.bind(this):e):t}function Cu(e){let t=fe+1,n=Gt.length;for(;t<n;){const i=t+n>>>1;yi(Gt[i])<e?t=i+1:n=i}return t}function kr(e){(!Gt.length||!Gt.includes(e,bi&&e.allowRecurse?fe+1:fe))&&(e.id==null?Gt.push(e):Gt.splice(Cu(e.id),0,e),fl())}function fl(){!bi&&!cs&&(cs=!0,Ys=ul.then(dl))}function Su(e){const t=Gt.indexOf(e);t>fe&&Gt.splice(t,1)}function Xs(e){J(e)?Mn.push(...e):(!ye||!ye.includes(e,e.allowRecurse?Ze+1:Ze))&&Mn.push(e),fl()}function Aa(e,t=bi?fe+1:0){for(;t<Gt.length;t++){const n=Gt[t];n&&n.pre&&(Gt.splice(t,1),t--,n())}}function dr(e){if(Mn.length){const t=[...new Set(Mn)];if(Mn.length=0,ye){ye.push(...t);return}for(ye=t,ye.sort((n,i)=>yi(n)-yi(i)),Ze=0;Ze<ye.length;Ze++)ye[Ze]();ye=null,Ze=0}}const yi=e=>e.id==null?1/0:e.id,wu=(e,t)=>{const n=yi(e)-yi(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function dl(e){cs=!1,bi=!0,Gt.sort(wu);const t=ae;try{for(fe=0;fe<Gt.length;fe++){const n=Gt[fe];n&&n.active!==!1&&pe(n,null,14)}}finally{fe=0,Gt.length=0,dr(),bi=!1,Ys=null,(Gt.length||Mn.length)&&dl()}}let xn,ji=[];function gl(e,t){var n,i;xn=e,xn?(xn.enabled=!0,ji.forEach(({event:r,args:s})=>xn.emit(r,...s)),ji=[]):typeof window<"u"&&window.HTMLElement&&!(!((i=(n=window.navigator)===null||n===void 0?void 0:n.userAgent)===null||i===void 0)&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{gl(s,t)}),setTimeout(()=>{xn||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,ji=[])},3e3)):ji=[]}function xu(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||ft;let r=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:u,trim:f}=i[c]||ft;f&&(r=n.map(g=>g.trim())),u&&(r=n.map(je))}let o,l=i[o=oi(t)]||i[o=oi(Qt(t))];!l&&s&&(l=i[o=oi(ge(t))]),l&&Xt(l,e,6,r);const h=i[o+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Xt(h,e,6,r)}}function pl(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let a={},o=!1;if(!nt(e)){const l=h=>{const c=pl(h,t,!0);c&&(o=!0,Et(a,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(mt(e)&&i.set(e,null),null):(J(s)?s.forEach(l=>a[l]=null):Et(a,s),mt(e)&&i.set(e,a),a)}function Mr(e,t){return!e||!Ei(t)?!1:(t=t.slice(2).replace(/Once$/,""),lt(e,t[0].toLowerCase()+t.slice(1))||lt(e,ge(t))||lt(e,t))}let Ht=null,Or=null;function Ci(e){const t=Ht;return Ht=e,Or=e&&e.type.__scopeId||null,t}function Pu(e){Or=e}function Eu(){Or=null}const Tu=e=>Si;function Si(e,t=Ht,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&ms(-1);const s=Ci(t);let a;try{a=e(...r)}finally{Ci(s),i._d&&ms(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function rr(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:h,render:c,renderCache:u,data:f,setupState:g,ctx:d,inheritAttrs:m}=e;let y,b;const p=Ci(e);try{if(n.shapeFlag&4){const S=r||i;y=$t(c.call(S,S,u,s,g,f,d)),b=l}else{const S=t;y=$t(S.length>1?S(s,{attrs:l,slots:o,emit:h}):S(s,null)),b=t.props?l:ku(l)}}catch(S){ui.length=0,dn(S,e,1),y=ct(Bt)}let C=y;if(b&&m!==!1){const S=Object.keys(b),{shapeFlag:A}=C;S.length&&A&7&&(a&&S.some(Ds)&&(b=Mu(b,a)),C=ve(C,b))}return n.dirs&&(C=ve(C),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&(C.transition=n.transition),y=C,Ci(p),y}function Au(e){let t;for(let n=0;n<e.length;n++){const i=e[n];if(Ve(i)){if(i.type!==Bt||i.children==="v-if"){if(t)return;t=i}}else return}return t}const ku=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ei(n))&&((t||(t={}))[n]=e[n]);return t},Mu=(e,t)=>{const n={};for(const i in e)(!Ds(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function Ou(e,t,n){const{props:i,children:r,component:s}=e,{props:a,children:o,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?ka(i,a,h):!!a;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(a[f]!==i[f]&&!Mr(h,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?ka(i,a,h):!0:!!a;return!1}function ka(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Mr(n,s))return!0}return!1}function qs({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const vl=e=>e.__isSuspense,Ru={name:"Suspense",__isSuspense:!0,process(e,t,n,i,r,s,a,o,l,h){e==null?Iu(t,n,i,r,s,a,o,l,h):Du(e,t,n,i,r,a,o,l,h)},hydrate:Nu,create:Qs,normalize:Fu},Lu=Ru;function wi(e,t){const n=e.props&&e.props[t];nt(n)&&n()}function Iu(e,t,n,i,r,s,a,o,l){const{p:h,o:{createElement:c}}=l,u=c("div"),f=e.suspense=Qs(e,r,i,t,u,n,s,a,o,l);h(null,f.pendingBranch=e.ssContent,u,null,i,f,s,a),f.deps>0?(wi(e,"onPending"),wi(e,"onFallback"),h(null,e.ssFallback,t,n,i,null,s,a),On(f,e.ssFallback)):f.resolve()}function Du(e,t,n,i,r,s,a,o,{p:l,um:h,o:{createElement:c}}){const u=t.suspense=e.suspense;u.vnode=t,t.el=e.el;const f=t.ssContent,g=t.ssFallback,{activeBranch:d,pendingBranch:m,isInFallback:y,isHydrating:b}=u;if(m)u.pendingBranch=f,de(f,m)?(l(m,f,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():y&&(l(d,g,n,i,r,null,s,a,o),On(u,g))):(u.pendingId++,b?(u.isHydrating=!1,u.activeBranch=m):h(m,r,u),u.deps=0,u.effects.length=0,u.hiddenContainer=c("div"),y?(l(null,f,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0?u.resolve():(l(d,g,n,i,r,null,s,a,o),On(u,g))):d&&de(f,d)?(l(d,f,n,i,r,u,s,a,o),u.resolve(!0)):(l(null,f,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0&&u.resolve()));else if(d&&de(f,d))l(d,f,n,i,r,u,s,a,o),On(u,f);else if(wi(t,"onPending"),u.pendingBranch=f,u.pendingId++,l(null,f,u.hiddenContainer,null,r,u,s,a,o),u.deps<=0)u.resolve();else{const{timeout:p,pendingId:C}=u;p>0?setTimeout(()=>{u.pendingId===C&&u.fallback(g)},p):p===0&&u.fallback(g)}}function Qs(e,t,n,i,r,s,a,o,l,h,c=!1){const{p:u,m:f,um:g,n:d,o:{parentNode:m,remove:y}}=h,b=je(e.props&&e.props.timeout),p={vnode:e,parent:t,parentComponent:n,isSVG:a,container:i,hiddenContainer:r,anchor:s,deps:0,pendingId:0,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(C=!1){const{vnode:S,activeBranch:A,pendingBranch:E,pendingId:O,effects:x,parentComponent:L,container:R}=p;if(p.isHydrating)p.isHydrating=!1;else if(!C){const k=A&&E.transition&&E.transition.mode==="out-in";k&&(A.transition.afterLeave=()=>{O===p.pendingId&&f(E,R,T,0)});let{anchor:T}=p;A&&(T=d(A),g(A,L,p,!0)),k||f(E,R,T,0)}On(p,E),p.pendingBranch=null,p.isInFallback=!1;let D=p.parent,N=!1;for(;D;){if(D.pendingBranch){D.effects.push(...x),N=!0;break}D=D.parent}N||Xs(x),p.effects=[],wi(S,"onResolve")},fallback(C){if(!p.pendingBranch)return;const{vnode:S,activeBranch:A,parentComponent:E,container:O,isSVG:x}=p;wi(S,"onFallback");const L=d(A),R=()=>{!p.isInFallback||(u(null,C,O,L,E,null,x,o,l),On(p,C))},D=C.transition&&C.transition.mode==="out-in";D&&(A.transition.afterLeave=R),p.isInFallback=!0,g(A,E,null,!0),D||R()},move(C,S,A){p.activeBranch&&f(p.activeBranch,C,S,A),p.container=C},next(){return p.activeBranch&&d(p.activeBranch)},registerDep(C,S){const A=!!p.pendingBranch;A&&p.deps++;const E=C.vnode.el;C.asyncDep.catch(O=>{dn(O,C,0)}).then(O=>{if(C.isUnmounted||p.isUnmounted||p.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:x}=C;_s(C,O,!1),E&&(x.el=E);const L=!E&&C.subTree.el;S(C,x,m(E||C.subTree.el),E?null:d(C.subTree),p,a,l),L&&y(L),qs(C,x.el),A&&--p.deps===0&&p.resolve()})},unmount(C,S){p.isUnmounted=!0,p.activeBranch&&g(p.activeBranch,n,C,S),p.pendingBranch&&g(p.pendingBranch,n,C,S)}};return p}function Nu(e,t,n,i,r,s,a,o,l){const h=t.suspense=Qs(t,i,n,e.parentNode,document.createElement("div"),null,r,s,a,o,!0),c=l(e,h.pendingBranch=t.ssContent,n,h,s,a);return h.deps===0&&h.resolve(),c}function Fu(e){const{shapeFlag:t,children:n}=e,i=t&32;e.ssContent=Ma(i?n.default:n),e.ssFallback=i?Ma(n.fallback):ct(Bt)}function Ma(e){let t;if(nt(e)){const n=hn&&e._c;n&&(e._d=!1,ee()),e=e(),n&&(e._d=!0,t=Vt,Wl())}return J(e)&&(e=Au(e)),e=$t(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function ml(e,t){t&&t.pendingBranch?J(e)?t.effects.push(...e):t.effects.push(e):Xs(e)}function On(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e,r=n.el=t.el;i&&i.subTree===n&&(i.vnode.el=r,qs(i,r))}function _l(e,t){if(Ot){let n=Ot.provides;const i=Ot.parent&&Ot.parent.provides;i===n&&(n=Ot.provides=Object.create(i)),n[e]=t}}function hi(e,t,n=!1){const i=Ot||Ht;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&nt(t)?t.call(i.proxy):t}}function Gu(e,t){return Mi(e,null,t)}function bl(e,t){return Mi(e,null,{flush:"post"})}function Hu(e,t){return Mi(e,null,{flush:"sync"})}const Oa={};function Ge(e,t,n){return Mi(e,t,n)}function Mi(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:a}=ft){const o=Ot;let l,h=!1,c=!1;if(Rt(e)?(l=()=>e.value,h=mi(e)):rn(e)?(l=()=>e,i=!0):J(e)?(c=!0,h=e.some(b=>rn(b)||mi(b)),l=()=>e.map(b=>{if(Rt(b))return b.value;if(rn(b))return en(b);if(nt(b))return pe(b,o,2)})):nt(e)?t?l=()=>pe(e,o,2):l=()=>{if(!(o&&o.isUnmounted))return u&&u(),Xt(e,o,3,[f])}:l=ae,t&&i){const b=l;l=()=>en(b())}let u,f=b=>{u=y.onStop=()=>{pe(b,o,4)}};if(Hn)return f=ae,t?n&&Xt(t,o,3,[l(),c?[]:void 0,f]):l(),ae;let g=c?[]:Oa;const d=()=>{if(!!y.active)if(t){const b=y.run();(i||h||(c?b.some((p,C)=>Nn(p,g[C])):Nn(b,g)))&&(u&&u(),Xt(t,o,3,[b,g===Oa?void 0:g,f]),g=b)}else y.run()};d.allowRecurse=!!t;let m;r==="sync"?m=d:r==="post"?m=()=>Nt(d,o&&o.suspense):(d.pre=!0,o&&(d.id=o.uid),m=()=>kr(d));const y=new ki(l,m);return t?n?d():g=y.run():r==="post"?Nt(y.run.bind(y),o&&o.suspense):y.run(),()=>{y.stop(),o&&o.scope&&Ns(o.scope.effects,y)}}function Bu(e,t,n){const i=this.proxy,r=yt(e)?e.includes(".")?yl(i,e):()=>i[e]:e.bind(i,i);let s;nt(t)?s=t:(s=t.handler,n=t);const a=Ot;We(this);const o=Mi(r,s.bind(i),n);return a?We(a):He(),o}function yl(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function en(e,t){if(!mt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Rt(e))en(e.value,t);else if(J(e))for(let n=0;n<e.length;n++)en(e[n],t);else if(cn(e)||An(e))e.forEach(n=>{en(n,t)});else if(Vo(e))for(const n in e)en(e[n],t);return e}function Js(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gn(()=>{e.isMounted=!0}),Ri(()=>{e.isUnmounting=!0}),e}const Zt=[Function,Array],ju={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},setup(e,{slots:t}){const n=xe(),i=Js();let r;return()=>{const s=t.default&&Rr(t.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const m of s)if(m.type!==Bt){a=m;break}}const o=ht(e),{mode:l}=o;if(i.isLeaving)return Vr(a);const h=Ra(a);if(!h)return Vr(a);const c=Fn(h,o,i,n);ln(h,c);const u=n.subTree,f=u&&Ra(u);let g=!1;const{getTransitionKey:d}=h.type;if(d){const m=d();r===void 0?r=m:m!==r&&(r=m,g=!0)}if(f&&f.type!==Bt&&(!de(h,f)||g)){const m=Fn(f,o,i,n);if(ln(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.update()},Vr(a);l==="in-out"&&h.type!==Bt&&(m.delayLeave=(y,b,p)=>{const C=Cl(i,f);C[String(f.key)]=f,y._leaveCb=()=>{b(),y._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=p})}return a}}},Zs=ju;function Cl(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Fn(e,t,n,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:u,onLeave:f,onAfterLeave:g,onLeaveCancelled:d,onBeforeAppear:m,onAppear:y,onAfterAppear:b,onAppearCancelled:p}=t,C=String(e.key),S=Cl(n,e),A=(x,L)=>{x&&Xt(x,i,9,L)},E=(x,L)=>{const R=L[1];A(x,L),J(x)?x.every(D=>D.length<=1)&&R():x.length<=1&&R()},O={mode:s,persisted:a,beforeEnter(x){let L=o;if(!n.isMounted)if(r)L=m||o;else return;x._leaveCb&&x._leaveCb(!0);const R=S[C];R&&de(e,R)&&R.el._leaveCb&&R.el._leaveCb(),A(L,[x])},enter(x){let L=l,R=h,D=c;if(!n.isMounted)if(r)L=y||l,R=b||h,D=p||c;else return;let N=!1;const k=x._enterCb=T=>{N||(N=!0,T?A(D,[x]):A(R,[x]),O.delayedLeave&&O.delayedLeave(),x._enterCb=void 0)};L?E(L,[x,k]):k()},leave(x,L){const R=String(e.key);if(x._enterCb&&x._enterCb(!0),n.isUnmounting)return L();A(u,[x]);let D=!1;const N=x._leaveCb=k=>{D||(D=!0,L(),k?A(d,[x]):A(g,[x]),x._leaveCb=void 0,S[R]===e&&delete S[R])};S[R]=e,f?E(f,[x,N]):N()},clone(x){return Fn(x,t,n,i)}};return O}function Vr(e){if(Oi(e))return e=ve(e),e.children=null,e}function Ra(e){return Oi(e)?e.children?e.children[0]:void 0:e}function ln(e,t){e.shapeFlag&6&&e.component?ln(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rr(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let a=e[s];const o=n==null?a.key:String(n)+String(a.key!=null?a.key:s);a.type===Dt?(a.patchFlag&128&&r++,i=i.concat(Rr(a.children,t,o))):(t||a.type!==Bt)&&i.push(o!=null?ve(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function ze(e){return nt(e)?{setup:e,name:e.name}:e}const sn=e=>!!e.type.__asyncLoader;function Uu(e){nt(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,timeout:s,suspensible:a=!0,onError:o}=e;let l=null,h,c=0;const u=()=>(c++,l=null,f()),f=()=>{let g;return l||(g=l=t().catch(d=>{if(d=d instanceof Error?d:new Error(String(d)),o)return new Promise((m,y)=>{o(d,()=>m(u()),()=>y(d),c+1)});throw d}).then(d=>g!==l&&l?l:(d&&(d.__esModule||d[Symbol.toStringTag]==="Module")&&(d=d.default),h=d,d)))};return ze({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return h},setup(){const g=Ot;if(h)return()=>Wr(h,g);const d=p=>{l=null,dn(p,g,13,!i)};if(a&&g.suspense||Hn)return f().then(p=>()=>Wr(p,g)).catch(p=>(d(p),()=>i?ct(i,{error:p}):null));const m=Mt(!1),y=Mt(),b=Mt(!!r);return r&&setTimeout(()=>{b.value=!1},r),s!=null&&setTimeout(()=>{if(!m.value&&!y.value){const p=new Error(`Async component timed out after ${s}ms.`);d(p),y.value=p}},s),f().then(()=>{m.value=!0,g.parent&&Oi(g.parent.vnode)&&kr(g.parent.update)}).catch(p=>{d(p),y.value=p}),()=>{if(m.value&&h)return Wr(h,g);if(y.value&&i)return ct(i,{error:y.value});if(n&&!b.value)return ct(n)}}})}function Wr(e,{vnode:{ref:t,props:n,children:i,shapeFlag:r},parent:s}){const a=ct(e,n,i);return a.ref=t,a}const Oi=e=>e.type.__isKeepAlive,Vu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=xe(),i=n.ctx;if(!i.renderer)return()=>{const p=t.default&&t.default();return p&&p.length===1?p[0]:p};const r=new Map,s=new Set;let a=null;const o=n.suspense,{renderer:{p:l,m:h,um:c,o:{createElement:u}}}=i,f=u("div");i.activate=(p,C,S,A,E)=>{const O=p.component;h(p,C,S,0,o),l(O.vnode,p,C,S,O,o,A,p.slotScopeIds,E),Nt(()=>{O.isDeactivated=!1,O.a&&kn(O.a);const x=p.props&&p.props.onVnodeMounted;x&&Ut(x,O.parent,p)},o)},i.deactivate=p=>{const C=p.component;h(p,f,null,1,o),Nt(()=>{C.da&&kn(C.da);const S=p.props&&p.props.onVnodeUnmounted;S&&Ut(S,C.parent,p),C.isDeactivated=!0},o)};function g(p){Kr(p),c(p,n,o,!0)}function d(p){r.forEach((C,S)=>{const A=_r(C.type);A&&(!p||!p(A))&&m(S)})}function m(p){const C=r.get(p);!a||C.type!==a.type?g(C):a&&Kr(a),r.delete(p),s.delete(p)}Ge(()=>[e.include,e.exclude],([p,C])=>{p&&d(S=>ei(p,S)),C&&d(S=>!ei(C,S))},{flush:"post",deep:!0});let y=null;const b=()=>{y!=null&&r.set(y,zr(n.subTree))};return gn(b),Ir(b),Ri(()=>{r.forEach(p=>{const{subTree:C,suspense:S}=n,A=zr(C);if(p.type===A.type){Kr(A);const E=A.component.da;E&&Nt(E,S);return}g(p)})}),()=>{if(y=null,!t.default)return null;const p=t.default(),C=p[0];if(p.length>1)return a=null,p;if(!Ve(C)||!(C.shapeFlag&4)&&!(C.shapeFlag&128))return a=null,C;let S=zr(C);const A=S.type,E=_r(sn(S)?S.type.__asyncResolved||{}:A),{include:O,exclude:x,max:L}=e;if(O&&(!E||!ei(O,E))||x&&E&&ei(x,E))return a=S,C;const R=S.key==null?A:S.key,D=r.get(R);return S.el&&(S=ve(S),C.shapeFlag&128&&(C.ssContent=S)),y=R,D?(S.el=D.el,S.component=D.component,S.transition&&ln(S,S.transition),S.shapeFlag|=512,s.delete(R),s.add(R)):(s.add(R),L&&s.size>parseInt(L,10)&&m(s.values().next().value)),S.shapeFlag|=256,a=S,vl(C.type)?C:S}}},Wu=Vu;function ei(e,t){return J(e)?e.some(n=>ei(n,t)):yt(e)?e.split(",").includes(t):e.test?e.test(t):!1}function Sl(e,t){xl(e,"a",t)}function wl(e,t){xl(e,"da",t)}function xl(e,t,n=Ot){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Lr(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Oi(r.parent.vnode)&&Ku(i,t,n,r),r=r.parent}}function Ku(e,t,n,i){const r=Lr(t,e,i,!0);Dr(()=>{Ns(i[t],r)},n)}function Kr(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function zr(e){return e.shapeFlag&128?e.ssContent:e}function Lr(e,t,n=Ot,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;un(),We(n);const o=Xt(t,n,e,a);return He(),fn(),o});return i?r.unshift(s):r.push(s),s}}const we=e=>(t,n=Ot)=>(!Hn||e==="sp")&&Lr(e,(...i)=>t(...i),n),Pl=we("bm"),gn=we("m"),El=we("bu"),Ir=we("u"),Ri=we("bum"),Dr=we("um"),Tl=we("sp"),Al=we("rtg"),kl=we("rtc");function Ml(e,t=Ot){Lr("ec",e,t)}function sr(e,t){const n=Ht;if(n===null)return e;const i=Gr(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,o,l,h=ft]=t[s];nt(a)&&(a={mounted:a,updated:a}),a.deep&&en(o),r.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:h})}return e}function ue(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(un(),Xt(l,n,8,[e.el,o,e,t]),fn())}}const ta="components",zu="directives";function ar(e,t){return ea(ta,e,!0,t)||e}const Ol=Symbol();function $u(e){return yt(e)?ea(ta,e,!1)||e:e||Ol}function Yu(e){return ea(zu,e)}function ea(e,t,n=!0,i=!1){const r=Ht||Ot;if(r){const s=r.type;if(e===ta){const o=_r(s,!1);if(o&&(o===t||o===Qt(t)||o===Ai(Qt(t))))return s}const a=La(r[e]||s[e],t)||La(r.appContext[e],t);return!a&&i?s:a}}function La(e,t){return e&&(e[t]||e[Qt(t)]||e[Ai(Qt(t))])}function Rl(e,t,n,i){let r;const s=n&&n[i];if(J(e)||yt(e)){r=new Array(e.length);for(let a=0,o=e.length;a<o;a++)r[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s&&s[a])}else if(mt(e))if(e[Symbol.iterator])r=Array.from(e,(a,o)=>t(a,o,void 0,s&&s[o]));else{const a=Object.keys(e);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const h=a[o];r[o]=t(e[h],h,o,s&&s[o])}}else r=[];return n&&(n[i]=r),r}function Xu(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(J(i))for(let r=0;r<i.length;r++)e[i[r].name]=i[r].fn;else i&&(e[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return e}function qu(e,t,n={},i,r){if(Ht.isCE||Ht.parent&&sn(Ht.parent)&&Ht.parent.isCE)return ct("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s._c&&(s._d=!1),ee();const a=s&&Ll(s(n)),o=Nr(Dt,{key:n.key||a&&a.key||`_${t}`},a||(i?i():[]),a&&e._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Ll(e){return e.some(t=>Ve(t)?!(t.type===Bt||t.type===Dt&&!Ll(t.children)):!0)?e:null}function Qu(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:oi(i)]=e[i];return n}const us=e=>e?Ql(e)?Gr(e)||e.proxy:us(e.parent):null,gr=Et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>us(e.parent),$root:e=>us(e.root),$emit:e=>e.emit,$options:e=>na(e),$forceUpdate:e=>e.f||(e.f=()=>kr(e.update)),$nextTick:e=>e.n||(e.n=Ar.bind(e.proxy)),$watch:e=>Bu.bind(e)}),fs={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=e;let h;if(t[0]!=="$"){const g=a[t];if(g!==void 0)switch(g){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(i!==ft&&lt(i,t))return a[t]=1,i[t];if(r!==ft&&lt(r,t))return a[t]=2,r[t];if((h=e.propsOptions[0])&&lt(h,t))return a[t]=3,s[t];if(n!==ft&&lt(n,t))return a[t]=4,n[t];ds&&(a[t]=0)}}const c=gr[t];let u,f;if(c)return t==="$attrs"&&Jt(e,"get",t),c(e);if((u=o.__cssModules)&&(u=u[t]))return u;if(n!==ft&&lt(n,t))return a[t]=4,n[t];if(f=l.config.globalProperties,lt(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return r!==ft&&lt(r,t)?(r[t]=n,!0):i!==ft&&lt(i,t)?(i[t]=n,!0):lt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!n[a]||e!==ft&&lt(e,a)||t!==ft&&lt(t,a)||(o=s[0])&&lt(o,a)||lt(i,a)||lt(gr,a)||lt(r.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:lt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Ju=Et({},fs,{get(e,t){if(t!==Symbol.unscopables)return fs.get(e,t,e)},has(e,t){return t[0]!=="_"&&!pc(t)}});let ds=!0;function Zu(e){const t=na(e),n=e.proxy,i=e.ctx;ds=!1,t.beforeCreate&&Ia(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:h,created:c,beforeMount:u,mounted:f,beforeUpdate:g,updated:d,activated:m,deactivated:y,beforeDestroy:b,beforeUnmount:p,destroyed:C,unmounted:S,render:A,renderTracked:E,renderTriggered:O,errorCaptured:x,serverPrefetch:L,expose:R,inheritAttrs:D,components:N,directives:k,filters:T}=t;if(h&&tf(h,i,null,e.appContext.config.unwrapInjectedRef),a)for(const Y in a){const Z=a[Y];nt(Z)&&(i[Y]=Z.bind(n))}if(r){const Y=r.call(n,n);mt(Y)&&(e.data=Ie(Y))}if(ds=!0,s)for(const Y in s){const Z=s[Y],st=nt(Z)?Z.bind(n,n):nt(Z.get)?Z.get.bind(n,n):ae,z=!nt(Z)&&nt(Z.set)?Z.set.bind(n):ae,it=nh({get:st,set:z});Object.defineProperty(i,Y,{enumerable:!0,configurable:!0,get:()=>it.value,set:at=>it.value=at})}if(o)for(const Y in o)Il(o[Y],i,n,Y);if(l){const Y=nt(l)?l.call(n):l;Reflect.ownKeys(Y).forEach(Z=>{_l(Z,Y[Z])})}c&&Ia(c,e,"c");function I(Y,Z){J(Z)?Z.forEach(st=>Y(st.bind(n))):Z&&Y(Z.bind(n))}if(I(Pl,u),I(gn,f),I(El,g),I(Ir,d),I(Sl,m),I(wl,y),I(Ml,x),I(kl,E),I(Al,O),I(Ri,p),I(Dr,S),I(Tl,L),J(R))if(R.length){const Y=e.exposed||(e.exposed={});R.forEach(Z=>{Object.defineProperty(Y,Z,{get:()=>n[Z],set:st=>n[Z]=st})})}else e.exposed||(e.exposed={});A&&e.render===ae&&(e.render=A),D!=null&&(e.inheritAttrs=D),N&&(e.components=N),k&&(e.directives=k)}function tf(e,t,n=ae,i=!1){J(e)&&(e=gs(e));for(const r in e){const s=e[r];let a;mt(s)?"default"in s?a=hi(s.from||r,s.default,!0):a=hi(s.from||r):a=hi(s),Rt(a)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function Ia(e,t,n){Xt(J(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Il(e,t,n,i){const r=i.includes(".")?yl(n,i):()=>n[i];if(yt(e)){const s=t[e];nt(s)&&Ge(r,s)}else if(nt(e))Ge(r,e.bind(n));else if(mt(e))if(J(e))e.forEach(s=>Il(s,t,n,i));else{const s=nt(e.handler)?e.handler.bind(n):t[e.handler];nt(s)&&Ge(r,s,e)}}function na(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(h=>pr(l,h,a,!0)),pr(l,t,a)),mt(t)&&s.set(t,l),l}function pr(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&pr(e,s,n,!0),r&&r.forEach(a=>pr(e,a,n,!0));for(const a in t)if(!(i&&a==="expose")){const o=ef[a]||n&&n[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const ef={data:Da,props:Je,emits:Je,methods:Je,computed:Je,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:Je,directives:Je,watch:rf,provide:Da,inject:nf};function Da(e,t){return t?e?function(){return Et(nt(e)?e.call(this,this):e,nt(t)?t.call(this,this):t)}:t:e}function nf(e,t){return Je(gs(e),gs(t))}function gs(e){if(J(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function jt(e,t){return e?[...new Set([].concat(e,t))]:t}function Je(e,t){return e?Et(Et(Object.create(null),e),t):t}function rf(e,t){if(!e)return t;if(!t)return e;const n=Et(Object.create(null),e);for(const i in t)n[i]=jt(e[i],t[i]);return n}function sf(e,t,n,i=!1){const r={},s={};fr(s,Fr,1),e.propsDefaults=Object.create(null),Dl(e,t,r,s);for(const a in e.propsOptions[0])a in r||(r[a]=void 0);n?e.props=i?r:sl(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function af(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=e,o=ht(r),[l]=e.propsOptions;let h=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(Mr(e.emitsOptions,f))continue;const g=t[f];if(l)if(lt(s,f))g!==s[f]&&(s[f]=g,h=!0);else{const d=Qt(f);r[d]=ps(l,o,d,g,e,!1)}else g!==s[f]&&(s[f]=g,h=!0)}}}else{Dl(e,t,r,s)&&(h=!0);let c;for(const u in o)(!t||!lt(t,u)&&((c=ge(u))===u||!lt(t,c)))&&(l?n&&(n[u]!==void 0||n[c]!==void 0)&&(r[u]=ps(l,o,u,void 0,e,!0)):delete r[u]);if(s!==o)for(const u in s)(!t||!lt(t,u)&&!0)&&(delete s[u],h=!0)}h&&Se(e,"set","$attrs")}function Dl(e,t,n,i){const[r,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(ai(l))continue;const h=t[l];let c;r&&lt(r,c=Qt(l))?!s||!s.includes(c)?n[c]=h:(o||(o={}))[c]=h:Mr(e.emitsOptions,l)||(!(l in i)||h!==i[l])&&(i[l]=h,a=!0)}if(s){const l=ht(n),h=o||ft;for(let c=0;c<s.length;c++){const u=s[c];n[u]=ps(r,l,u,h[u],e,!lt(h,u))}}return a}function ps(e,t,n,i,r,s){const a=e[n];if(a!=null){const o=lt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&nt(l)){const{propsDefaults:h}=r;n in h?i=h[n]:(We(r),i=h[n]=l.call(null,t),He())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===ge(n))&&(i=!0))}return i}function Nl(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,a={},o=[];let l=!1;if(!nt(e)){const c=u=>{l=!0;const[f,g]=Nl(u,t,!0);Et(a,f),g&&o.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return mt(e)&&i.set(e,Tn),Tn;if(J(s))for(let c=0;c<s.length;c++){const u=Qt(s[c]);Na(u)&&(a[u]=ft)}else if(s)for(const c in s){const u=Qt(c);if(Na(u)){const f=s[c],g=a[u]=J(f)||nt(f)?{type:f}:f;if(g){const d=Ha(Boolean,g.type),m=Ha(String,g.type);g[0]=d>-1,g[1]=m<0||d<m,(d>-1||lt(g,"default"))&&o.push(u)}}}const h=[a,o];return mt(e)&&i.set(e,h),h}function Na(e){return e[0]!=="$"}function Fa(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Ga(e,t){return Fa(e)===Fa(t)}function Ha(e,t){return J(t)?t.findIndex(n=>Ga(n,e)):nt(t)&&Ga(t,e)?0:-1}const Fl=e=>e[0]==="_"||e==="$stable",ia=e=>J(e)?e.map($t):[$t(e)],of=(e,t,n)=>{if(t._n)return t;const i=Si((...r)=>ia(t(...r)),n);return i._c=!1,i},Gl=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Fl(r))continue;const s=e[r];if(nt(s))t[r]=of(r,s,i);else if(s!=null){const a=ia(s);t[r]=()=>a}}},Hl=(e,t)=>{const n=ia(t);e.slots.default=()=>n},lf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ht(t),fr(t,"_",n)):Gl(t,e.slots={})}else e.slots={},t&&Hl(e,t);fr(e.slots,Fr,1)},hf=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,a=ft;if(i.shapeFlag&32){const o=t._;o?n&&o===1?s=!1:(Et(r,t),!n&&o===1&&delete r._):(s=!t.$stable,Gl(t,r)),a=t}else t&&(Hl(e,t),a={default:1});if(s)for(const o in r)!Fl(o)&&!(o in a)&&delete r[o]};function Bl(){return{app:null,config:{isNativeTag:wc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cf=0;function uf(e,t){return function(i,r=null){nt(i)||(i=Object.assign({},i)),r!=null&&!mt(r)&&(r=null);const s=Bl(),a=new Set;let o=!1;const l=s.app={_uid:cf++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:oh,get config(){return s.config},set config(h){},use(h,...c){return a.has(h)||(h&&nt(h.install)?(a.add(h),h.install(l,...c)):nt(h)&&(a.add(h),h(l,...c))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,c){return c?(s.components[h]=c,l):s.components[h]},directive(h,c){return c?(s.directives[h]=c,l):s.directives[h]},mount(h,c,u){if(!o){const f=ct(i,r);return f.appContext=s,c&&t?t(f,h):e(f,h,u),o=!0,l._container=h,h.__vue_app__=l,Gr(f.component)||f.component.proxy}},unmount(){o&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,c){return s.provides[h]=c,l}};return l}}function vr(e,t,n,i,r=!1){if(J(e)){e.forEach((f,g)=>vr(f,t&&(J(t)?t[g]:t),n,i,r));return}if(sn(i)&&!r)return;const s=i.shapeFlag&4?Gr(i.component)||i.component.proxy:i.el,a=r?null:s,{i:o,r:l}=e,h=t&&t.r,c=o.refs===ft?o.refs={}:o.refs,u=o.setupState;if(h!=null&&h!==l&&(yt(h)?(c[h]=null,lt(u,h)&&(u[h]=null)):Rt(h)&&(h.value=null)),nt(l))pe(l,o,12,[a,c]);else{const f=yt(l),g=Rt(l);if(f||g){const d=()=>{if(e.f){const m=f?lt(u,l)?u[l]:c[l]:l.value;r?J(m)&&Ns(m,s):J(m)?m.includes(s)||m.push(s):f?(c[l]=[s],lt(u,l)&&(u[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else f?(c[l]=a,lt(u,l)&&(u[l]=a)):g&&(l.value=a,e.k&&(c[e.k]=a))};a?(d.id=-1,Nt(d,n)):d()}}}let ke=!1;const Ui=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Vi=e=>e.nodeType===8;function ff(e){const{mt:t,p:n,o:{patchProp:i,createText:r,nextSibling:s,parentNode:a,remove:o,insert:l,createComment:h}}=e,c=(b,p)=>{if(!p.hasChildNodes()){n(null,b,p),dr(),p._vnode=b;return}ke=!1,u(p.firstChild,b,null,null,null),dr(),p._vnode=b,ke&&console.error("Hydration completed but contains mismatches.")},u=(b,p,C,S,A,E=!1)=>{const O=Vi(b)&&b.data==="[",x=()=>m(b,p,C,S,A,O),{type:L,ref:R,shapeFlag:D,patchFlag:N}=p;let k=b.nodeType;p.el=b,N===-2&&(E=!1,p.dynamicChildren=null);let T=null;switch(L){case Gn:k!==3?p.children===""?(l(p.el=r(""),a(b),b),T=b):T=x():(b.data!==p.children&&(ke=!0,b.data=p.children),T=s(b));break;case Bt:k!==8||O?T=x():T=s(b);break;case an:if(O&&(b=s(b),k=b.nodeType),k===1||k===3){T=b;const F=!p.children.length;for(let I=0;I<p.staticCount;I++)F&&(p.children+=T.nodeType===1?T.outerHTML:T.data),I===p.staticCount-1&&(p.anchor=T),T=s(T);return O?s(T):T}else x();break;case Dt:O?T=d(b,p,C,S,A,E):T=x();break;default:if(D&1)k!==1||p.type.toLowerCase()!==b.tagName.toLowerCase()?T=x():T=f(b,p,C,S,A,E);else if(D&6){p.slotScopeIds=A;const F=a(b);if(t(p,F,null,C,S,Ui(F),E),T=O?y(b):s(b),T&&Vi(T)&&T.data==="teleport end"&&(T=s(T)),sn(p)){let I;O?(I=ct(Dt),I.anchor=T?T.previousSibling:F.lastChild):I=b.nodeType===3?Rn(""):ct("div"),I.el=b,p.component.subTree=I}}else D&64?k!==8?T=x():T=p.type.hydrate(b,p,C,S,A,E,e,g):D&128&&(T=p.type.hydrate(b,p,C,S,Ui(a(b)),A,E,e,u))}return R!=null&&vr(R,null,S,p),T},f=(b,p,C,S,A,E)=>{E=E||!!p.dynamicChildren;const{type:O,props:x,patchFlag:L,shapeFlag:R,dirs:D}=p,N=O==="input"&&D||O==="option";if(N||L!==-1){if(D&&ue(p,null,C,"created"),x)if(N||!E||L&48)for(const T in x)(N&&T.endsWith("value")||Ei(T)&&!ai(T))&&i(b,T,null,x[T],!1,void 0,C);else x.onClick&&i(b,"onClick",null,x.onClick,!1,void 0,C);let k;if((k=x&&x.onVnodeBeforeMount)&&Ut(k,C,p),D&&ue(p,null,C,"beforeMount"),((k=x&&x.onVnodeMounted)||D)&&ml(()=>{k&&Ut(k,C,p),D&&ue(p,null,C,"mounted")},S),R&16&&!(x&&(x.innerHTML||x.textContent))){let T=g(b.firstChild,p,b,C,S,A,E);for(;T;){ke=!0;const F=T;T=T.nextSibling,o(F)}}else R&8&&b.textContent!==p.children&&(ke=!0,b.textContent=p.children)}return b.nextSibling},g=(b,p,C,S,A,E,O)=>{O=O||!!p.dynamicChildren;const x=p.children,L=x.length;for(let R=0;R<L;R++){const D=O?x[R]:x[R]=$t(x[R]);if(b)b=u(b,D,S,A,E,O);else{if(D.type===Gn&&!D.children)continue;ke=!0,n(null,D,C,null,S,A,Ui(C),E)}}return b},d=(b,p,C,S,A,E)=>{const{slotScopeIds:O}=p;O&&(A=A?A.concat(O):O);const x=a(b),L=g(s(b),p,x,C,S,A,E);return L&&Vi(L)&&L.data==="]"?s(p.anchor=L):(ke=!0,l(p.anchor=h("]"),x,L),L)},m=(b,p,C,S,A,E)=>{if(ke=!0,p.el=null,E){const L=y(b);for(;;){const R=s(b);if(R&&R!==L)o(R);else break}}const O=s(b),x=a(b);return o(b),n(null,p,x,O,C,S,Ui(x),A),O},y=b=>{let p=0;for(;b;)if(b=s(b),b&&Vi(b)&&(b.data==="["&&p++,b.data==="]")){if(p===0)return s(b);p--}return b};return[c,u]}const Nt=ml;function jl(e){return Vl(e)}function Ul(e){return Vl(e,ff)}function Vl(e,t){const n=kc();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:f,setScopeId:g=ae,insertStaticContent:d}=e,m=(_,w,M,H=null,G=null,K=null,X=!1,W=null,$=!!w.dynamicChildren)=>{if(_===w)return;_&&!de(_,w)&&(H=ne(_),at(_,G,K,!0),_=null),w.patchFlag===-2&&($=!1,w.dynamicChildren=null);const{type:j,ref:tt,shapeFlag:Q}=w;switch(j){case Gn:y(_,w,M,H);break;case Bt:b(_,w,M,H);break;case an:_==null&&p(w,M,H,X);break;case Dt:N(_,w,M,H,G,K,X,W,$);break;default:Q&1?A(_,w,M,H,G,K,X,W,$):Q&6?k(_,w,M,H,G,K,X,W,$):(Q&64||Q&128)&&j.process(_,w,M,H,G,K,X,W,$,he)}tt!=null&&G&&vr(tt,_&&_.ref,K,w||_,!w)},y=(_,w,M,H)=>{if(_==null)i(w.el=o(w.children),M,H);else{const G=w.el=_.el;w.children!==_.children&&h(G,w.children)}},b=(_,w,M,H)=>{_==null?i(w.el=l(w.children||""),M,H):w.el=_.el},p=(_,w,M,H)=>{[_.el,_.anchor]=d(_.children,w,M,H,_.el,_.anchor)},C=({el:_,anchor:w},M,H)=>{let G;for(;_&&_!==w;)G=f(_),i(_,M,H),_=G;i(w,M,H)},S=({el:_,anchor:w})=>{let M;for(;_&&_!==w;)M=f(_),r(_),_=M;r(w)},A=(_,w,M,H,G,K,X,W,$)=>{X=X||w.type==="svg",_==null?E(w,M,H,G,K,X,W,$):L(_,w,G,K,X,W,$)},E=(_,w,M,H,G,K,X,W)=>{let $,j;const{type:tt,props:Q,shapeFlag:et,transition:rt,dirs:ot}=_;if($=_.el=a(_.type,K,Q&&Q.is,Q),et&8?c($,_.children):et&16&&x(_.children,$,null,H,G,K&&tt!=="foreignObject",X,W),ot&&ue(_,null,H,"created"),Q){for(const pt in Q)pt!=="value"&&!ai(pt)&&s($,pt,null,Q[pt],K,_.children,H,G,xt);"value"in Q&&s($,"value",null,Q.value),(j=Q.onVnodeBeforeMount)&&Ut(j,H,_)}O($,_,_.scopeId,X,H),ot&&ue(_,null,H,"beforeMount");const bt=(!G||G&&!G.pendingBranch)&&rt&&!rt.persisted;bt&&rt.beforeEnter($),i($,w,M),((j=Q&&Q.onVnodeMounted)||bt||ot)&&Nt(()=>{j&&Ut(j,H,_),bt&&rt.enter($),ot&&ue(_,null,H,"mounted")},G)},O=(_,w,M,H,G)=>{if(M&&g(_,M),H)for(let K=0;K<H.length;K++)g(_,H[K]);if(G){let K=G.subTree;if(w===K){const X=G.vnode;O(_,X,X.scopeId,X.slotScopeIds,G.parent)}}},x=(_,w,M,H,G,K,X,W,$=0)=>{for(let j=$;j<_.length;j++){const tt=_[j]=W?Le(_[j]):$t(_[j]);m(null,tt,w,M,H,G,K,X,W)}},L=(_,w,M,H,G,K,X)=>{const W=w.el=_.el;let{patchFlag:$,dynamicChildren:j,dirs:tt}=w;$|=_.patchFlag&16;const Q=_.props||ft,et=w.props||ft;let rt;M&&qe(M,!1),(rt=et.onVnodeBeforeUpdate)&&Ut(rt,M,w,_),tt&&ue(w,_,M,"beforeUpdate"),M&&qe(M,!0);const ot=G&&w.type!=="foreignObject";if(j?R(_.dynamicChildren,j,W,M,H,ot,K):X||Z(_,w,W,null,M,H,ot,K,!1),$>0){if($&16)D(W,w,Q,et,M,H,G);else if($&2&&Q.class!==et.class&&s(W,"class",null,et.class,G),$&4&&s(W,"style",Q.style,et.style,G),$&8){const bt=w.dynamicProps;for(let pt=0;pt<bt.length;pt++){const kt=bt[pt],ie=Q[kt],Cn=et[kt];(Cn!==ie||kt==="value")&&s(W,kt,ie,Cn,G,_.children,M,H,xt)}}$&1&&_.children!==w.children&&c(W,w.children)}else!X&&j==null&&D(W,w,Q,et,M,H,G);((rt=et.onVnodeUpdated)||tt)&&Nt(()=>{rt&&Ut(rt,M,w,_),tt&&ue(w,_,M,"updated")},H)},R=(_,w,M,H,G,K,X)=>{for(let W=0;W<w.length;W++){const $=_[W],j=w[W],tt=$.el&&($.type===Dt||!de($,j)||$.shapeFlag&70)?u($.el):M;m($,j,tt,null,H,G,K,X,!0)}},D=(_,w,M,H,G,K,X)=>{if(M!==H){if(M!==ft)for(const W in M)!ai(W)&&!(W in H)&&s(_,W,M[W],null,X,w.children,G,K,xt);for(const W in H){if(ai(W))continue;const $=H[W],j=M[W];$!==j&&W!=="value"&&s(_,W,j,$,X,w.children,G,K,xt)}"value"in H&&s(_,"value",M.value,H.value)}},N=(_,w,M,H,G,K,X,W,$)=>{const j=w.el=_?_.el:o(""),tt=w.anchor=_?_.anchor:o("");let{patchFlag:Q,dynamicChildren:et,slotScopeIds:rt}=w;rt&&(W=W?W.concat(rt):rt),_==null?(i(j,M,H),i(tt,M,H),x(w.children,M,tt,G,K,X,W,$)):Q>0&&Q&64&&et&&_.dynamicChildren?(R(_.dynamicChildren,et,M,G,K,X,W),(w.key!=null||G&&w===G.subTree)&&ra(_,w,!0)):Z(_,w,M,tt,G,K,X,W,$)},k=(_,w,M,H,G,K,X,W,$)=>{w.slotScopeIds=W,_==null?w.shapeFlag&512?G.ctx.activate(w,M,H,X,$):T(w,M,H,G,K,X,$):F(_,w,$)},T=(_,w,M,H,G,K,X)=>{const W=_.component=ql(_,H,G);if(Oi(_)&&(W.ctx.renderer=he),Jl(W),W.asyncDep){if(G&&G.registerDep(W,I),!_.el){const $=W.subTree=ct(Bt);b(null,$,w,M)}return}I(W,_,w,M,G,K,X)},F=(_,w,M)=>{const H=w.component=_.component;if(Ou(_,w,M))if(H.asyncDep&&!H.asyncResolved){Y(H,w,M);return}else H.next=w,Su(H.update),H.update();else w.el=_.el,H.vnode=w},I=(_,w,M,H,G,K,X)=>{const W=()=>{if(_.isMounted){let{next:tt,bu:Q,u:et,parent:rt,vnode:ot}=_,bt=tt,pt;qe(_,!1),tt?(tt.el=ot.el,Y(_,tt,X)):tt=ot,Q&&kn(Q),(pt=tt.props&&tt.props.onVnodeBeforeUpdate)&&Ut(pt,rt,tt,ot),qe(_,!0);const kt=rr(_),ie=_.subTree;_.subTree=kt,m(ie,kt,u(ie.el),ne(ie),_,G,K),tt.el=kt.el,bt===null&&qs(_,kt.el),et&&Nt(et,G),(pt=tt.props&&tt.props.onVnodeUpdated)&&Nt(()=>Ut(pt,rt,tt,ot),G)}else{let tt;const{el:Q,props:et}=w,{bm:rt,m:ot,parent:bt}=_,pt=sn(w);if(qe(_,!1),rt&&kn(rt),!pt&&(tt=et&&et.onVnodeBeforeMount)&&Ut(tt,bt,w),qe(_,!0),Q&&yn){const kt=()=>{_.subTree=rr(_),yn(Q,_.subTree,_,G,null)};pt?w.type.__asyncLoader().then(()=>!_.isUnmounted&&kt()):kt()}else{const kt=_.subTree=rr(_);m(null,kt,M,H,_,G,K),w.el=kt.el}if(ot&&Nt(ot,G),!pt&&(tt=et&&et.onVnodeMounted)){const kt=w;Nt(()=>Ut(tt,bt,kt),G)}(w.shapeFlag&256||bt&&sn(bt.vnode)&&bt.vnode.shapeFlag&256)&&_.a&&Nt(_.a,G),_.isMounted=!0,w=M=H=null}},$=_.effect=new ki(W,()=>kr(j),_.scope),j=_.update=()=>$.run();j.id=_.uid,qe(_,!0),j()},Y=(_,w,M)=>{w.component=_;const H=_.vnode.props;_.vnode=w,_.next=null,af(_,w.props,H,M),hf(_,w.children,M),un(),Aa(),fn()},Z=(_,w,M,H,G,K,X,W,$=!1)=>{const j=_&&_.children,tt=_?_.shapeFlag:0,Q=w.children,{patchFlag:et,shapeFlag:rt}=w;if(et>0){if(et&128){z(j,Q,M,H,G,K,X,W,$);return}else if(et&256){st(j,Q,M,H,G,K,X,W,$);return}}rt&8?(tt&16&&xt(j,G,K),Q!==j&&c(M,Q)):tt&16?rt&16?z(j,Q,M,H,G,K,X,W,$):xt(j,G,K,!0):(tt&8&&c(M,""),rt&16&&x(Q,M,H,G,K,X,W,$))},st=(_,w,M,H,G,K,X,W,$)=>{_=_||Tn,w=w||Tn;const j=_.length,tt=w.length,Q=Math.min(j,tt);let et;for(et=0;et<Q;et++){const rt=w[et]=$?Le(w[et]):$t(w[et]);m(_[et],rt,M,null,G,K,X,W,$)}j>tt?xt(_,G,K,!0,!1,Q):x(w,M,H,G,K,X,W,$,Q)},z=(_,w,M,H,G,K,X,W,$)=>{let j=0;const tt=w.length;let Q=_.length-1,et=tt-1;for(;j<=Q&&j<=et;){const rt=_[j],ot=w[j]=$?Le(w[j]):$t(w[j]);if(de(rt,ot))m(rt,ot,M,null,G,K,X,W,$);else break;j++}for(;j<=Q&&j<=et;){const rt=_[Q],ot=w[et]=$?Le(w[et]):$t(w[et]);if(de(rt,ot))m(rt,ot,M,null,G,K,X,W,$);else break;Q--,et--}if(j>Q){if(j<=et){const rt=et+1,ot=rt<tt?w[rt].el:H;for(;j<=et;)m(null,w[j]=$?Le(w[j]):$t(w[j]),M,ot,G,K,X,W,$),j++}}else if(j>et)for(;j<=Q;)at(_[j],G,K,!0),j++;else{const rt=j,ot=j,bt=new Map;for(j=ot;j<=et;j++){const Kt=w[j]=$?Le(w[j]):$t(w[j]);Kt.key!=null&&bt.set(Kt.key,j)}let pt,kt=0;const ie=et-ot+1;let Cn=!1,va=0;const zn=new Array(ie);for(j=0;j<ie;j++)zn[j]=0;for(j=rt;j<=Q;j++){const Kt=_[j];if(kt>=ie){at(Kt,G,K,!0);continue}let ce;if(Kt.key!=null)ce=bt.get(Kt.key);else for(pt=ot;pt<=et;pt++)if(zn[pt-ot]===0&&de(Kt,w[pt])){ce=pt;break}ce===void 0?at(Kt,G,K,!0):(zn[ce-ot]=j+1,ce>=va?va=ce:Cn=!0,m(Kt,w[ce],M,null,G,K,X,W,$),kt++)}const ma=Cn?df(zn):Tn;for(pt=ma.length-1,j=ie-1;j>=0;j--){const Kt=ot+j,ce=w[Kt],_a=Kt+1<tt?w[Kt+1].el:H;zn[j]===0?m(null,ce,M,_a,G,K,X,W,$):Cn&&(pt<0||j!==ma[pt]?it(ce,M,_a,2):pt--)}}},it=(_,w,M,H,G=null)=>{const{el:K,type:X,transition:W,children:$,shapeFlag:j}=_;if(j&6){it(_.component.subTree,w,M,H);return}if(j&128){_.suspense.move(w,M,H);return}if(j&64){X.move(_,w,M,he);return}if(X===Dt){i(K,w,M);for(let Q=0;Q<$.length;Q++)it($[Q],w,M,H);i(_.anchor,w,M);return}if(X===an){C(_,w,M);return}if(H!==2&&j&1&&W)if(H===0)W.beforeEnter(K),i(K,w,M),Nt(()=>W.enter(K),G);else{const{leave:Q,delayLeave:et,afterLeave:rt}=W,ot=()=>i(K,w,M),bt=()=>{Q(K,()=>{ot(),rt&&rt()})};et?et(K,ot,bt):bt()}else i(K,w,M)},at=(_,w,M,H=!1,G=!1)=>{const{type:K,props:X,ref:W,children:$,dynamicChildren:j,shapeFlag:tt,patchFlag:Q,dirs:et}=_;if(W!=null&&vr(W,null,M,_,!0),tt&256){w.ctx.deactivate(_);return}const rt=tt&1&&et,ot=!sn(_);let bt;if(ot&&(bt=X&&X.onVnodeBeforeUnmount)&&Ut(bt,w,_),tt&6)wt(_.component,M,H);else{if(tt&128){_.suspense.unmount(M,H);return}rt&&ue(_,null,w,"beforeUnmount"),tt&64?_.type.remove(_,w,M,G,he,H):j&&(K!==Dt||Q>0&&Q&64)?xt(j,w,M,!1,!0):(K===Dt&&Q&384||!G&&tt&16)&&xt($,w,M),H&&gt(_)}(ot&&(bt=X&&X.onVnodeUnmounted)||rt)&&Nt(()=>{bt&&Ut(bt,w,_),rt&&ue(_,null,w,"unmounted")},M)},gt=_=>{const{type:w,el:M,anchor:H,transition:G}=_;if(w===Dt){Ft(M,H);return}if(w===an){S(_);return}const K=()=>{r(M),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(_.shapeFlag&1&&G&&!G.persisted){const{leave:X,delayLeave:W}=G,$=()=>X(M,K);W?W(_.el,K,$):$()}else K()},Ft=(_,w)=>{let M;for(;_!==w;)M=f(_),r(_),_=M;r(w)},wt=(_,w,M)=>{const{bum:H,scope:G,update:K,subTree:X,um:W}=_;H&&kn(H),G.stop(),K&&(K.active=!1,at(X,_,w,M)),W&&Nt(W,w),Nt(()=>{_.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},xt=(_,w,M,H=!1,G=!1,K=0)=>{for(let X=K;X<_.length;X++)at(_[X],w,M,H,G)},ne=_=>_.shapeFlag&6?ne(_.component.subTree):_.shapeFlag&128?_.suspense.next():f(_.anchor||_.el),It=(_,w,M)=>{_==null?w._vnode&&at(w._vnode,null,null,!0):m(w._vnode||null,_,w,null,null,null,M),Aa(),dr(),w._vnode=_},he={p:m,um:at,m:it,r:gt,mt:T,mc:x,pc:Z,pbc:R,n:ne,o:e};let Kn,yn;return t&&([Kn,yn]=t(he)),{render:It,hydrate:Kn,createApp:uf(It,Kn)}}function qe({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function ra(e,t,n=!1){const i=e.children,r=t.children;if(J(i)&&J(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=Le(r[s]),o.el=a.el),n||ra(a,o))}}function df(e){const t=e.slice(),n=[0];let i,r,s,a,o;const l=e.length;for(i=0;i<l;i++){const h=e[i];if(h!==0){if(r=n[n.length-1],e[r]<h){t[i]=r,n.push(i);continue}for(s=0,a=n.length-1;s<a;)o=s+a>>1,e[n[o]]<h?s=o+1:a=o;h<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const gf=e=>e.__isTeleport,ci=e=>e&&(e.disabled||e.disabled===""),Ba=e=>typeof SVGElement<"u"&&e instanceof SVGElement,vs=(e,t)=>{const n=e&&e.to;return yt(n)?t?t(n):null:n},pf={__isTeleport:!0,process(e,t,n,i,r,s,a,o,l,h){const{mc:c,pc:u,pbc:f,o:{insert:g,querySelector:d,createText:m,createComment:y}}=h,b=ci(t.props);let{shapeFlag:p,children:C,dynamicChildren:S}=t;if(e==null){const A=t.el=m(""),E=t.anchor=m("");g(A,n,i),g(E,n,i);const O=t.target=vs(t.props,d),x=t.targetAnchor=m("");O&&(g(x,O),a=a||Ba(O));const L=(R,D)=>{p&16&&c(C,R,D,r,s,a,o,l)};b?L(n,E):O&&L(O,x)}else{t.el=e.el;const A=t.anchor=e.anchor,E=t.target=e.target,O=t.targetAnchor=e.targetAnchor,x=ci(e.props),L=x?n:E,R=x?A:O;if(a=a||Ba(E),S?(f(e.dynamicChildren,S,L,r,s,a,o),ra(e,t,!0)):l||u(e,t,L,R,r,s,a,o,!1),b)x||Wi(t,n,A,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=vs(t.props,d);D&&Wi(t,D,null,h,0)}else x&&Wi(t,E,O,h,1)}},remove(e,t,n,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:h,targetAnchor:c,target:u,props:f}=e;if(u&&s(c),(a||!ci(f))&&(s(h),o&16))for(let g=0;g<l.length;g++){const d=l[g];r(d,t,n,!0,!!d.dynamicChildren)}},move:Wi,hydrate:vf};function Wi(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:a,anchor:o,shapeFlag:l,children:h,props:c}=e,u=s===2;if(u&&i(a,t,n),(!u||ci(c))&&l&16)for(let f=0;f<h.length;f++)r(h[f],t,n,2);u&&i(o,t,n)}function vf(e,t,n,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},h){const c=t.target=vs(t.props,l);if(c){const u=c._lpa||c.firstChild;if(t.shapeFlag&16)if(ci(t.props))t.anchor=h(a(e),t,o(e),n,i,r,s),t.targetAnchor=u;else{t.anchor=a(e);let f=u;for(;f;)if(f=a(f),f&&f.nodeType===8&&f.data==="teleport anchor"){t.targetAnchor=f,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}h(u,t,c,n,i,r,s)}}return t.anchor&&a(t.anchor)}const mf=pf,Dt=Symbol(void 0),Gn=Symbol(void 0),Bt=Symbol(void 0),an=Symbol(void 0),ui=[];let Vt=null;function ee(e=!1){ui.push(Vt=e?null:[])}function Wl(){ui.pop(),Vt=ui[ui.length-1]||null}let hn=1;function ms(e){hn+=e}function Kl(e){return e.dynamicChildren=hn>0?Vt||Tn:null,Wl(),hn>0&&Vt&&Vt.push(e),e}function De(e,t,n,i,r,s){return Kl(At(e,t,n,i,r,s,!0))}function Nr(e,t,n,i,r){return Kl(ct(e,t,n,i,r,!0))}function Ve(e){return e?e.__v_isVNode===!0:!1}function de(e,t){return e.type===t.type&&e.key===t.key}function _f(e){}const Fr="__vInternal",zl=({key:e})=>e!=null?e:null,or=({ref:e,ref_key:t,ref_for:n})=>e!=null?yt(e)||Rt(e)||nt(e)?{i:Ht,r:e,k:t,f:!!n}:e:null;function At(e,t=null,n=null,i=0,r=null,s=e===Dt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zl(t),ref:t&&or(t),scopeId:Or,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return o?(sa(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=yt(n)?8:16),hn>0&&!a&&Vt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Vt.push(l),l}const ct=bf;function bf(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===Ol)&&(e=Bt),Ve(e)){const o=ve(e,t,!0);return n&&sa(o,n),hn>0&&!s&&Vt&&(o.shapeFlag&6?Vt[Vt.indexOf(e)]=o:Vt.push(o)),o.patchFlag|=-2,o}if(kf(e)&&(e=e.__vccOpts),t){t=$l(t);let{class:o,style:l}=t;o&&!yt(o)&&(t.class=Pi(o)),mt(l)&&(Vs(l)&&!J(l)&&(l=Et({},l)),t.style=Ne(l))}const a=yt(e)?1:vl(e)?128:gf(e)?64:mt(e)?4:nt(e)?2:0;return At(e,t,n,i,r,a,s,!0)}function $l(e){return e?Vs(e)||Fr in e?Et({},e):e:null}function ve(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:a}=e,o=t?Xl(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&zl(o),ref:t&&t.ref?n&&r?J(r)?r.concat(or(t)):[r,or(t)]:or(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Dt?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ve(e.ssContent),ssFallback:e.ssFallback&&ve(e.ssFallback),el:e.el,anchor:e.anchor}}function Rn(e=" ",t=0){return ct(Gn,null,e,t)}function yf(e,t){const n=ct(an,null,e);return n.staticCount=t,n}function Yl(e="",t=!1){return t?(ee(),Nr(Bt,null,e)):ct(Bt,null,e)}function $t(e){return e==null||typeof e=="boolean"?ct(Bt):J(e)?ct(Dt,null,e.slice()):typeof e=="object"?Le(e):ct(Gn,null,String(e))}function Le(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ve(e)}function sa(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(J(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),sa(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Fr in t)?t._ctx=Ht:r===3&&Ht&&(Ht.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else nt(t)?(t={default:t,_ctx:Ht},n=32):(t=String(t),i&64?(n=16,t=[Rn(t)]):n=8);e.children=t,e.shapeFlag|=n}function Xl(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Pi([t.class,i.class]));else if(r==="style")t.style=Ne([t.style,i.style]);else if(Ei(r)){const s=t[r],a=i[r];a&&s!==a&&!(J(s)&&s.includes(a))&&(t[r]=s?[].concat(s,a):a)}else r!==""&&(t[r]=i[r])}return t}function Ut(e,t,n,i=null){Xt(e,t,7,[n,i])}const Cf=Bl();let Sf=0;function ql(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Cf,s={uid:Sf++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nl(i,r),emitsOptions:pl(i,r),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=xu.bind(null,s),e.ce&&e.ce(s),s}let Ot=null;const xe=()=>Ot||Ht,We=e=>{Ot=e,e.scope.on()},He=()=>{Ot&&Ot.scope.off(),Ot=null};function Ql(e){return e.vnode.shapeFlag&4}let Hn=!1;function Jl(e,t=!1){Hn=t;const{props:n,children:i}=e.vnode,r=Ql(e);sf(e,n,r,t),lf(e,i);const s=r?wf(e,t):void 0;return Hn=!1,s}function wf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ws(new Proxy(e.ctx,fs));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?th(e):null;We(e),un();const s=pe(i,e,0,[e.props,r]);if(fn(),He(),Fs(s)){if(s.then(He,He),t)return s.then(a=>{_s(e,a,t)}).catch(a=>{dn(a,e,0)});e.asyncDep=s}else _s(e,s,t)}else Zl(e,t)}function _s(e,t,n){nt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:mt(t)&&(e.setupState=$s(t)),Zl(e,n)}let mr,bs;function xf(e){mr=e,bs=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,Ju))}}const Pf=()=>!mr;function Zl(e,t,n){const i=e.type;if(!e.render){if(!t&&mr&&!i.render){const r=i.template||na(e).template;if(r){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:o,compilerOptions:l}=i,h=Et(Et({isCustomElement:s,delimiters:o},a),l);i.render=mr(r,h)}}e.render=i.render||ae,bs&&bs(e)}We(e),un(),Zu(e),fn(),He()}function Ef(e){return new Proxy(e.attrs,{get(t,n){return Jt(e,"get","$attrs"),t[n]}})}function th(e){const t=i=>{e.exposed=i||{}};let n;return{get attrs(){return n||(n=Ef(e))},slots:e.slots,emit:e.emit,expose:t}}function Gr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy($s(Ws(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in gr)return gr[n](e)}}))}const Tf=/(?:^|[-_])(\w)/g,Af=e=>e.replace(Tf,t=>t.toUpperCase()).replace(/[-_]/g,"");function _r(e,t=!0){return nt(e)?e.displayName||e.name:e.name||t&&e.__name}function eh(e,t,n=!1){let i=_r(t);if(!i&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(i=r[1])}if(!i&&e&&e.parent){const r=s=>{for(const a in s)if(s[a]===t)return a};i=r(e.components||e.parent.type.components)||r(e.appContext.components)}return i?Af(i):n?"App":"Anonymous"}function kf(e){return nt(e)&&"__vccOpts"in e}const nh=(e,t)=>pu(e,t,Hn);function Mf(){return null}function Of(){return null}function Rf(e){}function Lf(e,t){return null}function If(){return ih().slots}function Df(){return ih().attrs}function ih(){const e=xe();return e.setupContext||(e.setupContext=th(e))}function Nf(e,t){const n=J(e)?e.reduce((i,r)=>(i[r]={},i),{}):e;for(const i in t){const r=n[i];r?J(r)||nt(r)?n[i]={type:r,default:t[i]}:r.default=t[i]:r===null&&(n[i]={default:t[i]})}return n}function Ff(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function Gf(e){const t=xe();let n=e();return He(),Fs(n)&&(n=n.catch(i=>{throw We(t),i})),[n,()=>We(t)]}function rh(e,t,n){const i=arguments.length;return i===2?mt(t)&&!J(t)?Ve(t)?ct(e,null,[t]):ct(e,t):ct(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Ve(n)&&(n=[n]),ct(e,t,n))}const sh=Symbol(""),Hf=()=>{{const e=hi(sh);return e||hl("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function Bf(){}function jf(e,t,n,i){const r=n[i];if(r&&ah(r,e))return r;const s=t();return s.memo=e.slice(),n[i]=s}function ah(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(Nn(n[i],t[i]))return!1;return hn>0&&Vt&&Vt.push(e),!0}const oh="3.2.41",Uf={createComponentInstance:ql,setupComponent:Jl,renderComponentRoot:rr,setCurrentRenderingInstance:Ci,isVNode:Ve,normalizeVNode:$t},Vf=Uf,Wf=null,Kf=null,zf="http://www.w3.org/2000/svg",tn=typeof document<"u"?document:null,ja=tn&&tn.createElement("template"),$f={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?tn.createElementNS(zf,e):tn.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>tn.createTextNode(e),createComment:e=>tn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>tn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const a=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{ja.innerHTML=i?`<svg>${e}</svg>`:e;const o=ja.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Yf(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Xf(e,t,n){const i=e.style,r=yt(n);if(n&&!r){for(const s in n)ys(i,s,n[s]);if(t&&!yt(t))for(const s in t)n[s]==null&&ys(i,s,"")}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Ua=/\s*!important$/;function ys(e,t,n){if(J(n))n.forEach(i=>ys(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=qf(e,t);Ua.test(n)?e.setProperty(ge(i),n.replace(Ua,""),"important"):e[i]=n}}const Va=["Webkit","Moz","ms"],$r={};function qf(e,t){const n=$r[t];if(n)return n;let i=Qt(t);if(i!=="filter"&&i in e)return $r[t]=i;i=Ai(i);for(let r=0;r<Va.length;r++){const s=Va[r]+i;if(s in e)return $r[t]=s}return t}const Wa="http://www.w3.org/1999/xlink";function Qf(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Wa,t.slice(6,t.length)):e.setAttributeNS(Wa,t,n);else{const s=mc(t);n==null||s&&!Bo(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function Jf(e,t,n,i,r,s,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,r,s),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Bo(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(t)}function Ce(e,t,n,i){e.addEventListener(t,n,i)}function Zf(e,t,n,i){e.removeEventListener(t,n,i)}function td(e,t,n,i,r=null){const s=e._vei||(e._vei={}),a=s[t];if(i&&a)a.value=i;else{const[o,l]=ed(t);if(i){const h=s[t]=rd(i,r);Ce(e,o,h,l)}else a&&(Zf(e,o,a,l),s[t]=void 0)}}const Ka=/(?:Once|Passive|Capture)$/;function ed(e){let t;if(Ka.test(e)){t={};let i;for(;i=e.match(Ka);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ge(e.slice(2)),t]}let Yr=0;const nd=Promise.resolve(),id=()=>Yr||(nd.then(()=>Yr=0),Yr=Date.now());function rd(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Xt(sd(i,n.value),t,5,[i])};return n.value=e,n.attached=id(),n}function sd(e,t){if(J(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const za=/^on[a-z]/,ad=(e,t,n,i,r=!1,s,a,o,l)=>{t==="class"?Yf(e,i,r):t==="style"?Xf(e,n,i):Ei(t)?Ds(t)||td(e,t,n,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):od(e,t,i,r))?Jf(e,t,i,s,a,o,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Qf(e,t,i,r))};function od(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&za.test(t)&&nt(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||za.test(t)&&yt(n)?!1:t in e}function lh(e,t){const n=ze(e);class i extends Hr{constructor(s){super(n,s,t)}}return i.def=n,i}const ld=e=>lh(e,Sh),hd=typeof HTMLElement<"u"?HTMLElement:class{};class Hr extends hd{constructor(t,n={},i){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Ar(()=>{this._connected||(Ss(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const r of i)this._setAttr(r.attributeName)}).observe(this,{attributes:!0});const t=i=>{const{props:r,styles:s}=i,a=!J(r),o=r?a?Object.keys(r):r:[];let l;if(a)for(const h in this._props){const c=r[h];(c===Number||c&&c.type===Number)&&(this._props[h]=je(this._props[h]),(l||(l=Object.create(null)))[h]=!0)}this._numberProps=l;for(const h of Object.keys(this))h[0]!=="_"&&this._setProp(h,this[h],!0,!1);for(const h of o.map(Qt))Object.defineProperty(this,h,{get(){return this._getProp(h)},set(c){this._setProp(h,c)}});this._applyStyles(s),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=je(n)),this._setProp(Qt(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,i=!0,r=!0){n!==this._props[t]&&(this._props[t]=n,r&&this._instance&&this._update(),i&&(n===!0?this.setAttribute(ge(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(ge(t),n+""):n||this.removeAttribute(ge(t))))}_update(){Ss(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ct(this._def,Et({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(r,...s)=>{this.dispatchEvent(new CustomEvent(r,{detail:s}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof Hr){n.parent=i._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const i=document.createElement("style");i.textContent=n,this.shadowRoot.appendChild(i)})}}function cd(e="$style"){{const t=xe();if(!t)return ft;const n=t.type.__cssModules;if(!n)return ft;const i=n[e];return i||ft}}function ud(e){const t=xe();if(!t)return;const n=()=>Cs(t.subTree,e(t.proxy));bl(n),gn(()=>{const i=new MutationObserver(n);i.observe(t.subTree.el.parentNode,{childList:!0}),Dr(()=>i.disconnect())})}function Cs(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Cs(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)$a(e.el,t);else if(e.type===Dt)e.children.forEach(n=>Cs(n,t));else if(e.type===an){let{el:n,anchor:i}=e;for(;n&&($a(n,t),n!==i);)n=n.nextSibling}}function $a(e,t){if(e.nodeType===1){const n=e.style;for(const i in t)n.setProperty(`--${i}`,t[i])}}const Me="transition",$n="animation",aa=(e,{slots:t})=>rh(Zs,ch(e),t);aa.displayName="Transition";const hh={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},fd=aa.props=Et({},Zs.props,hh),Qe=(e,t=[])=>{J(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ya=e=>e?J(e)?e.some(t=>t.length>1):e.length>1:!1;function ch(e){const t={};for(const N in e)N in hh||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:o=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:h=a,appearToClass:c=o,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=e,d=dd(r),m=d&&d[0],y=d&&d[1],{onBeforeEnter:b,onEnter:p,onEnterCancelled:C,onLeave:S,onLeaveCancelled:A,onBeforeAppear:E=b,onAppear:O=p,onAppearCancelled:x=C}=t,L=(N,k,T)=>{Oe(N,k?c:o),Oe(N,k?h:a),T&&T()},R=(N,k)=>{N._isLeaving=!1,Oe(N,u),Oe(N,g),Oe(N,f),k&&k()},D=N=>(k,T)=>{const F=N?O:p,I=()=>L(k,N,T);Qe(F,[k,I]),Xa(()=>{Oe(k,N?l:s),_e(k,N?c:o),Ya(F)||qa(k,i,m,I)})};return Et(t,{onBeforeEnter(N){Qe(b,[N]),_e(N,s),_e(N,a)},onBeforeAppear(N){Qe(E,[N]),_e(N,l),_e(N,h)},onEnter:D(!1),onAppear:D(!0),onLeave(N,k){N._isLeaving=!0;const T=()=>R(N,k);_e(N,u),fh(),_e(N,f),Xa(()=>{!N._isLeaving||(Oe(N,u),_e(N,g),Ya(S)||qa(N,i,y,T))}),Qe(S,[N,T])},onEnterCancelled(N){L(N,!1),Qe(C,[N])},onAppearCancelled(N){L(N,!0),Qe(x,[N])},onLeaveCancelled(N){R(N),Qe(A,[N])}})}function dd(e){if(e==null)return null;if(mt(e))return[Xr(e.enter),Xr(e.leave)];{const t=Xr(e);return[t,t]}}function Xr(e){return je(e)}function _e(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function Oe(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Xa(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let gd=0;function qa(e,t,n,i){const r=e._endId=++gd,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:a,timeout:o,propCount:l}=uh(e,t);if(!a)return i();const h=a+"end";let c=0;const u=()=>{e.removeEventListener(h,f),s()},f=g=>{g.target===e&&++c>=l&&u()};setTimeout(()=>{c<l&&u()},o+1),e.addEventListener(h,f)}function uh(e,t){const n=window.getComputedStyle(e),i=d=>(n[d]||"").split(", "),r=i(Me+"Delay"),s=i(Me+"Duration"),a=Qa(r,s),o=i($n+"Delay"),l=i($n+"Duration"),h=Qa(o,l);let c=null,u=0,f=0;t===Me?a>0&&(c=Me,u=a,f=s.length):t===$n?h>0&&(c=$n,u=h,f=l.length):(u=Math.max(a,h),c=u>0?a>h?Me:$n:null,f=c?c===Me?s.length:l.length:0);const g=c===Me&&/\b(transform|all)(,|$)/.test(n[Me+"Property"]);return{type:c,timeout:u,propCount:f,hasTransform:g}}function Qa(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Ja(n)+Ja(e[i])))}function Ja(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function fh(){return document.body.offsetHeight}const dh=new WeakMap,gh=new WeakMap,pd={name:"TransitionGroup",props:Et({},fd,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=xe(),i=Js();let r,s;return Ir(()=>{if(!r.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!yd(r[0].el,n.vnode.el,a))return;r.forEach(md),r.forEach(_d);const o=r.filter(bd);fh(),o.forEach(l=>{const h=l.el,c=h.style;_e(h,a),c.transform=c.webkitTransform=c.transitionDuration="";const u=h._moveCb=f=>{f&&f.target!==h||(!f||/transform$/.test(f.propertyName))&&(h.removeEventListener("transitionend",u),h._moveCb=null,Oe(h,a))};h.addEventListener("transitionend",u)})}),()=>{const a=ht(e),o=ch(a);let l=a.tag||Dt;r=s,s=t.default?Rr(t.default()):[];for(let h=0;h<s.length;h++){const c=s[h];c.key!=null&&ln(c,Fn(c,o,i,n))}if(r)for(let h=0;h<r.length;h++){const c=r[h];ln(c,Fn(c,o,i,n)),dh.set(c,c.el.getBoundingClientRect())}return ct(l,null,s)}}},vd=pd;function md(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function _d(e){gh.set(e,e.el.getBoundingClientRect())}function bd(e){const t=dh.get(e),n=gh.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",e}}function yd(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),n.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(i);const{hasTransform:s}=uh(i);return r.removeChild(i),s}const Ke=e=>{const t=e.props["onUpdate:modelValue"]||!1;return J(t)?n=>kn(t,n):t};function Cd(e){e.target.composing=!0}function Za(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Bn={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=Ke(r);const s=i||r.props&&r.props.type==="number";Ce(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;n&&(o=o.trim()),s&&(o=je(o)),e._assign(o)}),n&&Ce(e,"change",()=>{e.value=e.value.trim()}),t||(Ce(e,"compositionstart",Cd),Ce(e,"compositionend",Za),Ce(e,"change",Za))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e._assign=Ke(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||i&&e.value.trim()===t||(r||e.type==="number")&&je(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},oa={deep:!0,created(e,t,n){e._assign=Ke(n),Ce(e,"change",()=>{const i=e._modelValue,r=jn(e),s=e.checked,a=e._assign;if(J(i)){const o=Cr(i,r),l=o!==-1;if(s&&!l)a(i.concat(r));else if(!s&&l){const h=[...i];h.splice(o,1),a(h)}}else if(cn(i)){const o=new Set(i);s?o.add(r):o.delete(r),a(o)}else a(ph(e,s))})},mounted:to,beforeUpdate(e,t,n){e._assign=Ke(n),to(e,t,n)}};function to(e,{value:t,oldValue:n},i){e._modelValue=t,J(t)?e.checked=Cr(t,i.props.value)>-1:cn(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=Be(t,ph(e,!0)))}const la={created(e,{value:t},n){e.checked=Be(t,n.props.value),e._assign=Ke(n),Ce(e,"change",()=>{e._assign(jn(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e._assign=Ke(i),t!==n&&(e.checked=Be(t,i.props.value))}},ha={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=cn(t);Ce(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?je(jn(a)):jn(a));e._assign(e.multiple?r?new Set(s):s:s[0])}),e._assign=Ke(i)},mounted(e,{value:t}){eo(e,t)},beforeUpdate(e,t,n){e._assign=Ke(n)},updated(e,{value:t}){eo(e,t)}};function eo(e,t){const n=e.multiple;if(!(n&&!J(t)&&!cn(t))){for(let i=0,r=e.options.length;i<r;i++){const s=e.options[i],a=jn(s);if(n)J(t)?s.selected=Cr(t,a)>-1:s.selected=t.has(a);else if(Be(jn(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function jn(e){return"_value"in e?e._value:e.value}function ph(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vh={created(e,t,n){Ki(e,t,n,null,"created")},mounted(e,t,n){Ki(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Ki(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Ki(e,t,n,i,"updated")}};function mh(e,t){switch(e){case"SELECT":return ha;case"TEXTAREA":return Bn;default:switch(t){case"checkbox":return oa;case"radio":return la;default:return Bn}}}function Ki(e,t,n,i,r){const a=mh(e.tagName,n.props&&n.props.type)[r];a&&a(e,t,n,i)}function Sd(){Bn.getSSRProps=({value:e})=>({value:e}),la.getSSRProps=({value:e},t)=>{if(t.props&&Be(t.props.value,e))return{checked:!0}},oa.getSSRProps=({value:e},t)=>{if(J(e)){if(t.props&&Cr(e,t.props.value)>-1)return{checked:!0}}else if(cn(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vh.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=mh(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const wd=["ctrl","shift","alt","meta"],xd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wd.some(n=>e[`${n}Key`]&&!t.includes(n))},Pd=(e,t)=>(n,...i)=>{for(let r=0;r<t.length;r++){const s=xd[t[r]];if(s&&s(n,t))return}return e(n,...i)},Ed={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Td=(e,t)=>n=>{if(!("key"in n))return;const i=ge(n.key);if(t.some(r=>r===i||Ed[r]===i))return e(n)},_h={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Yn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Yn(e,!0),i.enter(e)):i.leave(e,()=>{Yn(e,!1)}):Yn(e,t))},beforeUnmount(e,{value:t}){Yn(e,t)}};function Yn(e,t){e.style.display=t?e._vod:"none"}function Ad(){_h.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const bh=Et({patchProp:ad},$f);let fi,no=!1;function yh(){return fi||(fi=jl(bh))}function Ch(){return fi=no?fi:Ul(bh),no=!0,fi}const Ss=(...e)=>{yh().render(...e)},Sh=(...e)=>{Ch().hydrate(...e)},wh=(...e)=>{const t=yh().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=xh(i);if(!r)return;const s=t._component;!nt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t},kd=(...e)=>{const t=Ch().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=xh(i);if(r)return n(r,!0,r instanceof SVGElement)},t};function xh(e){return yt(e)?document.querySelector(e):e}let io=!1;const Md=()=>{io||(io=!0,Sd(),Ad())},Od=()=>{},Rd=Object.freeze(Object.defineProperty({__proto__:null,compile:Od,EffectScope:Hs,ReactiveEffect:ki,customRef:uu,effect:Lc,effectScope:Mc,getCurrentScope:Ko,isProxy:Vs,isReactive:rn,isReadonly:on,isRef:Rt,isShallow:mi,markRaw:Ws,onScopeDispose:zo,proxyRefs:$s,reactive:Ie,readonly:Us,ref:Mt,shallowReactive:sl,shallowReadonly:su,shallowRef:au,stop:Ic,toRaw:ht,toRef:ol,toRefs:fu,triggerRef:lu,unref:Pt,camelize:Qt,capitalize:Ai,normalizeClass:Pi,normalizeProps:Cc,normalizeStyle:Ne,toDisplayString:En,toHandlerKey:oi,BaseTransition:Zs,Comment:Bt,Fragment:Dt,KeepAlive:Wu,Static:an,Suspense:Lu,Teleport:mf,Text:Gn,callWithAsyncErrorHandling:Xt,callWithErrorHandling:pe,cloneVNode:ve,compatUtils:Kf,computed:nh,createBlock:Nr,createCommentVNode:Yl,createElementBlock:De,createElementVNode:At,createHydrationRenderer:Ul,createPropsRestProxy:Ff,createRenderer:jl,createSlots:Xu,createStaticVNode:yf,createTextVNode:Rn,createVNode:ct,defineAsyncComponent:Uu,defineComponent:ze,defineEmits:Of,defineExpose:Rf,defineProps:Mf,get devtools(){return xn},getCurrentInstance:xe,getTransitionRawChildren:Rr,guardReactiveProps:$l,h:rh,handleError:dn,initCustomFormatter:Bf,inject:hi,isMemoSame:ah,isRuntimeOnly:Pf,isVNode:Ve,mergeDefaults:Nf,mergeProps:Xl,nextTick:Ar,onActivated:Sl,onBeforeMount:Pl,onBeforeUnmount:Ri,onBeforeUpdate:El,onDeactivated:wl,onErrorCaptured:Ml,onMounted:gn,onRenderTracked:kl,onRenderTriggered:Al,onServerPrefetch:Tl,onUnmounted:Dr,onUpdated:Ir,openBlock:ee,popScopeId:Eu,provide:_l,pushScopeId:Pu,queuePostFlushCb:Xs,registerRuntimeCompiler:xf,renderList:Rl,renderSlot:qu,resolveComponent:ar,resolveDirective:Yu,resolveDynamicComponent:$u,resolveFilter:Wf,resolveTransitionHooks:Fn,setBlockTracking:ms,setDevtoolsHook:gl,setTransitionHooks:ln,ssrContextKey:sh,ssrUtils:Vf,toHandlers:Qu,transformVNodeArgs:_f,useAttrs:Df,useSSRContext:Hf,useSlots:If,useTransitionState:Js,version:oh,warn:hl,watch:Ge,watchEffect:Gu,watchPostEffect:bl,watchSyncEffect:Hu,withAsyncContext:Gf,withCtx:Si,withDefaults:Lf,withDirectives:sr,withMemo:jf,withScopeId:Tu,Transition:aa,TransitionGroup:vd,VueElement:Hr,createApp:wh,createSSRApp:kd,defineCustomElement:lh,defineSSRCustomElement:ld,hydrate:Sh,initDirectivesForSSR:Md,render:Ss,useCssModule:cd,useCssVars:ud,vModelCheckbox:oa,vModelDynamic:vh,vModelRadio:la,vModelSelect:ha,vModelText:Bn,vShow:_h,withKeys:Td,withModifiers:Pd},Symbol.toStringTag,{value:"Module"}));var ro;const Li=typeof window<"u";Li&&((ro=window==null?void 0:window.navigator)==null?void 0:ro.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ld(e){return typeof e=="function"?e():Pt(e)}function Id(e){return e}function Dd(e){return Ko()?(zo(e),!0):!1}function Nd(e,t=!0){xe()?gn(e):t?e():Ar(e)}function Ph(e){var t;const n=Ld(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Fd=Li?window:void 0;Li&&window.document;Li&&window.navigator;Li&&window.location;function Gd(e,t=!1){const n=Mt(),i=()=>n.value=Boolean(e());return i(),Nd(i,t),n}const ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xs="__vueuse_ssr_handlers__";ws[xs]=ws[xs]||{};ws[xs];var so=Object.getOwnPropertySymbols,Hd=Object.prototype.hasOwnProperty,Bd=Object.prototype.propertyIsEnumerable,jd=(e,t)=>{var n={};for(var i in e)Hd.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&so)for(var i of so(e))t.indexOf(i)<0&&Bd.call(e,i)&&(n[i]=e[i]);return n};function Ud(e,t,n={}){const i=n,{window:r=Fd}=i,s=jd(i,["window"]);let a;const o=Gd(()=>r&&"ResizeObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},h=Ge(()=>Ph(e),u=>{l(),o.value&&r&&u&&(a=new ResizeObserver(t),a.observe(u,s))},{immediate:!0,flush:"post"}),c=()=>{l(),h()};return Dd(c),{isSupported:o,stop:c}}function Vd(e,t={width:0,height:0},n={}){const{box:i="content-box"}=n,r=Mt(t.width),s=Mt(t.height);return Ud(e,([a])=>{const o=i==="border-box"?a.borderBoxSize:i==="content-box"?a.contentBoxSize:a.devicePixelContentBoxSize;o?(r.value=o.reduce((l,{inlineSize:h})=>l+h,0),s.value=o.reduce((l,{blockSize:h})=>l+h,0)):(r.value=a.contentRect.width,s.value=a.contentRect.height)},n),Ge(()=>Ph(e),a=>{r.value=a?t.width:0,s.value=a?t.height:0}),{width:r,height:s}}var ao;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(ao||(ao={}));var Wd=Object.defineProperty,oo=Object.getOwnPropertySymbols,Kd=Object.prototype.hasOwnProperty,zd=Object.prototype.propertyIsEnumerable,lo=(e,t,n)=>t in e?Wd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$d=(e,t)=>{for(var n in t||(t={}))Kd.call(t,n)&&lo(e,n,t[n]);if(oo)for(var n of oo(t))zd.call(t,n)&&lo(e,n,t[n]);return e};const Yd={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};$d({linear:Id},Yd);function Xd(e){return e=e||new Map,{all:e,on(t,n){const i=e.get(t);i?i.push(n):e.set(t,[n])},off(t,n){const i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit(t,n){let i=e.get(t);i&&i.slice().map(r=>{r(n)}),i=e.get("*"),i&&i.slice().map(r=>{r(t,n)})}}}const Ln=Xd();var qd=Math.PI/180;function Qd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const In=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},q={_global:In,version:"8.3.13",isBrowser:Qd(),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle(e){return q.angleDeg?e*qd:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return q.DD.isDragging},isDragReady(){return!!q.DD.node},document:In.document,_injectGlobal(e){In.Konva=e}},St=e=>{q[e.prototype.getClassName()]=e};q._injectGlobal(q);class Yt{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Yt(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){var n=Math.cos(t),i=Math.sin(t),r=this.m[0]*n+this.m[2]*i,s=this.m[1]*n+this.m[3]*i,a=this.m[0]*-i+this.m[2]*n,o=this.m[1]*-i+this.m[3]*n;return this.m[0]=r,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){var i=this.m[0]+this.m[2]*n,r=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*t,a=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}multiply(t){var n=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],a=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,i=-this.m[1]*t,r=-this.m[2]*t,s=this.m[0]*t,a=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){var t=this.m[0],n=this.m[1],i=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],o=t*r-n*i;let l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||n!=0){var h=Math.sqrt(t*t+n*n);l.rotation=n>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=o/h,l.skewX=(t*i+n*r)/o,l.skewY=0}else if(i!=0||r!=0){var c=Math.sqrt(i*i+r*r);l.rotation=Math.PI/2-(r>0?Math.acos(-i/c):-Math.acos(i/c)),l.scaleX=o/c,l.scaleY=c,l.skewX=0,l.skewY=(t*i+n*r)/o}return l.rotation=P._getRotation(l.rotation),l}}var Jd="[object Array]",Zd="[object Number]",tg="[object String]",eg="[object Boolean]",ng=Math.PI/180,ig=180/Math.PI,qr="#",rg="",sg="0",ag="Konva warning: ",ho="Konva error: ",og="rgb(",Qr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},lg=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,zi=[];const hg=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,60)},P={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===Jd},_isNumber(e){return Object.prototype.toString.call(e)===Zd&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===tg},_isBoolean(e){return Object.prototype.toString.call(e)===eg},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;var t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){zi.push(e),zi.length===1&&hg(function(){const t=zi;zi=[],t.forEach(function(n){n()})})},createCanvasElement(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){var n=P.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb(e){e=e.replace(qr,rg);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){for(var e=(Math.random()*16777215<<0).toString(16);e.length<6;)e=sg+e;return qr+e},getRGB(e){var t;return e in Qr?(t=Qr[e],{r:t[0],g:t[1],b:t[2]}):e[0]===qr?this._hexToRgb(e.substring(1)):e.substr(0,4)===og?(t=lg.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",P._namedColorToRBA(e)||P._hex3ColorToRGBA(e)||P._hex6ColorToRGBA(e)||P._rgbColorToRGBA(e)||P._rgbaColorToRGBA(e)||P._hslColorToRGBA(e)},_namedColorToRBA(e){var t=Qr[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];var t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];var t=e.split(/ *, */).map((n,i)=>n.slice(-1)==="%"?i===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(n[0])/360,r=Number(n[1])/100,s=Number(n[2])/100;let a,o,l;if(r===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+r):a=s+r-s*r;const h=2*s-a,c=[0,0,0];for(let u=0;u<3;u++)o=i+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=h+(a-h)*6*o:2*o<1?l=a:3*o<2?l=h+(a-h)*(2/3-o)*6:l=h,c[u]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){var t={};for(var n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*ng},radToDeg(e){return e*ig},_degToRad(e){return P.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),P.degToRad(e)},_radToDeg(e){return P.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),P.radToDeg(e)},_getRotation(e){return q.angleDeg?P.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(ho+e)},error(e){console.error(ho+e)},warn(e){!q.showWarnings||console.warn(ag+e)},each(e,t){for(var n in e)t(n,e[n])},_inRange(e,t,n){return t<=e&&e<n},_getProjectionToSegment(e,t,n,i,r,s){var a,o,l,h=(e-n)*(e-n)+(t-i)*(t-i);if(h==0)a=e,o=t,l=(r-n)*(r-n)+(s-i)*(s-i);else{var c=((r-e)*(n-e)+(s-t)*(i-t))/h;c<0?(a=e,o=t,l=(e-r)*(e-r)+(t-s)*(t-s)):c>1?(a=n,o=i,l=(n-r)*(n-r)+(i-s)*(i-s)):(a=e+c*(n-e),o=t+c*(i-t),l=(a-r)*(a-r)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(e,t,n){var i=P.cloneObject(e),r=Number.MAX_VALUE;return t.forEach(function(s,a){if(!(!n&&a===t.length-1)){var o=t[(a+1)%t.length],l=P._getProjectionToSegment(s.x,s.y,o.x,o.y,e.x,e.y),h=l[0],c=l[1],u=l[2];u<r&&(i.x=h,i.y=c,r=u)}}),i},_prepareArrayForTween(e,t,n){var i,r=[],s=[];if(e.length>t.length){var a=t;t=e,e=a}for(i=0;i<e.length;i+=2)r.push({x:e[i],y:e[i+1]});for(i=0;i<t.length;i+=2)s.push({x:t[i],y:t[i+1]});var o=[];return s.forEach(function(l){var h=P._getProjectionToLine(l,r,n);o.push(h.x),o.push(h.y)}),o},_prepareToStringify(e){var t;e.visitedByCircularReferenceRemoval=!0;for(var n in e)if(!!(e.hasOwnProperty(n)&&e[n]&&typeof e[n]=="object")){if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||P._isElement(e[n]))if(t.configurable)delete e[n];else return null;else if(P._prepareToStringify(e[n])===null)if(t.configurable)delete e[n];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(var n in t)e[n]=t[n];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999}};function $e(e){return P._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||P._isBoolean(e)?e:Object.prototype.toString.call(e)}function Eh(e){return e>255?255:e<0?0:Math.round(e)}function U(){if(q.isUnminified)return function(e,t){return P._isNumber(e)||P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Th(e){if(q.isUnminified)return function(t,n){let i=P._isNumber(t),r=P._isArray(t)&&t.length==e;return!i&&!r&&P.warn($e(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function ca(){if(q.isUnminified)return function(e,t){var n=P._isNumber(e),i=e==="auto";return n||i||P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function Vn(){if(q.isUnminified)return function(e,t){return P._isString(e)||P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Ah(){if(q.isUnminified)return function(e,t){const n=P._isString(e),i=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||i||P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function cg(){if(q.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(P._isArray(e)?e.forEach(function(i){P._isNumber(i)||P.warn('"'+t+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function oe(){if(q.isUnminified)return function(e,t){var n=e===!0||e===!1;return n||P.warn($e(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function ug(e){if(q.isUnminified)return function(t,n){return t==null||P.isObject(t)||P.warn($e(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}var Xn="get",qn="set";const v={addGetterSetter(e,t,n,i,r){v.addGetter(e,t,n),v.addSetter(e,t,i,r),v.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){var i=Xn+P._capitalize(t);e.prototype[i]=e.prototype[i]||function(){var r=this.attrs[t];return r===void 0?n:r}},addSetter(e,t,n,i){var r=qn+P._capitalize(t);e.prototype[r]||v.overWriteSetter(e,t,n,i)},overWriteSetter(e,t,n,i){var r=qn+P._capitalize(t);e.prototype[r]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,t)),this._setAttr(t,s),i&&i.call(this),this}},addComponentsGetterSetter(e,t,n,i,r){var s=n.length,a=P._capitalize,o=Xn+a(t),l=qn+a(t),h,c;e.prototype[o]=function(){var f={};for(h=0;h<s;h++)c=n[h],f[c]=this.getAttr(t+a(c));return f};var u=ug(n);e.prototype[l]=function(f){var g=this.attrs[t],d;i&&(f=i.call(this,f)),u&&u.call(this,f,t);for(d in f)!f.hasOwnProperty(d)||this._setAttr(t+a(d),f[d]);return f||n.forEach(m=>{this._setAttr(t+a(m),void 0)}),this._fireChangeEvent(t,g,f),r&&r.call(this),this},v.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){var n=P._capitalize(t),i=qn+n,r=Xn+n;e.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(e,t,n,i){P.error("Adding deprecated "+t);var r=Xn+P._capitalize(t),s=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[r]=function(){P.error(s);var a=this.attrs[t];return a===void 0?n:a},v.addSetter(e,t,i,function(){P.error(s)}),v.addOverloadedGetterSetter(e,t)},backCompat(e,t){P.each(t,function(n,i){var r=e.prototype[i],s=Xn+P._capitalize(n),a=qn+P._capitalize(n);function o(){r.apply(this,arguments),P.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}e.prototype[n]=o,e.prototype[s]=o,e.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function fg(e){var t=[],n=e.length,i=P,r,s;for(r=0;r<n;r++)s=e[r],i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),t.push(s);return t}var co=",",dg="(",gg=")",pg="([",vg="])",mg=";",_g="()",bg="=",uo=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],yg=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Cg=100;class Br{constructor(t){this.canvas=t,q.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){var i=this.traceArr,r=i.length,s="",a,o,l,h;for(a=0;a<r;a++)o=i[a],l=o.method,l?(h=o.args,s+=l,t?s+=_g:P._isArray(h[0])?s+=pg+h.join(co)+vg:(n&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),s+=dg+h.join(co)+gg)):(s+=o.property,t||(s+=bg+o.val)),s+=mg;return s}clearTrace(){this.traceArr=[]}_trace(t){var n=this.traceArr,i;n.push(t),i=n.length,i>=Cg&&n.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){var n=t.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(t){var n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){var n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(t,n){this._context[t]=n}arc(t,n,i,r,s,a){this._context.arc(t,n,i,r,s,a)}arcTo(t,n,i,r,s){this._context.arcTo(t,n,i,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,i,r,s,a){this._context.bezierCurveTo(t,n,i,r,s,a)}clearRect(t,n,i,r){this._context.clearRect(t,n,i,r)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,n){var i=arguments;if(i.length===2)return this._context.createImageData(t,n);if(i.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,i,r){return this._context.createLinearGradient(t,n,i,r)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,i,r,s,a){return this._context.createRadialGradient(t,n,i,r,s,a)}drawImage(t,n,i,r,s,a,o,l,h){var c=arguments,u=this._context;c.length===3?u.drawImage(t,n,i):c.length===5?u.drawImage(t,n,i,r,s):c.length===9&&u.drawImage(t,n,i,r,s,a,o,l,h)}ellipse(t,n,i,r,s,a,o,l){this._context.ellipse(t,n,i,r,s,a,o,l)}isPointInPath(t,n){return this._context.isPointInPath(t,n)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,n,i,r){this._context.fillRect(t,n,i,r)}strokeRect(t,n,i,r){this._context.strokeRect(t,n,i,r)}fillText(t,n,i,r){r?this._context.fillText(t,n,i,r):this._context.fillText(t,n,i)}measureText(t){return this._context.measureText(t)}getImageData(t,n,i,r){return this._context.getImageData(t,n,i,r)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,i,r){this._context.rect(t,n,i,r)}putImageData(t,n,i){this._context.putImageData(t,n,i)}quadraticCurveTo(t,n,i,r){this._context.quadraticCurveTo(t,n,i,r)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,i,r,s,a){this._context.setTransform(t,n,i,r,s,a)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,i,r){this._context.strokeText(t,n,i,r)}transform(t,n,i,r,s,a){this._context.transform(t,n,i,r,s,a)}translate(t,n){this._context.translate(t,n)}_enableTrace(){var t=this,n=uo.length,i=this.setAttr,r,s,a=function(o){var l=t[o],h;t[o]=function(){return s=fg(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:o,args:s}),h}};for(r=0;r<n;r++)a(uo[r]);t.setAttr=function(){i.apply(t,arguments);var o=arguments[0],l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:o,val:l})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;var i=!n||n==="source-over";i||this.setAttr("globalCompositeOperation",n)}}yg.forEach(function(e){Object.defineProperty(Br.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Sg extends Br{constructor(t){super(t),this._context=t._canvas.getContext("2d")}_fillColor(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){var n=t.fill(),i=t.getFillPriority();if(n&&i==="color"){this._fillColor(t);return}var r=t.getFillPatternImage();if(r&&i==="pattern"){this._fillPattern(t);return}var s=t.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(t);return}var a=t.getFillRadialGradientColorStops();if(a&&i==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):r?this._fillPattern(t):s?this._fillLinearGradient(t):a&&this._fillRadialGradient(t)}_strokeLinearGradient(t){var n=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),r=t.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,i.x,i.y);if(r){for(var a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",s)}}_stroke(t){var n=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var n,i,r,s=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",a=(i=t.getShadowBlur())!==null&&i!==void 0?i:5,o=(r=t.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,u=l.y*h;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*u)}}class wg extends Br{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t);var r=t.hitStrokeWidth(),s=r==="auto"?t.strokeWidth():r;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}var $i;function xg(){if($i)return $i;var e=P.createCanvasElement(),t=e.getContext("2d");return $i=function(){var n=q._global.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}(),$i}class jr{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=t||{},i=n.pixelRatio||q.pixelRatio||xg();this.pixelRatio=i,this._canvas=P.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var n=this.pixelRatio,i=this.getContext()._context;i.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(r){return P.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}v.addGetterSetter(jr,"pixelRatio",void 0,U());class Dn extends jr{constructor(t={width:0,height:0}){super(t),this.context=new Sg(this),this.setSize(t.width,t.height)}}class ua extends jr{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new wg(this),this.setSize(t.width,t.height)}}const ut={get isDragging(){var e=!1;return ut._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){var e;return ut._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];ut._dragElements.forEach((n,i)=>{const{node:r}=n,s=r.getStage();s.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=P._getFirstPointerId(e));const a=s._changedPointerPositions.find(h=>h.id===n.pointerId);if(!!a){if(n.dragStatus!=="dragging"){var o=r.dragDistance(),l=Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y));if(l<o||(r.startDrag({evt:e}),!r.isDragging()))return}r._setDragPosition(e,n),t.push(r)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const t=[];ut._dragElements.forEach(n=>{const{node:i}=n,r=i.getStage();if(e&&r.setPointersPositions(e),!r._changedPointerPositions.find(o=>o.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(ut.justDragged=!0,q._mouseListenClick=!1,q._touchListenClick=!1,q._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof q.Stage&&n.node;a&&t.indexOf(a)===-1&&t.push(a)}),t.forEach(n=>{n.draw()})},_endDragAfter(e){ut._dragElements.forEach((t,n)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&ut._dragElements.delete(n)})}};q.isBrowser&&(window.addEventListener("mouseup",ut._endDragBefore,!0),window.addEventListener("touchend",ut._endDragBefore,!0),window.addEventListener("mousemove",ut._drag),window.addEventListener("touchmove",ut._drag),window.addEventListener("mouseup",ut._endDragAfter,!1),window.addEventListener("touchend",ut._endDragAfter,!1));var lr="absoluteOpacity",Yi="allEventListeners",be="absoluteTransform",fo="absoluteScale",Qn="canvas",Pg="Change",Eg="children",Tg="konva",Ps="listening",go="mouseenter",po="mouseleave",vo="set",mo="Shape",hr=" ",_o="stage",Re="transform",Ag="Stage",Es="visible",kg=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(hr);let Mg=1;class V{constructor(t){this._id=Mg++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Re||t===be)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){var i=this._cache.get(t),r=t===Re||t===be,s=i===void 0||r&&i.dirty===!0;return s&&(i=n.call(this),this._cache.set(t,i)),i}_calculate(t,n,i){if(!this._attachedDepsListeners.get(t)){const r=n.map(s=>s+"Change.konva").join(hr);this.on(r,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(Qn)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===be&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(Qn),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var n=t||{},i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var r=Math.ceil(n.width||i.width),s=Math.ceil(n.height||i.height),a=n.pixelRatio,o=n.x===void 0?Math.floor(i.x):n.x,l=n.y===void 0?Math.floor(i.y):n.y,h=n.offset||0,c=n.drawBorder||!1,u=n.hitCanvasPixelRatio||1;if(!r||!s){P.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}r+=h*2+1,s+=h*2+1,o-=h,l-=h;var f=new Dn({pixelRatio:a,width:r,height:s}),g=new Dn({pixelRatio:a,width:0,height:0}),d=new ua({pixelRatio:u,width:r,height:s}),m=f.getContext(),y=d.getContext();return d.isCache=!0,f.isCache=!0,this._cache.delete(Qn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(f.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),m.save(),y.save(),m.translate(-o,-l),y.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(lr),this._clearSelfAndDescendantCache(fo),this.drawScene(f,this),this.drawHit(d,this),this._isUnderCache=!1,m.restore(),y.restore(),c&&(m.save(),m.beginPath(),m.rect(0,0,r,s),m.closePath(),m.setAttr("strokeStyle","red"),m.setAttr("lineWidth",5),m.stroke(),m.restore()),this._cache.set(Qn,{scene:f,filter:g,hit:d,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Qn)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){var i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],r,s,a,o,l=this.getAbsoluteTransform(n);return i.forEach(function(h){var c=l.point(h);r===void 0&&(r=a=c.x,s=o=c.y),r=Math.min(r,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),{x:r,y:s,width:a-r,height:o-s}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);var i=this._getCachedSceneCanvas(),r=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/r,i.height/r),t.restore()}_drawCachedHitCanvas(t){var n=this._getCanvasCache(),i=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t=this.filters(),n=this._getCanvasCache(),i=n.scene,r=n.filter,s=r.getContext(),a,o,l,h;if(t){if(!this._filterUpToDate){var c=i.pixelRatio;r.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(a=t.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/c,i.getHeight()/c),o=s.getImageData(0,0,r.getWidth(),r.getHeight()),l=0;l<a;l++){if(h=t[l],typeof h!="function"){P.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,o),s.putImageData(o,0,0)}}catch(u){P.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return r}return i}on(t,n){if(this._cache&&this._cache.delete(Yi),arguments.length===3)return this._delegate.apply(this,arguments);var i=t.split(hr),r=i.length,s,a,o,l,h;for(s=0;s<r;s++)a=i[s],o=a.split("."),l=o[0],h=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:n});return this}off(t,n){var i=(t||"").split(hr),r=i.length,s,a,o,l,h,c;if(this._cache&&this._cache.delete(Yi),!t)for(a in this.eventListeners)this._off(a);for(s=0;s<r;s++)if(o=i[s],l=o.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,n);else for(a in this.eventListeners)this._off(a,c,n);return this}dispatchEvent(t){var n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(i){n.call(this,i.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,i){var r=this;this.on(t,function(s){for(var a=s.target.findAncestors(n,!0,r),o=0;o<a.length;o++)s=P.cloneObject(s),s.currentTarget=a[o],i.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),ut._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(be),this._clearSelfAndDescendantCache(lr),this._clearSelfAndDescendantCache(fo),this._clearSelfAndDescendantCache(_o),this._clearSelfAndDescendantCache(Es),this._clearSelfAndDescendantCache(Ps)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var n="get"+P._capitalize(t);return P._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),n=[];t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var n,i;if(!t)return this;for(n in t)n!==Eg&&(i=vo+P._capitalize(n),P._isFunction(this[i])?this[i](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(Ps,this._isListening)}_isListening(t){if(!this.listening())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isListening(t):!0}isVisible(){return this._getCache(Es,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const i=this.getParent();return i&&i!==t&&this!==t?i._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);var i=this.getLayer(),r=!1;ut._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===i)&&(r=!0)});var s=!n&&!q.hitOnDragEnabled&&r;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t=this.getDepth(),n=this,i=0,r,s,a,o;function l(h){for(r=[],s=h.length,a=0;a<s;a++)o=h[a],i++,o.nodeType!==mo&&(r=r.concat(o.getChildren().slice())),o._id===n._id&&(a=s);r.length>0&&r[0].getDepth()<=t&&l(r)}return n.nodeType!==Ag&&l(n.getStage().getChildren()),i}getDepth(){for(var t=0,n=this.parent;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Re),this._clearSelfAndDescendantCache(be)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(t){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!t&&(t=!0);var r=this.getAbsoluteTransform(t).getMatrix(),s=new Yt,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(t){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(Re);var i=this._getAbsoluteTransform().copy();return i.invert(),i.translate(t.x,t.y),t={x:this.attrs.x+i.getTranslation().x,y:this.attrs.y+i.getTranslation().y},this._setTransform(n),this.setPosition({x:t.x,y:t.y}),this._clearCache(Re),this._clearSelfAndDescendantCache(be),this}_setTransform(t){var n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var n=t.x,i=t.y,r=this.x(),s=this.y();return n!==void 0&&(r+=n),i!==void 0&&(s+=i),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(t,n){var i=[],r=this.getParent(),s,a;if(!(n&&n._id===this._id)){for(i.unshift(this);r&&(!n||r._id!==n._id);)i.unshift(r),r=r.parent;for(s=i.length,a=0;a<s;a++)t(i[a])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return P.warn("Node has no parent. moveToTop function is ignored."),!1;var t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return P.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return P.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return P.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return P.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&P.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(lr,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t={},n=this.getAttrs(),i,r,s,a,o;t.attrs={};for(i in n)r=n[i],o=P.isObject(r)&&!P._isPlainObject(r)&&!P._isArray(r),!o&&(s=typeof this[i]=="function"&&this[i],delete n[i],a=s?s.call(this):null,n[i]=r,a!==r&&(t.attrs[i]=r));return t.className=this.getClassName(),P._prepareToStringify(t)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,i){var r=[];n&&this._isMatch(t)&&r.push(this);for(var s=this.parent;s;){if(s===i)return r;s._isMatch(t)&&r.push(s),s=s.parent}return r}isAncestorOf(t){return!1}findAncestor(t,n,i){return this.findAncestors(t,n,i)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);var n=t.replace(/ /g,"").split(","),i=n.length,r,s;for(r=0;r<i;r++)if(s=n[r],P.isValidSelector(s)||(P.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),P.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),P.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(_o,this._getStage)}_getStage(){var t=this.getParent();if(t)return t.getStage()}fire(t,n={},i){return n.target=n.target||this,i?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(be,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var n;if(t)return n=new Yt,this._eachAncestorReverse(function(r){var s=r.transformsEnabled();s==="all"?n.multiply(r.getTransform()):s==="position"&&n.translate(r.x()-r.offsetX(),r.y()-r.offsetY())},t),n;n=this._cache.get(be)||new Yt,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;n.translate(r-a,s-o)}return n.dirty=!1,n}getAbsoluteScale(t){for(var n=this;n;)n._isUnderCache&&(t=n),n=n.getParent();const r=this.getAbsoluteTransform(t).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Re,this._getTransform)}_getTransform(){var t,n,i=this._cache.get(Re)||new Yt;i.reset();var r=this.x(),s=this.y(),a=q.getAngle(this.rotation()),o=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(r!==0||s!==0)&&i.translate(r,s),a!==0&&i.rotate(a),(h!==0||c!==0)&&i.skew(h,c),(o!==1||l!==1)&&i.scale(o,l),(u!==0||f!==0)&&i.translate(-1*u,-1*f),i.dirty=!1,i}clone(t){var n=P.cloneObject(this.attrs),i,r,s,a,o;for(i in t)n[i]=t[i];var l=new this.constructor(n);for(i in this.eventListeners)for(r=this.eventListeners[i],s=r.length,a=0;a<s;a++)o=r[a],o.name.indexOf(Tg)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(o));return l}_toKonvaCanvas(t){t=t||{};var n=this.getClientRect(),i=this.getStage(),r=t.x!==void 0?t.x:Math.floor(n.x),s=t.y!==void 0?t.y:Math.floor(n.y),a=t.pixelRatio||1,o=new Dn({width:t.width||Math.ceil(n.width)||(i?i.width():0),height:t.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:a}),l=o.getContext();return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(r||s)&&l.translate(-1*r,-1*s),this.drawScene(o),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};var n=t.mimeType||null,i=t.quality||null,r=this._toKonvaCanvas(t).toDataURL(n,i);return t.callback&&t.callback(r),r}toImage(t){return new Promise((n,i)=>{try{const r=t==null?void 0:t.callback;r&&delete t.callback,P._urlToImage(this.toDataURL(t),function(s){n(s),r==null||r(s)})}catch(r){i(r)}})}toBlob(t){return new Promise((n,i)=>{try{const r=t==null?void 0:t.callback;r&&delete t.callback,this.toCanvas(t).toBlob(s=>{n(s),r==null||r(s)})}catch(r){i(r)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():q.dragDistance}_off(t,n,i){var r=this.eventListeners[t],s,a,o;for(s=0;s<r.length;s++)if(a=r[s].name,o=r[s].handler,(a!=="konva"||n==="konva")&&(!n||a===n)&&(!i||i===o)){if(r.splice(s,1),r.length===0){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,n,i){this._fire(t+Pg,{oldVal:n,newVal:i})}addName(t){if(!this.hasName(t)){var n=this.name(),i=n?n+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const n=this.name();if(!n)return!1;var i=(n||"").split(/\s/g);return i.indexOf(t)!==-1}removeName(t){var n=(this.name()||"").split(/\s/g),i=n.indexOf(t);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(t,n){var i=this[vo+P._capitalize(t)];return P._isFunction(i)?i.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(q.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,n){var i=this.attrs[t];i===n&&!P.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,n),this._requestDraw())}_setComponentAttr(t,n,i){var r;i!==void 0&&(r=this.attrs[t],r||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=i,this._fireChangeEvent(t,r,i))}_fireAndBubble(t,n,i){n&&this.nodeType===mo&&(n.target=this);var r=(t===go||t===po)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i);if(!r){this._fire(t,n);var s=(t===go||t===po)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,n,i):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){let n=this._cache.get(Yi);if(!n){n={};let r=Object.getPrototypeOf(this);for(;r;){if(!r.eventListeners){r=Object.getPrototypeOf(r);continue}for(var i in r.eventListeners){const s=r.eventListeners[i],a=n[i]||[];n[i]=s.concat(a)}r=Object.getPrototypeOf(r)}this._cache.set(Yi,n)}return n[t]}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const i=this._getProtoListeners(t);if(i)for(var r=0;r<i.length;r++)i[r].handler.call(this,n);const s=this.eventListeners[t];if(s)for(var r=0;r<s.length;r++)s[r].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var n=t?t.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition(),s=i._getPointerById(n)||i._changedPointerPositions[0]||r;ut._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){ut._dragElements.has(this._id)||this._createDragElement(t);const i=ut._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const i=this.getStage()._getPointerById(n.pointerId);if(!!i){var r={x:i.x-n.offset.x,y:i.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,r,t);a?r=a:P.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}}stopDrag(t){const n=ut._dragElements.get(this._id);n&&(n.dragStatus="stopped"),ut._endDragBefore(t),ut._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=ut._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){var n=t.evt.button!==void 0,i=!n||q.dragButtons.indexOf(t.evt.button)>=0;if(!!i&&!this.isDragging()){var r=!1;ut._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage();if(!t)return;const n=ut._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",r=n&&n.dragStatus==="ready";i?this.stopDrag():r&&ut._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return P.haveIntersection(i,this.getClientRect())}static create(t,n){return P._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){var i=V.prototype.getClassName.call(t),r=t.children,s,a,o;n&&(t.attrs.container=n),q[i]||(P.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=q[i];if(s=new l(t.attrs),r)for(a=r.length,o=0;o<a;o++)s.add(V._createNode(r[o]));return s}}V.prototype.nodeType="Node";V.prototype._attrsAffectingSize=[];V.prototype.eventListeners={};V.prototype.on.call(V.prototype,kg,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Re),this._clearSelfAndDescendantCache(be)});V.prototype.on.call(V.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Es)});V.prototype.on.call(V.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Ps)});V.prototype.on.call(V.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(lr)});const _t=v.addGetterSetter;_t(V,"zIndex");_t(V,"absolutePosition");_t(V,"position");_t(V,"x",0,U());_t(V,"y",0,U());_t(V,"globalCompositeOperation","source-over",Vn());_t(V,"opacity",1,U());_t(V,"name","",Vn());_t(V,"id","",Vn());_t(V,"rotation",0,U());v.addComponentsGetterSetter(V,"scale",["x","y"]);_t(V,"scaleX",1,U());_t(V,"scaleY",1,U());v.addComponentsGetterSetter(V,"skew",["x","y"]);_t(V,"skewX",0,U());_t(V,"skewY",0,U());v.addComponentsGetterSetter(V,"offset",["x","y"]);_t(V,"offsetX",0,U());_t(V,"offsetY",0,U());_t(V,"dragDistance",null,U());_t(V,"width",0,U());_t(V,"height",0,U());_t(V,"listening",!0,oe());_t(V,"preventDefault",!0,oe());_t(V,"filters",null,function(e){return this._filterUpToDate=!1,e});_t(V,"visible",!0,oe());_t(V,"transformsEnabled","all",Vn());_t(V,"size");_t(V,"dragBoundFunc");_t(V,"draggable",!1,oe());v.backCompat(V,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class qt extends V{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const n=this.children||[];var i=[];return n.forEach(function(r){t(r)&&i.push(r)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){var i=[];return this._descendants(r=>{const s=r._isMatch(t);return s&&i.push(r),!!(s&&n)}),i}_descendants(t){let n=!1;const i=this.getChildren();for(const r of i){if(n=t(r),n)return!0;if(!!r.hasChildren()&&(n=r._descendants(t),n))return!0}return!1}toObject(){var t=V.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){var n=V.prototype.clone.call(this,t);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(t){var n=[];return this.find("Shape").forEach(function(i){i.isVisible()&&i.intersects(t)&&n.push(i)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(t,n){var i=this.getLayer(),r=t||i&&i.getCanvas(),s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.scene,l=r&&r.isCache;if(!this.isVisible()&&!l)return this;if(o){s.save();var h=this.getAbsoluteTransform(n).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",r,n);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;var i=this.getLayer(),r=t||i&&i.hitCanvas,s=r&&r.getContext(),a=this._getCanvasCache(),o=a&&a.hit;if(o){s.save();var l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,n);return this}_drawChildren(t,n,i){var r,s=n&&n.getContext(),a=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h=a&&o||l;const c=i===this;if(h){s.save();var u=this.getAbsoluteTransform(i),f=u.getMatrix();if(s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),d=this.clipY();s.rect(g,d,a,o)}s.clip(),f=u.copy().invert().getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var m=!c&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";m&&(s.save(),s._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(y){y[t](n,i)}),m&&s.restore(),h&&s.restore()}getClientRect(t){var n;t=t||{};var i=t.skipTransform,r=t.relativeTo,s,a,o,l,h={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(m){if(!!m.visible()){var y=m.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});y.width===0&&y.height===0||(s===void 0?(s=y.x,a=y.y,o=y.x+y.width,l=y.y+y.height):(s=Math.min(s,y.x),a=Math.min(a,y.y),o=Math.max(o,y.x+y.width),l=Math.max(l,y.y+y.height)))}});for(var u=this.find("Shape"),f=!1,g=0;g<u.length;g++){var d=u[g];if(d._isVisible(this)){f=!0;break}}return f&&s!==void 0?h={x:s,y:a,width:o-s,height:l-a}:h={x:0,y:0,width:0,height:0},i?h:this._transformedRect(h,r)}}v.addComponentsGetterSetter(qt,"clip",["x","y","width","height"]);v.addGetterSetter(qt,"clipX",void 0,U());v.addGetterSetter(qt,"clipY",void 0,U());v.addGetterSetter(qt,"clipWidth",void 0,U());v.addGetterSetter(qt,"clipHeight",void 0,U());v.addGetterSetter(qt,"clipFunc");const xi=new Map,kh=q._global.PointerEvent!==void 0;function Jr(e){return xi.get(e)}function fa(e){return{evt:e,pointerId:e.pointerId}}function Mh(e,t){return xi.get(e)===t}function Oh(e,t){di(e),t.getStage()&&(xi.set(e,t),kh&&t._fire("gotpointercapture",fa(new PointerEvent("gotpointercapture"))))}function di(e,t){const n=xi.get(e);if(!n)return;const i=n.getStage();i&&i.content,xi.delete(e),kh&&n._fire("lostpointercapture",fa(new PointerEvent("lostpointercapture")))}var Og="Stage",Rg="string",bo="px",Lg="mouseout",Rh="mouseleave",Lh="mouseover",Ih="mouseenter",Dh="mousemove",Nh="mousedown",Fh="mouseup",ni="pointermove",ii="pointerdown",Pn="pointerup",ri="pointercancel",Ig="lostpointercapture",Xi="pointerout",qi="pointerleave",Qi="pointerover",Ji="pointerenter",Ts="contextmenu",Gh="touchstart",Hh="touchend",Bh="touchmove",jh="touchcancel",As="wheel",Dg=5,Ng=[[Ih,"_pointerenter"],[Nh,"_pointerdown"],[Dh,"_pointermove"],[Fh,"_pointerup"],[Rh,"_pointerleave"],[Gh,"_pointerdown"],[Bh,"_pointermove"],[Hh,"_pointerup"],[jh,"_pointercancel"],[Lh,"_pointerover"],[As,"_wheel"],[Ts,"_contextmenu"],[ii,"_pointerdown"],[ni,"_pointermove"],[Pn,"_pointerup"],[ri,"_pointercancel"],[Ig,"_lostpointercapture"]];const Zr={mouse:{[Xi]:Lg,[qi]:Rh,[Qi]:Lh,[Ji]:Ih,[ni]:Dh,[ii]:Nh,[Pn]:Fh,[ri]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Xi]:"touchout",[qi]:"touchleave",[Qi]:"touchover",[Ji]:"touchenter",[ni]:Bh,[ii]:Gh,[Pn]:Hh,[ri]:jh,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Xi]:Xi,[qi]:qi,[Qi]:Qi,[Ji]:Ji,[ni]:ni,[ii]:ii,[Pn]:Pn,[ri]:ri,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},si=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Sn=e=>{const t=si(e);if(t==="pointer")return q.pointerEventsEnabled&&Zr.pointer;if(t==="touch")return Zr.touch;if(t==="mouse")return Zr.mouse};function yo(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&P.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Fg="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",cr=[];class Ur extends qt{constructor(t){super(yo(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),cr.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{yo(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n=t.getType()==="Layer",i=t.getType()==="FastLayer";n||i||P.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Rg){if(t.charAt(0)==="."){var n=t.slice(1);t=document.getElementsByClassName(n)[0]}else{var i;t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i)}if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t=this.children,n=t.length,i;for(i=0;i<n;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),qt.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&P._isInDocument(t)&&this.container().removeChild(t);var n=cr.indexOf(this);return n>-1&&cr.splice(n,1),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(P.warn(Fg),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var n=new Dn({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=n.getContext()._context,r=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),r.forEach(function(s){if(!!s.isVisible()){var a=s._toKonvaCanvas(t);i.drawImage(a._canvas,t.x,t.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}}),n}getIntersection(t){if(!t)return null;var n=this.children,i=n.length,r=i-1,s;for(s=r;s>=0;s--){const a=n[s].getIntersection(t);if(a)return a}return null}_resizeDOM(){var t=this.width(),n=this.height();this.content&&(this.content.style.width=t+bo,this.content.style.height=n+bo),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(i=>{i.setSize({width:t,height:n}),i.draw()})}add(t,...n){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}super.add(t);var r=this.children.length;return r>Dg&&P.warn("The stage has "+r+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),q.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return Mh(t,this)}setPointerCapture(t){Oh(t,this)}releaseCapture(t){di(t)}getLayers(){return this.children}_bindContentEvents(){!q.isBrowser||Ng.forEach(([t,n])=>{this.content.addEventListener(t,i=>{this[n](i)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=Sn(t.type);this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=Sn(t.type);this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=Sn(t.type),i=si(t.type);if(!!n){this.setPointersPositions(t);var r=this._getTargetShape(i),s=!ut.isDragging||q.hitOnDragEnabled;r&&s?(r._fireAndBubble(n.pointerout,{evt:t}),r._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const n=Sn(t.type),i=si(t.type);if(!!n){this.setPointersPositions(t);var r=!1;this._changedPointerPositions.forEach(s=>{var a=this.getIntersection(s);if(ut.justDragged=!1,q["_"+i+"ListenClick"]=!0,!(a&&a.isListening()))return;q.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(n.pointerdown,{evt:t,pointerId:s.id}),r=!0;const l=t.type.indexOf("touch")>=0;a.preventDefault()&&t.cancelable&&l&&t.preventDefault()}),r||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const n=Sn(t.type),i=si(t.type);if(!n)return;ut.isDragging&&ut.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);var r=!ut.isDragging||q.hitOnDragEnabled;if(!r)return;var s={};let a=!1;var o=this._getTargetShape(i);this._changedPointerPositions.forEach(l=>{const h=Jr(l.id)||this.getIntersection(l),c=l.id,u={evt:t,pointerId:c};var f=o!==h;if(f&&o&&(o._fireAndBubble(n.pointerout,Object.assign({},u),h),o._fireAndBubble(n.pointerleave,Object.assign({},u),h)),h){if(s[h._id])return;s[h._id]=!0}h&&h.isListening()?(a=!0,f&&(h._fireAndBubble(n.pointerover,Object.assign({},u),o),h._fireAndBubble(n.pointerenter,Object.assign({},u),o),this[i+"targetShape"]=h),h._fireAndBubble(n.pointermove,Object.assign({},u))):o&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:c}),this[i+"targetShape"]=null)}),a||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=Sn(t.type),i=si(t.type);if(!n)return;this.setPointersPositions(t);const r=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"];var a={};let o=!1;this._changedPointerPositions.forEach(l=>{const h=Jr(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),a[h._id])return;a[h._id]=!0}const c=l.id,u={evt:t,pointerId:c};let f=!1;q["_"+i+"InDblClickWindow"]?(f=!0,clearTimeout(this[i+"DblTimeout"])):ut.justDragged||(q["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){q["_"+i+"InDblClickWindow"]=!1},q.dblClickWindow),h&&h.isListening()?(o=!0,this[i+"ClickEndShape"]=h,h._fireAndBubble(n.pointerup,Object.assign({},u)),q["_"+i+"ListenClick"]&&r&&r===h&&(h._fireAndBubble(n.pointerclick,Object.assign({},u)),f&&s&&s===h&&h._fireAndBubble(n.pointerdblclick,Object.assign({},u)))):(this[i+"ClickEndShape"]=null,q["_"+i+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),f&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),q["_"+i+"ListenClick"]=!1,t.cancelable&&i!=="touch"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Ts,{evt:t}):this._fire(Ts,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(As,{evt:t}):this._fire(As,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=Jr(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Pn,fa(t)),di(t.pointerId)}_lostpointercapture(t){di(t.pointerId)}setPointersPositions(t){var n=this._getContentPosition(),i=null,r=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(i=(t.clientX-n.left)/n.scaleX,r=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:P._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:r,id:P._getFirstPointerId(t)}])}_setPointerPosition(t){P.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Dn({width:this.width(),height:this.height()}),this.bufferHitCanvas=new ua({pixelRatio:1,width:this.width(),height:this.height()}),!!q.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return P.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Ur.prototype.nodeType=Og;St(Ur);v.addGetterSetter(Ur,"container");var Uh="hasShadow",Vh="shadowRGBA",Wh="patternImage",Kh="linearGradient",zh="radialGradient";let Zi;function ts(){return Zi||(Zi=P.createCanvasElement().getContext("2d"),Zi)}const gi={};function Gg(e){e.fill()}function Hg(e){e.stroke()}function Bg(e){e.fill()}function jg(e){e.stroke()}function Ug(){this._clearCache(Uh)}function Vg(){this._clearCache(Vh)}function Wg(){this._clearCache(Wh)}function Kg(){this._clearCache(Kh)}function zg(){this._clearCache(zh)}class B extends V{constructor(t){super(t);let n;for(;n=P.getRandomColor(),!(n&&!(n in gi)););this.colorKey=n,gi[n]=this}getContext(){return P.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return P.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Uh,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Wh,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var t=ts();const n=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const i=new Yt;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(q.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=i.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);n.setTransform(s)}return n}}_getLinearGradient(){return this._getCache(Kh,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var n=ts(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(i.x,i.y,r.x,r.y),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}_getRadialGradient(){return this._getCache(zh,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var n=ts(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius()),a=0;a<t.length;a+=2)s.addColorStop(t[a],t[a+1]);return s}}getShadowRGBA(){return this._getCache(Vh,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var t=P.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var n=this.getStage(),i=n.bufferHitCanvas,r;return i.getContext().clear(),this.drawHit(i,null,!0),r=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,r[3]>0}destroy(){return V.prototype.destroy.call(this),delete gi[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const r=t||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(r&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(r&&s&&o&&l)}setStrokeHitEnabled(t){P.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const n=t.skipTransform,i=t.relativeTo,r=this.getSelfRect(),a=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,o=r.width+a,l=r.height+a,h=!t.skipShadow&&this.hasShadow(),c=h?this.shadowOffsetX():0,u=h?this.shadowOffsetY():0,f=o+Math.abs(c),g=l+Math.abs(u),d=h&&this.shadowBlur()||0,m=f+d*2,y=g+d*2,b={width:m,height:y,x:-(a/2+d)+Math.min(c,0)+r.x,y:-(a/2+d)+Math.min(u,0)+r.y};return n?b:this._transformedRect(b,i)}drawScene(t,n){var i=this.getLayer(),r=t||i.getCanvas(),s=r.getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),l=this.hasShadow(),h,c,u,f=r.isCache,g=n===this;if(!this.isVisible()&&!g)return this;if(a){s.save();var d=this.getAbsoluteTransform(n).getMatrix();return s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),this._useBufferCanvas()&&!f){h=this.getStage(),c=h.bufferCanvas,u=c.getContext(),u.clear(),u.save(),u._applyLineJoin(this);var m=this.getAbsoluteTransform(n).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),o.call(this,u,this),u.restore();var y=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/y,c.height/y)}else{if(s._applyLineJoin(this),!g){var m=this.getAbsoluteTransform(n).getMatrix();s.transform(m[0],m[1],m[2],m[3],m[4],m[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),o.call(this,s,this)}return s.restore(),this}drawHit(t,n,i=!1){if(!this.shouldDrawHit(n,i))return this;var r=this.getLayer(),s=t||r.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||P.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){a.save();var c=this.getAbsoluteTransform(n).getMatrix();return a.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),!(this===n)){var f=this.getAbsoluteTransform(n).getMatrix();a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(t=0){var n=this._getCanvasCache(),i=this._getCachedSceneCanvas(),r=n.hit,s=r.getContext(),a=r.getWidth(),o=r.getHeight(),l,h,c,u,f,g;s.clear(),s.drawImage(i._canvas,0,0,a,o);try{for(l=s.getImageData(0,0,a,o),h=l.data,c=h.length,u=P._hexToRgb(this.colorKey),f=0;f<c;f+=4)g=h[f+3],g>t?(h[f]=u.r,h[f+1]=u.g,h[f+2]=u.b,h[f+3]=255):h[f+3]=0;s.putImageData(l,0,0)}catch(d){P.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}hasPointerCapture(t){return Mh(t,this)}setPointerCapture(t){Oh(t,this)}releaseCapture(t){di(t)}}B.prototype._fillFunc=Gg;B.prototype._strokeFunc=Hg;B.prototype._fillFuncHit=Bg;B.prototype._strokeFuncHit=jg;B.prototype._centroid=!1;B.prototype.nodeType="Shape";St(B);B.prototype.eventListeners={};B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Ug);B.prototype.on.call(B.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Vg);B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",Wg);B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Kg);B.prototype.on.call(B.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",zg);v.addGetterSetter(B,"stroke",void 0,Ah());v.addGetterSetter(B,"strokeWidth",2,U());v.addGetterSetter(B,"fillAfterStrokeEnabled",!1);v.addGetterSetter(B,"hitStrokeWidth","auto",ca());v.addGetterSetter(B,"strokeHitEnabled",!0,oe());v.addGetterSetter(B,"perfectDrawEnabled",!0,oe());v.addGetterSetter(B,"shadowForStrokeEnabled",!0,oe());v.addGetterSetter(B,"lineJoin");v.addGetterSetter(B,"lineCap");v.addGetterSetter(B,"sceneFunc");v.addGetterSetter(B,"hitFunc");v.addGetterSetter(B,"dash");v.addGetterSetter(B,"dashOffset",0,U());v.addGetterSetter(B,"shadowColor",void 0,Vn());v.addGetterSetter(B,"shadowBlur",0,U());v.addGetterSetter(B,"shadowOpacity",1,U());v.addComponentsGetterSetter(B,"shadowOffset",["x","y"]);v.addGetterSetter(B,"shadowOffsetX",0,U());v.addGetterSetter(B,"shadowOffsetY",0,U());v.addGetterSetter(B,"fillPatternImage");v.addGetterSetter(B,"fill",void 0,Ah());v.addGetterSetter(B,"fillPatternX",0,U());v.addGetterSetter(B,"fillPatternY",0,U());v.addGetterSetter(B,"fillLinearGradientColorStops");v.addGetterSetter(B,"strokeLinearGradientColorStops");v.addGetterSetter(B,"fillRadialGradientStartRadius",0);v.addGetterSetter(B,"fillRadialGradientEndRadius",0);v.addGetterSetter(B,"fillRadialGradientColorStops");v.addGetterSetter(B,"fillPatternRepeat","repeat");v.addGetterSetter(B,"fillEnabled",!0);v.addGetterSetter(B,"strokeEnabled",!0);v.addGetterSetter(B,"shadowEnabled",!0);v.addGetterSetter(B,"dashEnabled",!0);v.addGetterSetter(B,"strokeScaleEnabled",!0);v.addGetterSetter(B,"fillPriority","color");v.addComponentsGetterSetter(B,"fillPatternOffset",["x","y"]);v.addGetterSetter(B,"fillPatternOffsetX",0,U());v.addGetterSetter(B,"fillPatternOffsetY",0,U());v.addComponentsGetterSetter(B,"fillPatternScale",["x","y"]);v.addGetterSetter(B,"fillPatternScaleX",1,U());v.addGetterSetter(B,"fillPatternScaleY",1,U());v.addComponentsGetterSetter(B,"fillLinearGradientStartPoint",["x","y"]);v.addComponentsGetterSetter(B,"strokeLinearGradientStartPoint",["x","y"]);v.addGetterSetter(B,"fillLinearGradientStartPointX",0);v.addGetterSetter(B,"strokeLinearGradientStartPointX",0);v.addGetterSetter(B,"fillLinearGradientStartPointY",0);v.addGetterSetter(B,"strokeLinearGradientStartPointY",0);v.addComponentsGetterSetter(B,"fillLinearGradientEndPoint",["x","y"]);v.addComponentsGetterSetter(B,"strokeLinearGradientEndPoint",["x","y"]);v.addGetterSetter(B,"fillLinearGradientEndPointX",0);v.addGetterSetter(B,"strokeLinearGradientEndPointX",0);v.addGetterSetter(B,"fillLinearGradientEndPointY",0);v.addGetterSetter(B,"strokeLinearGradientEndPointY",0);v.addComponentsGetterSetter(B,"fillRadialGradientStartPoint",["x","y"]);v.addGetterSetter(B,"fillRadialGradientStartPointX",0);v.addGetterSetter(B,"fillRadialGradientStartPointY",0);v.addComponentsGetterSetter(B,"fillRadialGradientEndPoint",["x","y"]);v.addGetterSetter(B,"fillRadialGradientEndPointX",0);v.addGetterSetter(B,"fillRadialGradientEndPointY",0);v.addGetterSetter(B,"fillPatternRotation",0);v.backCompat(B,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var $g="#",Yg="beforeDraw",Xg="draw",$h=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],qg=$h.length;class pn extends qt{constructor(t){super(t),this.canvas=new Dn,this.hitCanvas=new ua({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){V.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var t=V.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(V.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(V.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return V.prototype.remove.call(this),t&&t.parentNode&&P._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),V.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){P.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){P.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,P.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var n=1,i=!1;;){for(let r=0;r<qg;r++){const s=$h[r],a=this._getIntersection({x:t.x+s.x*n,y:t.y+s.y*n}),o=a.shape;if(o)return o;if(i=!!a.antialiased,!a.antialiased)break}if(i)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,r=i[3];if(r===255){const s=P._rgbToHex(i[0],i[1],i[2]),a=gi[$g+s];return a?{shape:a}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(t,n){var i=this.getLayer(),r=t||i&&i.getCanvas();return this._fire(Yg,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),qt.prototype.drawScene.call(this,r,n),this._fire(Xg,{node:this}),this}drawHit(t,n){var i=this.getLayer(),r=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),qt.prototype.drawHit.call(this,r,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}pn.prototype.nodeType="Layer";St(pn);v.addGetterSetter(pn,"imageSmoothingEnabled",!0);v.addGetterSetter(pn,"clearBeforeDraw",!0);v.addGetterSetter(pn,"hitGraphEnabled",!0,oe());class da extends pn{constructor(t){super(t),this.listening(!1),P.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}da.prototype.nodeType="FastLayer";St(da);class Un extends qt{_validateAdd(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to groups.")}}Un.prototype.nodeType="Group";St(Un);var es=function(){return In.performance&&In.performance.now?function(){return In.performance.now()}:function(){return new Date().getTime()}}();class te{constructor(t,n){this.id=te.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:es(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){var n=[];return t?t.length>0?n=t:n=[t]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(t){var n=this.layers,i=n.length,r;for(r=0;r<i;r++)if(n[r]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var t=te,n=t.animations,i=n.length,r;for(r=0;r<i;r++)if(n[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=es(),te._addAnimation(this),this}stop(){return te._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var n=t.id,i=this.animations,r=i.length,s;for(s=0;s<r;s++)if(i[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){var t={},n=this.animations,i,r,s,a,o,l,h,c,u;for(a=0;a<n.length;a++)if(i=n[a],r=i.layers,s=i.func,i._updateFrameObject(es()),l=r.length,s?u=s.call(i,i.frame)!==!1:u=!0,!!u)for(o=0;o<l;o++)h=r[o],h._id!==void 0&&(t[h._id]=h);for(c in t)!t.hasOwnProperty(c)||t[c].batchDraw()}static _animationLoop(){var t=te;t.animations.length?(t._runFrames(),P.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,P.requestAnimFrame(this._animationLoop))}}te.animations=[];te.animIdCounter=0;te.animRunning=!1;var Qg={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Jg=1,Co=2,So=3,Zg=0,wo=["fill","stroke","shadowColor"];class tp{constructor(t,n,i,r,s,a,o){this.prop=t,this.propFunc=n,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(t){var n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Co,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=So,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;this.state===Co?this.setTime(t):this.state===So&&this.setTime(this.duration-t)}pause(){this.state=Jg,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tt{constructor(t){var n=this,i=t.node,r=i._id,s,a=t.easing||pi.Linear,o=!!t.yoyo,l;typeof t.duration>"u"?s=.3:t.duration===0?s=.001:s=t.duration,this.node=i,this._id=Zg++;var h=i.getLayer()||(i instanceof q.Stage?i.getLayers():null);h||P.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new te(function(){n.tween.onEnterFrame()},h),this.tween=new tp(l,function(c){n._tweenFunc(c)},a,0,1,s*1e3,o),this._addListeners(),Tt.attrs[r]||(Tt.attrs[r]={}),Tt.attrs[r][this._id]||(Tt.attrs[r][this._id]={}),Tt.tweens[r]||(Tt.tweens[r]={});for(l in t)Qg[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,n){var i=this.node,r=i._id,s,a,o,l,h,c,u,f;if(o=Tt.tweens[r][t],o&&delete Tt.attrs[r][o][t],s=i.getAttr(t),P._isArray(n))if(a=[],h=Math.max(n.length,s.length),t==="points"&&n.length!==s.length&&(n.length>s.length?(u=s,s=P._prepareArrayForTween(s,n,i.closed())):(c=n,n=P._prepareArrayForTween(n,s,i.closed()))),t.indexOf("fill")===0)for(l=0;l<h;l++)if(l%2===0)a.push(n[l]-s[l]);else{var g=P.colorToRGBA(s[l]);f=P.colorToRGBA(n[l]),s[l]=g,a.push({r:f.r-g.r,g:f.g-g.g,b:f.b-g.b,a:f.a-g.a})}else for(l=0;l<h;l++)a.push(n[l]-s[l]);else wo.indexOf(t)!==-1?(s=P.colorToRGBA(s),f=P.colorToRGBA(n),a={r:f.r-s.r,g:f.g-s.g,b:f.b-s.b,a:f.a-s.a}):a=n-s;Tt.attrs[r][this._id][t]={start:s,diff:a,end:n,trueEnd:c,trueStart:u},Tt.tweens[r][t]=this._id}_tweenFunc(t){var n=this.node,i=Tt.attrs[n._id][this._id],r,s,a,o,l,h,c,u;for(r in i){if(s=i[r],a=s.start,o=s.diff,u=s.end,P._isArray(a))if(l=[],c=Math.max(a.length,u.length),r.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((a[h]||0)+o[h]*t):l.push("rgba("+Math.round(a[h].r+o[h].r*t)+","+Math.round(a[h].g+o[h].g*t)+","+Math.round(a[h].b+o[h].b*t)+","+(a[h].a+o[h].a*t)+")");else for(h=0;h<c;h++)l.push((a[h]||0)+o[h]*t);else wo.indexOf(r)!==-1?l="rgba("+Math.round(a.r+o.r*t)+","+Math.round(a.g+o.g*t)+","+Math.round(a.b+o.b*t)+","+(a.a+o.a*t)+")":l=a+o*t;n.setAttr(r,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var t=this.node,n=Tt.attrs[t._id][this._id];n.points&&n.points.trueEnd&&t.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var t=this.node,n=Tt.attrs[t._id][this._id];n.points&&n.points.trueStart&&t.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var t=this.node._id,n=this._id,i=Tt.tweens[t],r;this.pause();for(r in i)delete Tt.tweens[t][r];delete Tt.attrs[t][n]}}Tt.attrs={};Tt.tweens={};V.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()};var n=new Tt(e);n.play()};const pi={BackEaseIn(e,t,n,i){var r=1.70158;return n*(e/=i)*e*((r+1)*e-r)+t},BackEaseOut(e,t,n,i){var r=1.70158;return n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},BackEaseInOut(e,t,n,i){var r=1.70158;return(e/=i/2)<1?n/2*(e*e*(((r*=1.525)+1)*e-r))+t:n/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+t},ElasticEaseIn(e,t,n,i,r,s){var a=0;return e===0?t:(e/=i)===1?t+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s))+t)},ElasticEaseOut(e,t,n,i,r,s){var a=0;return e===0?t:(e/=i)===1?t+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*i-a)*(2*Math.PI)/s)+n+t)},ElasticEaseInOut(e,t,n,i,r,s){var a=0;return e===0?t:(e/=i/2)===2?t+n:(s||(s=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),e<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s))+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*i-a)*(2*Math.PI)/s)*.5+n+t)},BounceEaseOut(e,t,n,i){return(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,n,i){return n-pi.BounceEaseOut(i-e,0,n,i)+t},BounceEaseInOut(e,t,n,i){return e<i/2?pi.BounceEaseIn(e*2,0,n,i)*.5+t:pi.BounceEaseOut(e*2-i,0,n,i)*.5+n*.5+t},EaseIn(e,t,n,i){return n*(e/=i)*e+t},EaseOut(e,t,n,i){return-n*(e/=i)*(e-2)+t},EaseInOut(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,n,i){return n*(e/=i)*e*e*e*e+t},StrongEaseOut(e,t,n,i){return n*((e=e/i-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,n,i){return(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,n,i){return n*e/i+t}},xo=P._assign(q,{Util:P,Transform:Yt,Node:V,Container:qt,Stage:Ur,stages:cr,Layer:pn,FastLayer:da,Group:Un,DD:ut,Shape:B,shapes:gi,Animation:te,Tween:Tt,Easings:pi,Context:Br,Canvas:jr});class Pe extends B{_sceneFunc(t){var n=q.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,i),t.arc(0,0,this.innerRadius(),n,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),r=q.getAngle(i?360-this.angle():this.angle()),s=Math.cos(Math.min(r,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),l=Math.sin(Math.min(r,Math.PI/2)),h=s*(s>0?t:n),c=a*n,u=o*(o>0?t:n),f=l*(l>0?n:t);return{x:h,y:i?-1*f:u,width:c-h,height:f-u}}}Pe.prototype._centroid=!0;Pe.prototype.className="Arc";Pe.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(Pe);v.addGetterSetter(Pe,"innerRadius",0,U());v.addGetterSetter(Pe,"outerRadius",0,U());v.addGetterSetter(Pe,"angle",0,U());v.addGetterSetter(Pe,"clockwise",!1,oe());function ks(e,t,n,i,r,s,a){var o=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),h=a*o/(o+l),c=a*l/(o+l),u=n-h*(r-e),f=i-h*(s-t),g=n+c*(r-e),d=i+c*(s-t);return[u,f,g,d]}function Po(e,t){var n=e.length,i=[],r,s;for(r=2;r<n-2;r+=2)s=ks(e[r-2],e[r-1],e[r],e[r+1],e[r+2],e[r+3],t),!isNaN(s[0])&&(i.push(s[0]),i.push(s[1]),i.push(e[r]),i.push(e[r+1]),i.push(s[2]),i.push(s[3]));return i}class Ee extends B{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var n=this.points(),i=n.length,r=this.tension(),s=this.closed(),a=this.bezier(),o,l,h;if(!!i){if(t.beginPath(),t.moveTo(n[0],n[1]),r!==0&&i>4){for(o=this.getTensionPoints(),l=o.length,h=s?0:4,s||t.quadraticCurveTo(o[0],o[1],o[2],o[3]);h<l-2;)t.bezierCurveTo(o[h++],o[h++],o[h++],o[h++],o[h++],o[h++]);s||t.quadraticCurveTo(o[l-2],o[l-1],n[i-2],n[i-1])}else if(a)for(h=2;h<i;)t.bezierCurveTo(n[h++],n[h++],n[h++],n[h++],n[h++],n[h++]);else for(h=2;h<i;h+=2)t.lineTo(n[h],n[h+1]);s?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Po(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),n=t.length,i=this.tension(),r=ks(t[n-2],t[n-1],t[0],t[1],t[2],t[3],i),s=ks(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],i),a=Po(t,i),o=[r[2],r[3]].concat(a).concat([s[0],s[1],t[n-2],t[n-1],s[2],s[3],r[0],r[1],t[0],t[1]]);return o}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();for(var n=t[0],i=t[0],r=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,o),s=Math.max(s,o);return{x:n,y:r,width:i-n,height:s-r}}}Ee.prototype.className="Line";Ee.prototype._attrsAffectingSize=["points","bezier","tension"];St(Ee);v.addGetterSetter(Ee,"closed",!1);v.addGetterSetter(Ee,"bezier",!1);v.addGetterSetter(Ee,"tension",0,U());v.addGetterSetter(Ee,"points",[],cg());class vt extends B{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=vt.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=vt.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength})}_sceneFunc(t){var n=this.dataArray;t.beginPath();for(var i=!1,r=0;r<n.length;r++){var s=n[r].command,a=n[r].points;switch(s){case"L":t.lineTo(a[0],a[1]);break;case"M":t.moveTo(a[0],a[1]);break;case"C":t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":t.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":var o=a[0],l=a[1],h=a[2],c=a[3],u=a[4],f=a[5],g=a[6],d=a[7],m=h>c?h:c,y=h>c?1:h/c,b=h>c?c/h:1;t.translate(o,l),t.rotate(g),t.scale(y,b),t.arc(0,0,m,u,u+f,1-d),t.scale(1/y,1/b),t.rotate(-g),t.translate(-o,-l);break;case"z":i=!0,t.closePath();break}}!i&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(h){if(h.command==="A"){var c=h.points[4],u=h.points[5],f=h.points[4]+u,g=Math.PI/180;if(Math.abs(c-f)<g&&(g=Math.abs(c-f)),u<0)for(let d=c-g;d>f;d-=g){const m=vt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(m.x,m.y)}else for(let d=c+g;d<f;d+=g){const m=vt.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],d,0);t.push(m.x,m.y)}}else if(h.command==="C")for(let d=0;d<=1;d+=.01){const m=vt.getPointOnCubicBezier(d,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);t.push(m.x,m.y)}else t=t.concat(h.points)});for(var n=t[0],i=t[0],r=t[1],s=t[1],a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],isNaN(a)||(n=Math.min(n,a),i=Math.max(i,a)),isNaN(o)||(r=Math.min(r,o),s=Math.max(s,o));return{x:n,y:r,width:i-n,height:s-r}}getLength(){return this.pathLength}getPointAtLength(t){var n,i=0,r=this.dataArray.length;if(!r)return null;for(;i<r&&t>this.dataArray[i].pathLength;)t-=this.dataArray[i].pathLength,++i;if(i===r)return n=this.dataArray[i-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=this.dataArray[i].points.slice(0,2),{x:n[0],y:n[1]};var s=this.dataArray[i],a=s.points;switch(s.command){case"L":return vt.getPointOnLine(t,s.start.x,s.start.y,a[0],a[1]);case"C":return vt.getPointOnCubicBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return vt.getPointOnQuadraticBezier(t/s.pathLength,s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var o=a[0],l=a[1],h=a[2],c=a[3],u=a[4],f=a[5],g=a[6];return u+=f*t/s.pathLength,vt.getPointOnEllipticalArc(o,l,h,c,u,g)}return null}static getLineLength(t,n,i,r){return Math.sqrt((i-t)*(i-t)+(r-n)*(r-n))}static getPointOnLine(t,n,i,r,s,a,o){a===void 0&&(a=n),o===void 0&&(o=i);var l=(s-i)/(r-n+1e-8),h=Math.sqrt(t*t/(1+l*l));r<n&&(h*=-1);var c=l*h,u;if(r===n)u={x:a,y:o+c};else if((o-i)/(a-n+1e-8)===l)u={x:a+h,y:o+c};else{var f,g,d=this.getLineLength(n,i,r,s),m=(a-n)*(r-n)+(o-i)*(s-i);m=m/(d*d),f=n+m*(r-n),g=i+m*(s-i);var y=this.getLineLength(a,o,f,g),b=Math.sqrt(t*t-y*y);h=Math.sqrt(b*b/(1+l*l)),r<n&&(h*=-1),c=l*h,u={x:f+h,y:g+c}}return u}static getPointOnCubicBezier(t,n,i,r,s,a,o,l,h){function c(y){return y*y*y}function u(y){return 3*y*y*(1-y)}function f(y){return 3*y*(1-y)*(1-y)}function g(y){return(1-y)*(1-y)*(1-y)}var d=l*c(t)+a*u(t)+r*f(t)+n*g(t),m=h*c(t)+o*u(t)+s*f(t)+i*g(t);return{x:d,y:m}}static getPointOnQuadraticBezier(t,n,i,r,s,a,o){function l(g){return g*g}function h(g){return 2*g*(1-g)}function c(g){return(1-g)*(1-g)}var u=a*l(t)+r*h(t)+n*c(t),f=o*l(t)+s*h(t)+i*c(t);return{x:u,y:f}}static getPointOnEllipticalArc(t,n,i,r,s,a){var o=Math.cos(a),l=Math.sin(a),h={x:i*Math.cos(s),y:r*Math.sin(s)};return{x:t+(h.x*o-h.y*l),y:n+(h.x*l+h.y*o)}}static parsePathData(t){if(!t)return[];var n=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var r=0;r<i.length;r++)n=n.replace(new RegExp(i[r],"g"),"|"+i[r]);var s=n.split("|"),a=[],o=[],l=0,h=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u;for(r=1;r<s.length;r++){var f=s[r],g=f.charAt(0);for(f=f.slice(1),o.length=0;u=c.exec(f);)o.push(u[0]);for(var d=[],m=0,y=o.length;m<y;m++){if(o[m]==="00"){d.push(0,0);continue}var b=parseFloat(o[m]);isNaN(b)?d.push(0):d.push(b)}for(;d.length>0&&!isNaN(d[0]);){var p=null,C=[],S=l,A=h,E,O,x,L,R,D,N,k,T,F;switch(g){case"l":l+=d.shift(),h+=d.shift(),p="L",C.push(l,h);break;case"L":l=d.shift(),h=d.shift(),C.push(l,h);break;case"m":var I=d.shift(),Y=d.shift();if(l+=I,h+=Y,p="M",a.length>2&&a[a.length-1].command==="z"){for(var Z=a.length-2;Z>=0;Z--)if(a[Z].command==="M"){l=a[Z].points[0]+I,h=a[Z].points[1]+Y;break}}C.push(l,h),g="l";break;case"M":l=d.shift(),h=d.shift(),p="M",C.push(l,h),g="L";break;case"h":l+=d.shift(),p="L",C.push(l,h);break;case"H":l=d.shift(),p="L",C.push(l,h);break;case"v":h+=d.shift(),p="L",C.push(l,h);break;case"V":h=d.shift(),p="L",C.push(l,h);break;case"C":C.push(d.shift(),d.shift(),d.shift(),d.shift()),l=d.shift(),h=d.shift(),C.push(l,h);break;case"c":C.push(l+d.shift(),h+d.shift(),l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="C",C.push(l,h);break;case"S":O=l,x=h,E=a[a.length-1],E.command==="C"&&(O=l+(l-E.points[2]),x=h+(h-E.points[3])),C.push(O,x,d.shift(),d.shift()),l=d.shift(),h=d.shift(),p="C",C.push(l,h);break;case"s":O=l,x=h,E=a[a.length-1],E.command==="C"&&(O=l+(l-E.points[2]),x=h+(h-E.points[3])),C.push(O,x,l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="C",C.push(l,h);break;case"Q":C.push(d.shift(),d.shift()),l=d.shift(),h=d.shift(),C.push(l,h);break;case"q":C.push(l+d.shift(),h+d.shift()),l+=d.shift(),h+=d.shift(),p="Q",C.push(l,h);break;case"T":O=l,x=h,E=a[a.length-1],E.command==="Q"&&(O=l+(l-E.points[0]),x=h+(h-E.points[1])),l=d.shift(),h=d.shift(),p="Q",C.push(O,x,l,h);break;case"t":O=l,x=h,E=a[a.length-1],E.command==="Q"&&(O=l+(l-E.points[0]),x=h+(h-E.points[1])),l+=d.shift(),h+=d.shift(),p="Q",C.push(O,x,l,h);break;case"A":L=d.shift(),R=d.shift(),D=d.shift(),N=d.shift(),k=d.shift(),T=l,F=h,l=d.shift(),h=d.shift(),p="A",C=this.convertEndpointToCenterParameterization(T,F,l,h,N,k,L,R,D);break;case"a":L=d.shift(),R=d.shift(),D=d.shift(),N=d.shift(),k=d.shift(),T=l,F=h,l+=d.shift(),h+=d.shift(),p="A",C=this.convertEndpointToCenterParameterization(T,F,l,h,N,k,L,R,D);break}a.push({command:p||g,points:C,start:{x:S,y:A},pathLength:this.calcLength(S,A,p||g,C)})}(g==="z"||g==="Z")&&a.push({command:"z",points:[],start:void 0,pathLength:0})}return a}static calcLength(t,n,i,r){var s,a,o,l,h=vt;switch(i){case"L":return h.getLineLength(t,n,r[0],r[1]);case"C":for(s=0,a=h.getPointOnCubicBezier(0,t,n,r[0],r[1],r[2],r[3],r[4],r[5]),l=.01;l<=1;l+=.01)o=h.getPointOnCubicBezier(l,t,n,r[0],r[1],r[2],r[3],r[4],r[5]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"Q":for(s=0,a=h.getPointOnQuadraticBezier(0,t,n,r[0],r[1],r[2],r[3]),l=.01;l<=1;l+=.01)o=h.getPointOnQuadraticBezier(l,t,n,r[0],r[1],r[2],r[3]),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return s;case"A":s=0;var c=r[4],u=r[5],f=r[4]+u,g=Math.PI/180;if(Math.abs(c-f)<g&&(g=Math.abs(c-f)),a=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),u<0)for(l=c-g;l>f;l-=g)o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=c+g;l<f;l+=g)o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=h.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],f,0),s+=h.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(t,n,i,r,s,a,o,l,h){var c=h*(Math.PI/180),u=Math.cos(c)*(t-i)/2+Math.sin(c)*(n-r)/2,f=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(n-r)/2,g=u*u/(o*o)+f*f/(l*l);g>1&&(o*=Math.sqrt(g),l*=Math.sqrt(g));var d=Math.sqrt((o*o*(l*l)-o*o*(f*f)-l*l*(u*u))/(o*o*(f*f)+l*l*(u*u)));s===a&&(d*=-1),isNaN(d)&&(d=0);var m=d*o*f/l,y=d*-l*u/o,b=(t+i)/2+Math.cos(c)*m-Math.sin(c)*y,p=(n+r)/2+Math.sin(c)*m+Math.cos(c)*y,C=function(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])},S=function(R,D){return(R[0]*D[0]+R[1]*D[1])/(C(R)*C(D))},A=function(R,D){return(R[0]*D[1]<R[1]*D[0]?-1:1)*Math.acos(S(R,D))},E=A([1,0],[(u-m)/o,(f-y)/l]),O=[(u-m)/o,(f-y)/l],x=[(-1*u-m)/o,(-1*f-y)/l],L=A(O,x);return S(O,x)<=-1&&(L=Math.PI),S(O,x)>=1&&(L=0),a===0&&L>0&&(L=L-2*Math.PI),a===1&&L<0&&(L=L+2*Math.PI),[b,p,o,l,E,L,c,a]}}vt.prototype.className="Path";vt.prototype._attrsAffectingSize=["data"];St(vt);v.addGetterSetter(vt,"data");class vn extends Ee{_sceneFunc(t){super._sceneFunc(t);var n=Math.PI*2,i=this.points(),r=i,s=this.tension()!==0&&i.length>4;s&&(r=this.getTensionPoints());var a=this.pointerLength(),o=i.length,l,h;if(s){const f=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],i[o-2],i[o-1]],g=vt.calcLength(r[r.length-4],r[r.length-3],"C",f),d=vt.getPointOnQuadraticBezier(Math.min(1,1-a/g),f[0],f[1],f[2],f[3],f[4],f[5]);l=i[o-2]-d.x,h=i[o-1]-d.y}else l=i[o-2]-i[o-4],h=i[o-1]-i[o-3];var c=(Math.atan2(h,l)+n)%n,u=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[o-2],i[o-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,u/2),t.lineTo(-a,-u/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),s?(l=(r[0]+r[2])/2-i[0],h=(r[1]+r[3])/2-i[1]):(l=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-l)+n)%n),t.moveTo(0,0),t.lineTo(-a,u/2),t.lineTo(-a,-u/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}}}vn.prototype.className="Arrow";St(vn);v.addGetterSetter(vn,"pointerLength",10,U());v.addGetterSetter(vn,"pointerWidth",10,U());v.addGetterSetter(vn,"pointerAtBeginning",!1);v.addGetterSetter(vn,"pointerAtEnding",!0);class Wn extends B{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Wn.prototype._centroid=!0;Wn.prototype.className="Circle";Wn.prototype._attrsAffectingSize=["radius"];St(Wn);v.addGetterSetter(Wn,"radius",0,U());class Ye extends B{_sceneFunc(t){var n=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),n!==i&&t.scale(1,i/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Ye.prototype.className="Ellipse";Ye.prototype._centroid=!0;Ye.prototype._attrsAffectingSize=["radiusX","radiusY"];St(Ye);v.addComponentsGetterSetter(Ye,"radius",["x","y"]);v.addGetterSetter(Ye,"radiusX",0,U());v.addGetterSetter(Ye,"radiusY",0,U());class le extends B{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),i=this.getHeight(),r=this.attrs.image;let s;if(r){const a=this.attrs.cropWidth,o=this.attrs.cropHeight;a&&o?s=[r,this.cropX(),this.cropY(),a,o,0,0,n,i]:s=[r,0,0,n,i]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)),r&&t.drawImage.apply(t,s)}_hitFunc(t){var n=this.width(),i=this.height();t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(t,n,i=null){var r=P.createImageElement();r.onload=function(){var s=new le({image:r});n(s)},r.onerror=i,r.crossOrigin="Anonymous",r.src=t}}le.prototype.className="Image";St(le);v.addGetterSetter(le,"image");v.addComponentsGetterSetter(le,"crop",["x","y","width","height"]);v.addGetterSetter(le,"cropX",0,U());v.addGetterSetter(le,"cropY",0,U());v.addGetterSetter(le,"cropWidth",0,U());v.addGetterSetter(le,"cropHeight",0,U());var Yh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],ep="Change.konva",np="none",Ms="up",Os="right",Rs="down",Ls="left",ip=Yh.length;class ga extends Un{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var n=this,i,r=function(){n._sync()};for(i=0;i<ip;i++)t.on(Yh[i]+ep,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t=this.getText(),n=this.getTag(),i,r,s,a,o,l,h;if(t&&n){switch(i=t.width(),r=t.height(),s=n.pointerDirection(),a=n.pointerWidth(),h=n.pointerHeight(),o=0,l=0,s){case Ms:o=i/2,l=-1*h;break;case Os:o=i+a,l=r/2;break;case Rs:o=i/2,l=r+h;break;case Ls:o=-1*a,l=r/2;break}n.setAttrs({x:-1*o,y:-1*l,width:i,height:r}),t.setAttrs({x:-1*o,y:-1*l})}}}ga.prototype.className="Label";St(ga);class mn extends B{_sceneFunc(t){var n=this.width(),i=this.height(),r=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,h=0,c=0,u=0;typeof o=="number"?l=h=c=u=Math.min(o,n/2,i/2):(l=Math.min(o[0]||0,n/2,i/2),h=Math.min(o[1]||0,n/2,i/2),u=Math.min(o[2]||0,n/2,i/2),c=Math.min(o[3]||0,n/2,i/2)),t.beginPath(),t.moveTo(l,0),r===Ms&&(t.lineTo((n-s)/2,0),t.lineTo(n/2,-1*a),t.lineTo((n+s)/2,0)),t.lineTo(n-h,0),t.arc(n-h,h,h,Math.PI*3/2,0,!1),r===Os&&(t.lineTo(n,(i-a)/2),t.lineTo(n+s,i/2),t.lineTo(n,(i+a)/2)),t.lineTo(n,i-u),t.arc(n-u,i-u,u,0,Math.PI/2,!1),r===Rs&&(t.lineTo((n+s)/2,i),t.lineTo(n/2,i+a),t.lineTo((n-s)/2,i)),t.lineTo(c,i),t.arc(c,i-c,c,Math.PI/2,Math.PI,!1),r===Ls&&(t.lineTo(0,(i+a)/2),t.lineTo(-1*s,i/2),t.lineTo(0,(i-a)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,n=0,i=this.pointerWidth(),r=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===Ms?(n-=r,o+=r):s===Rs?o+=r:s===Ls?(t-=i*1.5,a+=i):s===Os&&(a+=i*1.5),{x:t,y:n,width:a,height:o}}}mn.prototype.className="Tag";St(mn);v.addGetterSetter(mn,"pointerDirection",np);v.addGetterSetter(mn,"pointerWidth",0,U());v.addGetterSetter(mn,"pointerHeight",0,U());v.addGetterSetter(mn,"cornerRadius",0,Th(4));class Ii extends B{_sceneFunc(t){var n=this.cornerRadius(),i=this.width(),r=this.height();if(t.beginPath(),!n)t.rect(0,0,i,r);else{let s=0,a=0,o=0,l=0;typeof n=="number"?s=a=o=l=Math.min(n,i/2,r/2):(s=Math.min(n[0]||0,i/2,r/2),a=Math.min(n[1]||0,i/2,r/2),l=Math.min(n[2]||0,i/2,r/2),o=Math.min(n[3]||0,i/2,r/2)),t.moveTo(s,0),t.lineTo(i-a,0),t.arc(i-a,a,a,Math.PI*3/2,0,!1),t.lineTo(i,r-l),t.arc(i-l,r-l,l,0,Math.PI/2,!1),t.lineTo(o,r),t.arc(o,r-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,s),t.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)}}Ii.prototype.className="Rect";St(Ii);v.addGetterSetter(Ii,"cornerRadius",0,Th(4));class _n extends B{_sceneFunc(t){const n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var i=1;i<n.length;i++)t.lineTo(n[i].x,n[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,i=[];for(var r=0;r<t;r++)i.push({x:n*Math.sin(r*2*Math.PI/t),y:-1*n*Math.cos(r*2*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();var n=t[0].x,i=t[0].y,r=t[0].x,s=t[0].y;return t.forEach(a=>{n=Math.min(n,a.x),i=Math.max(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),{x:n,y:r,width:i-n,height:s-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}_n.prototype.className="RegularPolygon";_n.prototype._centroid=!0;_n.prototype._attrsAffectingSize=["radius"];St(_n);v.addGetterSetter(_n,"radius",0,U());v.addGetterSetter(_n,"sides",0,U());var Eo=Math.PI*2;class bn extends B{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Eo,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Eo,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}bn.prototype.className="Ring";bn.prototype._centroid=!0;bn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(bn);v.addGetterSetter(bn,"innerRadius",0,U());v.addGetterSetter(bn,"outerRadius",0,U());class me extends B{constructor(t){super(t),this._updated=!0,this.anim=new te(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),o=s[r+0],l=s[r+1],h=s[r+2],c=s[r+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),u)if(a){var f=a[n],g=i*2;t.drawImage(u,o,l,h,c,f[g+0],f[g+1],h,c)}else t.drawImage(u,o,l,h,c,0,0,h,c)}_hitFunc(t){var n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),o=s[r+2],l=s[r+3];if(t.beginPath(),a){var h=a[n],c=i*2;t.rect(h[c+0],h[c+1],o,l)}else t.rect(0,0,o,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),n=this.animation(),i=this.animations(),r=i[n],s=r.length/4;t<s-1?this.frameIndex(t+1):this.frameIndex(0)}}me.prototype.className="Sprite";St(me);v.addGetterSetter(me,"animation");v.addGetterSetter(me,"animations");v.addGetterSetter(me,"frameOffsets");v.addGetterSetter(me,"image");v.addGetterSetter(me,"frameIndex",0,U());v.addGetterSetter(me,"frameRate",17,U());v.backCompat(me,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Xe extends B{_sceneFunc(t){var n=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var s=1;s<r*2;s++){var a=s%2===0?i:n,o=a*Math.sin(s*Math.PI/r),l=-1*a*Math.cos(s*Math.PI/r);t.lineTo(o,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Xe.prototype.className="Star";Xe.prototype._centroid=!0;Xe.prototype._attrsAffectingSize=["innerRadius","outerRadius"];St(Xe);v.addGetterSetter(Xe,"numPoints",5,U());v.addGetterSetter(Xe,"innerRadius",0,U());v.addGetterSetter(Xe,"outerRadius",0,U());function Xh(e){return Array.from(e)}var wn="auto",rp="center",Jn="justify",sp="Change.konva",ap="2d",To="-",qh="left",op="text",lp="Text",hp="top",cp="bottom",Ao="middle",Qh="normal",up="px ",tr=" ",fp="right",dp="word",gp="char",ko="none",ns="\u2026",Jh=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],pp=Jh.length;function vp(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!i&&(t=`"${t}"`),t}).join(", ")}var er;function is(){return er||(er=P.createCanvasElement().getContext(ap),er)}function mp(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _p(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function bp(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Ct extends B{constructor(t){super(bp(t)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<pp;n++)this.on(Jh[n]+sp,this._setTextData);this._setTextData()}_sceneFunc(t){var n=this.textArr,i=n.length;if(!!this.text()){var r=this.padding(),s=this.fontSize(),a=this.lineHeight()*s,o=this.verticalAlign(),l=0,h=this.align(),c=this.getWidth(),u=this.letterSpacing(),f=this.fill(),g=this.textDecoration(),d=g.indexOf("underline")!==-1,m=g.indexOf("line-through")!==-1,y,b=0,b=a/2,p=0,C=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Ao),t.setAttr("textAlign",qh),o===Ao?l=(this.getHeight()-i*a-r*2)/2:o===cp&&(l=this.getHeight()-i*a-r*2),t.translate(r,l+r),y=0;y<i;y++){var p=0,C=0,S=n[y],A=S.text,E=S.width,O=S.lastInParagraph,x,L,R;if(t.save(),h===fp?p+=c-E-r*2:h===rp&&(p+=(c-E-r*2)/2),d&&(t.save(),t.beginPath(),t.moveTo(p,b+C+Math.round(s/2)),x=A.split(" ").length-1,L=x===0,R=h===Jn&&O&&!L?c-r*2:E,t.lineTo(p+Math.round(R),b+C+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=f,t.stroke(),t.restore()),m&&(t.save(),t.beginPath(),t.moveTo(p,b+C),x=A.split(" ").length-1,L=x===0,R=h===Jn&&O&&!L?c-r*2:E,t.lineTo(p+Math.round(R),b+C),t.lineWidth=s/15,t.strokeStyle=f,t.stroke(),t.restore()),u!==0||h===Jn){x=A.split(" ").length-1;for(var D=Xh(A),N=0;N<D.length;N++){var k=D[N];k===" "&&!O&&h===Jn&&(p+=(c-r*2-E)/x),this._partialTextX=p,this._partialTextY=b+C,this._partialText=k,t.fillStrokeShape(this),p+=this.measureSize(k).width+u}}else this._partialTextX=p,this._partialTextY=b+C,this._partialText=A,t.fillStrokeShape(this);t.restore(),i>1&&(b+=a)}}}_hitFunc(t){var n=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,n,i),t.closePath(),t.fillStrokeShape(this)}setText(t){var n=P._isString(t)?t:t==null?"":t+"";return this._setAttr(op,n),this}getWidth(){var t=this.attrs.width===wn||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var t=this.attrs.height===wn||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n=is(),i=this.fontSize(),r;return n.save(),n.font=this._getContextFont(),r=n.measureText(t),n.restore(),{width:r.width,height:i}}_getContextFont(){return this.fontStyle()+tr+this.fontVariant()+tr+(this.fontSize()+up)+vp(this.fontFamily())}_addTextLine(t){this.align()===Jn&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){var n=this.letterSpacing(),i=t.length;return is().measureText(t).width+(i?n*(i-1):0)}_setTextData(){var t=this.text().split(`
`),n=+this.fontSize(),i=0,r=this.lineHeight()*n,s=this.attrs.width,a=this.attrs.height,o=s!==wn&&s!==void 0,l=a!==wn&&a!==void 0,h=this.padding(),c=s-h*2,u=a-h*2,f=0,g=this.wrap(),d=g!==ko,m=g!==gp&&d,y=this.ellipsis();this.textArr=[],is().font=this._getContextFont();for(var b=y?this._getTextWidth(ns):0,p=0,C=t.length;p<C;++p){var S=t[p],A=this._getTextWidth(S);if(o&&A>c)for(;S.length>0;){for(var E=0,O=S.length,x="",L=0;E<O;){var R=E+O>>>1,D=S.slice(0,R+1),N=this._getTextWidth(D)+b;N<=c?(E=R+1,x=D,L=N):O=R}if(x){if(m){var k,T=S[x.length],F=T===tr||T===To;F&&L<=c?k=x.length:k=Math.max(x.lastIndexOf(tr),x.lastIndexOf(To))+1,k>0&&(E=k,x=x.slice(0,E),L=this._getTextWidth(x))}x=x.trimRight(),this._addTextLine(x),i=Math.max(i,L),f+=r;var I=this._shouldHandleEllipsis(f);if(I){this._tryToAddEllipsisToLastLine();break}if(S=S.slice(E),S=S.trimLeft(),S.length>0&&(A=this._getTextWidth(S),A<=c)){this._addTextLine(S),f+=r,i=Math.max(i,A);break}}else break}else this._addTextLine(S),f+=r,i=Math.max(i,A),this._shouldHandleEllipsis(f)&&p<C-1&&this._tryToAddEllipsisToLastLine();if(l&&f+r>u)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(t){var n=+this.fontSize(),i=this.lineHeight()*n,r=this.attrs.height,s=r!==wn&&r!==void 0,a=this.padding(),o=r-a*2,l=this.wrap(),h=l!==ko;return!h||s&&t+i>o}_tryToAddEllipsisToLastLine(){var t=this.attrs.width,n=t!==wn&&t!==void 0,i=this.padding(),r=t-i*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];if(!(!a||!s)){if(n){var o=this._getTextWidth(a.text+ns)<r;o||(a.text=a.text.slice(0,a.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+ns)}}getStrokeScaleEnabled(){return!0}}Ct.prototype._fillFunc=mp;Ct.prototype._strokeFunc=_p;Ct.prototype.className=lp;Ct.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];St(Ct);v.overWriteSetter(Ct,"width",ca());v.overWriteSetter(Ct,"height",ca());v.addGetterSetter(Ct,"fontFamily","Arial");v.addGetterSetter(Ct,"fontSize",12,U());v.addGetterSetter(Ct,"fontStyle",Qh);v.addGetterSetter(Ct,"fontVariant",Qh);v.addGetterSetter(Ct,"padding",0,U());v.addGetterSetter(Ct,"align",qh);v.addGetterSetter(Ct,"verticalAlign",hp);v.addGetterSetter(Ct,"lineHeight",1,U());v.addGetterSetter(Ct,"wrap",dp);v.addGetterSetter(Ct,"ellipsis",!1,oe());v.addGetterSetter(Ct,"letterSpacing",0,U());v.addGetterSetter(Ct,"text","",Vn());v.addGetterSetter(Ct,"textDecoration","");var yp="",Zh="normal";function tc(e){e.fillText(this.partialText,0,0)}function ec(e){e.strokeText(this.partialText,0,0)}class Lt extends B{constructor(t){super(t),this.dummyCanvas=P.createCanvasElement(),this.dataArray=[],this.dataArray=vt.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=vt.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),i=this.fill(),r=this.fontSize(),s=this.glyphInfo;n==="underline"&&t.beginPath();for(var a=0;a<s.length;a++){t.save();var o=s[a].p0;t.translate(o.x,o.y),t.rotate(s[a].rotation),this.partialText=s[a].text,t.fillStrokeShape(this),n==="underline"&&(a===0&&t.moveTo(0,r/2+1),t.lineTo(r,r/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=i,t.lineWidth=r/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var i=n[0].p0;t.moveTo(i.x,i.y)}for(var r=0;r<n.length;r++){var s=n[r].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Ct.prototype.setText.call(this,t)}_getContextFont(){return Ct.prototype._getContextFont.call(this)}_getTextSize(t){var n=this.dummyCanvas,i=n.getContext("2d");i.save(),i.font=this._getContextFont();var r=i.measureText(t);return i.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,n=this._getTextSize(this.attrs.text),i=this.letterSpacing(),r=this.align(),s=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var a=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);this.glyphInfo=[];for(var o=0,l=0;l<t.dataArray.length;l++)t.dataArray[l].pathLength>0&&(o+=t.dataArray[l].pathLength);var h=0;r==="center"&&(h=Math.max(0,o/2-a/2)),r==="right"&&(h=Math.max(0,o-a));for(var c=Xh(this.text()),u=this.text().split(" ").length-1,f,g,d,m=-1,y=0,b=function(){y=0;for(var N=t.dataArray,k=m+1;k<N.length;k++){if(N[k].pathLength>0)return m=k,N[k];N[k].command==="M"&&(f={x:N[k].points[0],y:N[k].points[1]})}return{}},p=function(N){var k=t._getTextSize(N).width+i;N===" "&&r==="justify"&&(k+=(o-a)/u);var T=0,F=0;for(g=void 0;Math.abs(k-T)/k>.01&&F<20;){F++;for(var I=T;d===void 0;)d=b(),d&&I+d.pathLength<k&&(I+=d.pathLength,d=void 0);if(Object.keys(d).length===0||f===void 0)return;var Y=!1;switch(d.command){case"L":vt.getLineLength(f.x,f.y,d.points[0],d.points[1])>k?g=vt.getPointOnLine(k,f.x,f.y,d.points[0],d.points[1],f.x,f.y):d=void 0;break;case"A":var Z=d.points[4],st=d.points[5],z=d.points[4]+st;y===0?y=Z+1e-8:k>T?y+=Math.PI/180*st/Math.abs(st):y-=Math.PI/360*st/Math.abs(st),(st<0&&y<z||st>=0&&y>z)&&(y=z,Y=!0),g=vt.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],y,d.points[6]);break;case"C":y===0?k>d.pathLength?y=1e-8:y=k/d.pathLength:k>T?y+=(k-T)/d.pathLength/2:y=Math.max(y-(T-k)/d.pathLength/2,0),y>1&&(y=1,Y=!0),g=vt.getPointOnCubicBezier(y,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case"Q":y===0?y=k/d.pathLength:k>T?y+=(k-T)/d.pathLength:y-=(T-k)/d.pathLength,y>1&&(y=1,Y=!0),g=vt.getPointOnQuadraticBezier(y,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3]);break}g!==void 0&&(T=vt.getLineLength(f.x,f.y,g.x,g.y)),Y&&(Y=!1,d=void 0)}},C="C",S=t._getTextSize(C).width+i,A=h/S-1,E=0;E<A&&(p(C),!(f===void 0||g===void 0));E++)f=g;for(var O=0;O<c.length&&(p(c[O]),!(f===void 0||g===void 0));O++){var x=vt.getLineLength(f.x,f.y,g.x,g.y),L=0;if(s)try{L=s(c[O-1],c[O])*this.fontSize()}catch{L=0}f.x+=L,g.x+=L,this.textWidth+=L;var R=vt.getPointOnLine(L+x/2,f.x,f.y,g.x,g.y),D=Math.atan2(g.y-f.y,g.x-f.x);this.glyphInfo.push({transposeX:R.x,transposeY:R.y,text:c[O],rotation:D,p0:f,p1:g}),f=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var n=t[0]||0,i=t[0]||0,r=t[1]||0,s=t[1]||0,a,o,l=0;l<t.length/2;l++)a=t[l*2],o=t[l*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,o),s=Math.max(s,o);var h=this.fontSize();return{x:n-h/2,y:r-h/2,width:i-n+h,height:s-r+h}}}Lt.prototype._fillFunc=tc;Lt.prototype._strokeFunc=ec;Lt.prototype._fillFuncHit=tc;Lt.prototype._strokeFuncHit=ec;Lt.prototype.className="TextPath";Lt.prototype._attrsAffectingSize=["text","fontSize","data"];St(Lt);v.addGetterSetter(Lt,"data");v.addGetterSetter(Lt,"fontFamily","Arial");v.addGetterSetter(Lt,"fontSize",12,U());v.addGetterSetter(Lt,"fontStyle",Zh);v.addGetterSetter(Lt,"align","left");v.addGetterSetter(Lt,"letterSpacing",0,U());v.addGetterSetter(Lt,"textBaseline","middle");v.addGetterSetter(Lt,"fontVariant",Zh);v.addGetterSetter(Lt,"text",yp);v.addGetterSetter(Lt,"textDecoration",null);v.addGetterSetter(Lt,"kerningFunc",null);var nc="tr-konva",Cp=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(e=>e+`.${nc}`).join(" "),Mo="nodesRect",Sp=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],wp={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const xp="ontouchstart"in q._global;function Pp(e,t){if(e==="rotater")return"crosshair";t+=P.degToRad(wp[e]||0);var n=(P.radToDeg(t)%360+360)%360;return P._inRange(n,315+22.5,360)||P._inRange(n,0,22.5)?"ns-resize":P._inRange(n,45-22.5,45+22.5)?"nesw-resize":P._inRange(n,90-22.5,90+22.5)?"ew-resize":P._inRange(n,135-22.5,135+22.5)?"nwse-resize":P._inRange(n,180-22.5,180+22.5)?"ns-resize":P._inRange(n,225-22.5,225+22.5)?"nesw-resize":P._inRange(n,270-22.5,270+22.5)?"ew-resize":P._inRange(n,315-22.5,315+22.5)?"nwse-resize":(P.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var br=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Oo=1e8;function Ep(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function ic(e,t,n){const i=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),r=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return Object.assign(Object.assign({},e),{rotation:e.rotation+t,x:i,y:r})}function Tp(e,t){const n=Ep(e);return ic(e,t,n)}function Ap(e,t,n){let i=t;for(let r=0;r<e.length;r++){const s=q.getAngle(e[r]),a=Math.abs(s-t)%(Math.PI*2);Math.min(a,Math.PI*2-a)<n&&(i=s)}return i}class dt extends Un{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Cp,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return P.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return nc+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(s,r),i.on(Sp.map(a=>a+`.${this._getEventNamespace()}`).join(" "),r),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(i)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,i=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(i,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const r=t.getAbsolutePosition(),s=r.x-n.x,a=r.y-n.y;this.nodes().forEach(o=>{if(o===t||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Mo),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Mo,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),i){var r=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=t.getAbsoluteScale(i),a=t.getAbsolutePosition(i),o=r.x*s.x-t.offsetX()*s.x,l=r.y*s.y-t.offsetY()*s.y;const h=(q.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:a.x+o*Math.cos(h)+l*Math.sin(-h),y:a.y+l*Math.cos(h)+o*Math.sin(h),width:r.width*s.x,height:r.height*s.y,rotation:h};return ic(c,-q.getAngle(n),{x:0,y:0})}__getNodeRect(){var t=this.getNode();if(!t)return{x:-Oo,y:-Oo,width:0,height:0,rotation:0};const n=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var u=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],f=h.getAbsoluteTransform();u.forEach(function(g){var d=f.point(g);n.push(d)})});const i=new Yt;i.rotate(-q.getAngle(this.rotation()));var r,s,a,o;n.forEach(function(h){var c=i.point(h);r===void 0&&(r=a=c.x,s=o=c.y),r=Math.min(r,c.x),s=Math.min(s,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y)}),i.invert();const l=i.point({x:r,y:s});return{x:l.x,y:l.y,width:a-r,height:o-s,rotation:q.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),br.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")}_createAnchor(t){var n=new Ii({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:xp?10:"auto"}),i=this;n.on("mousedown touchstart",function(r){i._handleMouseDown(r)}),n.on("dragstart",r=>{n.stopDrag(),r.cancelBubble=!0}),n.on("dragend",r=>{r.cancelBubble=!0}),n.on("mouseenter",()=>{var r=q.getAngle(this.rotation()),s=Pp(t,r);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var t=new B({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var i=this.getParent(),r=i.padding();n.beginPath(),n.rect(-r,-r,this.width()+r*2,this.height()+r*2),n.moveTo(this.width()/2,-r),i.rotateEnabled()&&n.lineTo(this.width()/2,-i.rotateAnchorOffset()*P._sign(this.height())-r),n.fillStrokeShape(this)},hitFunc:(n,i)=>{if(!!this.shouldOverdrawWholeArea()){var r=this.padding();n.beginPath(),n.rect(-r,-r,i.width()+r*2,i.height()+r*2),n.fillStrokeShape(i)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),i=n.width,r=n.height,s=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/s),this.cos=Math.abs(i/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var a=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){var n,i,r,s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(t);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const h=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(h.x===c.x&&h.y===c.y)){if(this._movingAnchorName==="rotater"){var u=this._getNodeRect();n=s.x()-u.width/2,i=-s.y()+u.height/2;let N=Math.atan2(-i,n)+Math.PI/2;u.height<0&&(N-=Math.PI);var f=q.getAngle(this.rotation());const k=f+N,T=q.getAngle(this.rotationSnapTolerance()),I=Ap(this.rotationSnaps(),k,T)-u.rotation,Y=Tp(u,I);this._fitNodesInto(Y,t);return}var g=this.keepRatio()||t.shiftKey,p=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(d.y-s.y(),2));var m=this.findOne(".top-left").x()>d.x?-1:1,y=this.findOne(".top-left").y()>d.y?-1:1;n=r*this.cos*m,i=r*this.sin*y,this.findOne(".top-left").x(d.x-n),this.findOne(".top-left").y(d.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(d.y-s.y(),2));var m=this.findOne(".top-right").x()<d.x?-1:1,y=this.findOne(".top-right").y()>d.y?-1:1;n=r*this.cos*m,i=r*this.sin*y,this.findOne(".top-right").x(d.x+n),this.findOne(".top-right").y(d.y-i)}var b=s.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(d.x-s.x(),2)+Math.pow(s.y()-d.y,2));var m=d.x<s.x()?-1:1,y=s.y()<d.y?-1:1;n=r*this.cos*m,i=r*this.sin*y,s.x(d.x-n),s.y(d.y+i)}b=s.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var d=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(s.x()-d.x,2)+Math.pow(s.y()-d.y,2));var m=this.findOne(".bottom-right").x()<d.x?-1:1,y=this.findOne(".bottom-right").y()<d.y?-1:1;n=r*this.cos*m,i=r*this.sin*y,this.findOne(".bottom-right").x(d.x+n),this.findOne(".bottom-right").y(d.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var p=this.centeredScaling()||t.altKey;if(p){var C=this.findOne(".top-left"),S=this.findOne(".bottom-right"),A=C.x(),E=C.y(),O=this.getWidth()-S.x(),x=this.getHeight()-S.y();S.move({x:-A,y:-E}),C.move({x:O,y:x})}var L=this.findOne(".top-left").getAbsolutePosition();n=L.x,i=L.y;var R=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:R,height:D,rotation:q.getAngle(this.rotation())},t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(i=>{i._fire("transformend",{evt:t,target:i})}),this._movingAnchorName=null}}_fitNodesInto(t,n){var i=this._getNodeRect();const r=1;if(P._inRange(t.width,-this.padding()*2-r,r)){this.update();return}if(P._inRange(t.height,-this.padding()*2-r,r)){this.update();return}const s=this.flipEnabled();var a=new Yt;if(a.rotate(q.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const u=a.point({x:-this.padding()*2,y:0});if(t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,!s){this.update();return}}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const u=a.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const u=a.point({x:0,y:-this.padding()*2});if(t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const u=a.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const u=this.boundBoxFunc()(i,t);u?t=u:P.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,l=new Yt;l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.width/o,i.height/o);const h=new Yt;h.translate(t.x,t.y),h.rotate(t.rotation),h.scale(t.width/o,t.height/o);const c=h.multiply(l.invert());this._nodes.forEach(u=>{var f;const g=u.getParent().getAbsoluteTransform(),d=u.getTransform().copy();d.translate(u.offsetX(),u.offsetY());const m=new Yt;m.multiply(g.copy().invert()).multiply(c).multiply(g).multiply(d);const y=m.decompose();u.setAttrs(y),this._fire("transform",{evt:n,target:u}),u._fire("transform",{evt:n,target:u}),(f=u.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(P._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t,n=this._getNodeRect();this.rotation(P._getRotation(n.rotation));var i=n.width,r=n.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(h=>{h.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*P._sign(r)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Un.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return V.prototype.toObject.call(this)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function kp(e){return e instanceof Array||P.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){br.indexOf(t)===-1&&P.warn("Unknown anchor name: "+t+". Available names are: "+br.join(", "))}),e||[]}dt.prototype.className="Transformer";St(dt);v.addGetterSetter(dt,"enabledAnchors",br,kp);v.addGetterSetter(dt,"flipEnabled",!0,oe());v.addGetterSetter(dt,"resizeEnabled",!0);v.addGetterSetter(dt,"anchorSize",10,U());v.addGetterSetter(dt,"rotateEnabled",!0);v.addGetterSetter(dt,"rotationSnaps",[]);v.addGetterSetter(dt,"rotateAnchorOffset",50,U());v.addGetterSetter(dt,"rotationSnapTolerance",5,U());v.addGetterSetter(dt,"borderEnabled",!0);v.addGetterSetter(dt,"anchorStroke","rgb(0, 161, 255)");v.addGetterSetter(dt,"anchorStrokeWidth",1,U());v.addGetterSetter(dt,"anchorFill","white");v.addGetterSetter(dt,"anchorCornerRadius",0,U());v.addGetterSetter(dt,"borderStroke","rgb(0, 161, 255)");v.addGetterSetter(dt,"borderStrokeWidth",1,U());v.addGetterSetter(dt,"borderDash");v.addGetterSetter(dt,"keepRatio",!0);v.addGetterSetter(dt,"centeredScaling",!1);v.addGetterSetter(dt,"ignoreStroke",!1);v.addGetterSetter(dt,"padding",0,U());v.addGetterSetter(dt,"node");v.addGetterSetter(dt,"nodes");v.addGetterSetter(dt,"boundBoxFunc");v.addGetterSetter(dt,"anchorDragBoundFunc");v.addGetterSetter(dt,"shouldOverdrawWholeArea",!1);v.addGetterSetter(dt,"useSingleNodeRotation",!0);v.backCompat(dt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Te extends B{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,q.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Te.prototype.className="Wedge";Te.prototype._centroid=!0;Te.prototype._attrsAffectingSize=["radius"];St(Te);v.addGetterSetter(Te,"radius",0,U());v.addGetterSetter(Te,"angle",0,U());v.addGetterSetter(Te,"clockwise",!1);v.backCompat(Te,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Ro(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Mp=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Op=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Rp(e,t){var n=e.data,i=e.width,r=e.height,s,a,o,l,h,c,u,f,g,d,m,y,b,p,C,S,A,E,O,x,L,R,D,N,k=t+t+1,T=i-1,F=r-1,I=t+1,Y=I*(I+1)/2,Z=new Ro,st=null,z=Z,it=null,at=null,gt=Mp[t],Ft=Op[t];for(o=1;o<k;o++)z=z.next=new Ro,o===I&&(st=z);for(z.next=Z,u=c=0,a=0;a<r;a++){for(S=A=E=O=f=g=d=m=0,y=I*(x=n[c]),b=I*(L=n[c+1]),p=I*(R=n[c+2]),C=I*(D=n[c+3]),f+=Y*x,g+=Y*L,d+=Y*R,m+=Y*D,z=Z,o=0;o<I;o++)z.r=x,z.g=L,z.b=R,z.a=D,z=z.next;for(o=1;o<I;o++)l=c+((T<o?T:o)<<2),f+=(z.r=x=n[l])*(N=I-o),g+=(z.g=L=n[l+1])*N,d+=(z.b=R=n[l+2])*N,m+=(z.a=D=n[l+3])*N,S+=x,A+=L,E+=R,O+=D,z=z.next;for(it=Z,at=st,s=0;s<i;s++)n[c+3]=D=m*gt>>Ft,D!==0?(D=255/D,n[c]=(f*gt>>Ft)*D,n[c+1]=(g*gt>>Ft)*D,n[c+2]=(d*gt>>Ft)*D):n[c]=n[c+1]=n[c+2]=0,f-=y,g-=b,d-=p,m-=C,y-=it.r,b-=it.g,p-=it.b,C-=it.a,l=u+((l=s+t+1)<T?l:T)<<2,S+=it.r=n[l],A+=it.g=n[l+1],E+=it.b=n[l+2],O+=it.a=n[l+3],f+=S,g+=A,d+=E,m+=O,it=it.next,y+=x=at.r,b+=L=at.g,p+=R=at.b,C+=D=at.a,S-=x,A-=L,E-=R,O-=D,at=at.next,c+=4;u+=i}for(s=0;s<i;s++){for(A=E=O=S=g=d=m=f=0,c=s<<2,y=I*(x=n[c]),b=I*(L=n[c+1]),p=I*(R=n[c+2]),C=I*(D=n[c+3]),f+=Y*x,g+=Y*L,d+=Y*R,m+=Y*D,z=Z,o=0;o<I;o++)z.r=x,z.g=L,z.b=R,z.a=D,z=z.next;for(h=i,o=1;o<=t;o++)c=h+s<<2,f+=(z.r=x=n[c])*(N=I-o),g+=(z.g=L=n[c+1])*N,d+=(z.b=R=n[c+2])*N,m+=(z.a=D=n[c+3])*N,S+=x,A+=L,E+=R,O+=D,z=z.next,o<F&&(h+=i);for(c=s,it=Z,at=st,a=0;a<r;a++)l=c<<2,n[l+3]=D=m*gt>>Ft,D>0?(D=255/D,n[l]=(f*gt>>Ft)*D,n[l+1]=(g*gt>>Ft)*D,n[l+2]=(d*gt>>Ft)*D):n[l]=n[l+1]=n[l+2]=0,f-=y,g-=b,d-=p,m-=C,y-=it.r,b-=it.g,p-=it.b,C-=it.a,l=s+((l=a+I)<F?l:F)*i<<2,f+=S+=it.r=n[l],g+=A+=it.g=n[l+1],d+=E+=it.b=n[l+2],m+=O+=it.a=n[l+3],it=it.next,y+=x=at.r,b+=L=at.g,p+=R=at.b,C+=D=at.a,S-=x,A-=L,E-=R,O-=D,at=at.next,c+=i}}const Lp=function(t){var n=Math.round(this.blurRadius());n>0&&Rp(t,n)};v.addGetterSetter(V,"blurRadius",0,U(),v.afterSetFilter);const Ip=function(e){var t=this.brightness()*255,n=e.data,i=n.length,r;for(r=0;r<i;r+=4)n[r]+=t,n[r+1]+=t,n[r+2]+=t};v.addGetterSetter(V,"brightness",0,U(),v.afterSetFilter);const Dp=function(e){var t=Math.pow((this.contrast()+100)/100,2),n=e.data,i=n.length,r=150,s=150,a=150,o;for(o=0;o<i;o+=4)r=n[o],s=n[o+1],a=n[o+2],r/=255,r-=.5,r*=t,r+=.5,r*=255,s/=255,s-=.5,s*=t,s+=.5,s*=255,a/=255,a-=.5,a*=t,a+=.5,a*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,n[o]=r,n[o+1]=s,n[o+2]=a};v.addGetterSetter(V,"contrast",0,U(),v.afterSetFilter);const Np=function(e){var t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,i=this.embossDirection(),r=this.embossBlend(),s=0,a=0,o=e.data,l=e.width,h=e.height,c=l*4,u=h;switch(i){case"top-left":s=-1,a=-1;break;case"top":s=-1,a=0;break;case"top-right":s=-1,a=1;break;case"right":s=0,a=1;break;case"bottom-right":s=1,a=1;break;case"bottom":s=1,a=0;break;case"bottom-left":s=1,a=-1;break;case"left":s=0,a=-1;break;default:P.error("Unknown emboss direction: "+i)}do{var f=(u-1)*c,g=s;u+g<1&&(g=0),u+g>h&&(g=0);var d=(u-1+g)*l*4,m=l;do{var y=f+(m-1)*4,b=a;m+b<1&&(b=0),m+b>l&&(b=0);var p=d+(m-1+b)*4,C=o[y]-o[p],S=o[y+1]-o[p+1],A=o[y+2]-o[p+2],E=C,O=E>0?E:-E,x=S>0?S:-S,L=A>0?A:-A;if(x>O&&(E=S),L>O&&(E=A),E*=t,r){var R=o[y]+E,D=o[y+1]+E,N=o[y+2]+E;o[y]=R>255?255:R<0?0:R,o[y+1]=D>255?255:D<0?0:D,o[y+2]=N>255?255:N<0?0:N}else{var k=n-E;k<0?k=0:k>255&&(k=255),o[y]=o[y+1]=o[y+2]=k}}while(--m)}while(--u)};v.addGetterSetter(V,"embossStrength",.5,U(),v.afterSetFilter);v.addGetterSetter(V,"embossWhiteLevel",.5,U(),v.afterSetFilter);v.addGetterSetter(V,"embossDirection","top-left",null,v.afterSetFilter);v.addGetterSetter(V,"embossBlend",!1,null,v.afterSetFilter);function rs(e,t,n,i,r){var s=n-t,a=r-i,o;return s===0?i+a/2:a===0?i:(o=(e-t)/s,o=a*o+i,o)}const Fp=function(e){var t=e.data,n=t.length,i=t[0],r=i,s,a=t[1],o=a,l,h=t[2],c=h,u,f,g=this.enhance();if(g!==0){for(f=0;f<n;f+=4)s=t[f+0],s<i?i=s:s>r&&(r=s),l=t[f+1],l<a?a=l:l>o&&(o=l),u=t[f+2],u<h?h=u:u>c&&(c=u);r===i&&(r=255,i=0),o===a&&(o=255,a=0),c===h&&(c=255,h=0);var d,m,y,b,p,C,S,A,E;for(g>0?(m=r+g*(255-r),y=i-g*(i-0),p=o+g*(255-o),C=a-g*(a-0),A=c+g*(255-c),E=h-g*(h-0)):(d=(r+i)*.5,m=r+g*(r-d),y=i+g*(i-d),b=(o+a)*.5,p=o+g*(o-b),C=a+g*(a-b),S=(c+h)*.5,A=c+g*(c-S),E=h+g*(h-S)),f=0;f<n;f+=4)t[f+0]=rs(t[f+0],i,r,y,m),t[f+1]=rs(t[f+1],a,o,C,p),t[f+2]=rs(t[f+2],h,c,E,A)}};v.addGetterSetter(V,"enhance",0,U(),v.afterSetFilter);const Gp=function(e){var t=e.data,n=t.length,i,r;for(i=0;i<n;i+=4)r=.34*t[i]+.5*t[i+1]+.16*t[i+2],t[i]=r,t[i+1]=r,t[i+2]=r};v.addGetterSetter(V,"hue",0,U(),v.afterSetFilter);v.addGetterSetter(V,"saturation",0,U(),v.afterSetFilter);v.addGetterSetter(V,"luminance",0,U(),v.afterSetFilter);const Hp=function(e){var t=e.data,n=t.length,i=1,r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o,l=i*r*Math.cos(s*Math.PI/180),h=i*r*Math.sin(s*Math.PI/180),c=.299*i+.701*l+.167*h,u=.587*i-.587*l+.33*h,f=.114*i-.114*l-.497*h,g=.299*i-.299*l-.328*h,d=.587*i+.413*l+.035*h,m=.114*i-.114*l+.293*h,y=.299*i-.3*l+1.25*h,b=.587*i-.586*l-1.05*h,p=.114*i+.886*l-.2*h,C,S,A,E;for(o=0;o<n;o+=4)C=t[o+0],S=t[o+1],A=t[o+2],E=t[o+3],t[o+0]=c*C+u*S+f*A+a,t[o+1]=g*C+d*S+m*A+a,t[o+2]=y*C+b*S+p*A+a,t[o+3]=E},Bp=function(e){var t=e.data,n=t.length,i=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a,o=i*r*Math.cos(s*Math.PI/180),l=i*r*Math.sin(s*Math.PI/180),h=.299*i+.701*o+.167*l,c=.587*i-.587*o+.33*l,u=.114*i-.114*o-.497*l,f=.299*i-.299*o-.328*l,g=.587*i+.413*o+.035*l,d=.114*i-.114*o+.293*l,m=.299*i-.3*o+1.25*l,y=.587*i-.586*o-1.05*l,b=.114*i+.886*o-.2*l,p,C,S,A;for(a=0;a<n;a+=4)p=t[a+0],C=t[a+1],S=t[a+2],A=t[a+3],t[a+0]=h*p+c*C+u*S,t[a+1]=f*p+g*C+d*S,t[a+2]=m*p+y*C+b*S,t[a+3]=A};v.addGetterSetter(V,"hue",0,U(),v.afterSetFilter);v.addGetterSetter(V,"saturation",0,U(),v.afterSetFilter);v.addGetterSetter(V,"value",0,U(),v.afterSetFilter);const jp=function(e){var t=e.data,n=t.length,i;for(i=0;i<n;i+=4)t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]};var Up=function(e,t,n){var i=e.data,r=t.data,s=e.width,a=e.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,h,c,u,f=0,g=0,d=0,m=0,y,b=Math.sqrt(o*o+l*l);c=s-o,u=a-l,y=Math.sqrt(c*c+u*u),b=y>b?y:b;var p=a,C=s,S,A,E=360/C*Math.PI/180,O,x;for(A=0;A<C;A+=1)for(O=Math.sin(A*E),x=Math.cos(A*E),S=0;S<p;S+=1)c=Math.floor(o+b*S/p*x),u=Math.floor(l+b*S/p*O),h=(u*s+c)*4,f=i[h+0],g=i[h+1],d=i[h+2],m=i[h+3],h=(A+S*s)*4,r[h+0]=f,r[h+1]=g,r[h+2]=d,r[h+3]=m},Vp=function(e,t,n){var i=e.data,r=t.data,s=e.width,a=e.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2,h,c,u,f,g,d=0,m=0,y=0,b=0,p,C=Math.sqrt(o*o+l*l);c=s-o,u=a-l,p=Math.sqrt(c*c+u*u),C=p>C?p:C;var S=a,A=s,E,O,x=n.polarRotation||0,L,R;for(c=0;c<s;c+=1)for(u=0;u<a;u+=1)f=c-o,g=u-l,E=Math.sqrt(f*f+g*g)*S/C,O=(Math.atan2(g,f)*180/Math.PI+360+x)%360,O=O*A/360,L=Math.floor(O),R=Math.floor(E),h=(R*s+L)*4,d=i[h+0],m=i[h+1],y=i[h+2],b=i[h+3],h=(u*s+c)*4,r[h+0]=d,r[h+1]=m,r[h+2]=y,r[h+3]=b};const Wp=function(e){var t=e.width,n=e.height,i,r,s,a,o,l,h,c,u,f,g=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),m=Math.floor(t*(d%360)/360);if(!(g<1)){var y=P.createCanvasElement();y.width=t,y.height=n;var b=y.getContext("2d").getImageData(0,0,t,n);Up(e,b,{polarCenterX:t/2,polarCenterY:n/2});for(var p=t/Math.pow(2,g);p<=8;)p=p*2,g-=1;p=Math.ceil(p);var C=p,S=0,A=C,E=1;for(m+p>t&&(S=C,A=0,E=-1),r=0;r<n;r+=1)for(i=S;i!==A;i+=E)s=Math.round(i+m)%t,u=(t*r+s)*4,o=b.data[u+0],l=b.data[u+1],h=b.data[u+2],c=b.data[u+3],f=(t*r+i)*4,b.data[f+0]=o,b.data[f+1]=l,b.data[f+2]=h,b.data[f+3]=c;for(r=0;r<n;r+=1)for(C=Math.floor(p),a=0;a<g;a+=1){for(i=0;i<C+1;i+=1)u=(t*r+i)*4,o=b.data[u+0],l=b.data[u+1],h=b.data[u+2],c=b.data[u+3],f=(t*r+C*2-i-1)*4,b.data[f+0]=o,b.data[f+1]=l,b.data[f+2]=h,b.data[f+3]=c;C*=2}Vp(b,e,{polarRotation:0})}};v.addGetterSetter(V,"kaleidoscopePower",2,U(),v.afterSetFilter);v.addGetterSetter(V,"kaleidoscopeAngle",0,U(),v.afterSetFilter);function nr(e,t,n){var i=(n*e.width+t)*4,r=[];return r.push(e.data[i++],e.data[i++],e.data[i++],e.data[i++]),r}function Zn(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function Kp(e){for(var t=[0,0,0],n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function zp(e,t){var n=nr(e,0,0),i=nr(e,e.width-1,0),r=nr(e,0,e.height-1),s=nr(e,e.width-1,e.height-1),a=t||10;if(Zn(n,i)<a&&Zn(i,s)<a&&Zn(s,r)<a&&Zn(r,n)<a){for(var o=Kp([i,n,s,r]),l=[],h=0;h<e.width*e.height;h++){var c=Zn(o,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<a?0:255}return l}}function $p(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function Yp(e,t,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;o<n;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<r;u++)for(var f=0;f<r;f++){var g=o+u-s,d=l+f-s;if(g>=0&&g<n&&d>=0&&d<t){var m=g*t+d,y=i[u*r+f];c+=e[m]*y}}a[h]=c===255*8?255:0}return a}function Xp(e,t,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;o<n;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<r;u++)for(var f=0;f<r;f++){var g=o+u-s,d=l+f-s;if(g>=0&&g<n&&d>=0&&d<t){var m=g*t+d,y=i[u*r+f];c+=e[m]*y}}a[h]=c>=255*4?255:0}return a}function qp(e,t,n){for(var i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[],o=0;o<n;o++)for(var l=0;l<t;l++){for(var h=o*t+l,c=0,u=0;u<r;u++)for(var f=0;f<r;f++){var g=o+u-s,d=l+f-s;if(g>=0&&g<n&&d>=0&&d<t){var m=g*t+d,y=i[u*r+f];c+=e[m]*y}}a[h]=c}return a}const Qp=function(e){var t=this.threshold(),n=zp(e,t);return n&&(n=Yp(n,e.width,e.height),n=Xp(n,e.width,e.height),n=qp(n,e.width,e.height),$p(e,n)),e};v.addGetterSetter(V,"threshold",0,U(),v.afterSetFilter);const Jp=function(e){var t=this.noise()*255,n=e.data,i=n.length,r=t/2,s;for(s=0;s<i;s+=4)n[s+0]+=r-2*r*Math.random(),n[s+1]+=r-2*r*Math.random(),n[s+2]+=r-2*r*Math.random()};v.addGetterSetter(V,"noise",.2,U(),v.afterSetFilter);const Zp=function(e){var t=Math.ceil(this.pixelSize()),n=e.width,i=e.height,r,s,a,o,l,h,c,u=Math.ceil(n/t),f=Math.ceil(i/t),g,d,m,y,b,p,C,S=e.data;if(t<=0){P.error("pixelSize value can not be <= 0");return}for(b=0;b<u;b+=1)for(p=0;p<f;p+=1){for(o=0,l=0,h=0,c=0,g=b*t,d=g+t,m=p*t,y=m+t,C=0,r=g;r<d;r+=1)if(!(r>=n))for(s=m;s<y;s+=1)s>=i||(a=(n*s+r)*4,o+=S[a+0],l+=S[a+1],h+=S[a+2],c+=S[a+3],C+=1);for(o=o/C,l=l/C,h=h/C,c=c/C,r=g;r<d;r+=1)if(!(r>=n))for(s=m;s<y;s+=1)s>=i||(a=(n*s+r)*4,S[a+0]=o,S[a+1]=l,S[a+2]=h,S[a+3]=c)}};v.addGetterSetter(V,"pixelSize",8,U(),v.afterSetFilter);const tv=function(e){var t=Math.round(this.levels()*254)+1,n=e.data,i=n.length,r=255/t,s;for(s=0;s<i;s+=1)n[s]=Math.floor(n[s]/r)*r};v.addGetterSetter(V,"levels",.5,U(),v.afterSetFilter);const ev=function(e){var t=e.data,n=t.length,i=this.red(),r=this.green(),s=this.blue(),a,o;for(a=0;a<n;a+=4)o=(.34*t[a]+.5*t[a+1]+.16*t[a+2])/255,t[a]=o*i,t[a+1]=o*r,t[a+2]=o*s,t[a+3]=t[a+3]};v.addGetterSetter(V,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(V,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(V,"blue",0,Eh,v.afterSetFilter);const nv=function(e){var t=e.data,n=t.length,i=this.red(),r=this.green(),s=this.blue(),a=this.alpha(),o,l;for(o=0;o<n;o+=4)l=1-a,t[o]=i*a+t[o]*l,t[o+1]=r*a+t[o+1]*l,t[o+2]=s*a+t[o+2]*l};v.addGetterSetter(V,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(V,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});v.addGetterSetter(V,"blue",0,Eh,v.afterSetFilter);v.addGetterSetter(V,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const iv=function(e){var t=e.data,n=t.length,i,r,s,a;for(i=0;i<n;i+=4)r=t[i+0],s=t[i+1],a=t[i+2],t[i+0]=Math.min(255,r*.393+s*.769+a*.189),t[i+1]=Math.min(255,r*.349+s*.686+a*.168),t[i+2]=Math.min(255,r*.272+s*.534+a*.131)},rv=function(e){var t=e.data,n=e.width,i=e.height,r=n*4,s=i;do{var a=(s-1)*r,o=n;do{var l=a+(o-1)*4,h=t[l],c=t[l+1],u=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),u>127&&(u=255-u),t[l]=h,t[l+1]=c,t[l+2]=u}while(--o)}while(--s)},sv=function(e){var t=this.threshold()*255,n=e.data,i=n.length,r;for(r=0;r<i;r+=1)n[r]=n[r]<t?0:255};v.addGetterSetter(V,"threshold",.5,U(),v.afterSetFilter);const rc=xo.Util._assign(xo,{Arc:Pe,Arrow:vn,Circle:Wn,Ellipse:Ye,Image:le,Label:ga,Tag:mn,Line:Ee,Path:vt,Rect:Ii,RegularPolygon:_n,Ring:bn,Sprite:me,Star:Xe,Text:Ct,TextPath:Lt,Transformer:dt,Wedge:Te,Filters:{Blur:Lp,Brighten:Ip,Contrast:Dp,Emboss:Np,Enhance:Fp,Grayscale:Gp,HSL:Hp,HSV:Bp,Invert:jp,Kaleidoscope:Wp,Mask:Qp,Noise:Jp,Pixelate:Zp,Posterize:tv,RGB:ev,RGBA:nv,Sepia:iv,Solarize:rv,Threshold:sv}}),av=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"})),ov=[{label:"Physicsworks",url:"https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c4/Physicsworks.ogv/Physicsworks.ogv.240p.vp9.webm"},{label:"8K + 60P HEVC Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_8k60P_bilibili_1.mp4"},{label:"8K + 60P HEVC Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_8k60P_bilibili_2.mp4"},{label:"8K + 60P HEVC Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_8k60P_bilibili_3.mp4"},{label:"8K + 30P HEVC Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_8k30P.mp4"},{label:"8K + 10P HEVC Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_8k10P.mp4"},{label:"5.7K + 60P HEVC Main10 Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_5.7k60P.mp4"},{label:"Dobly Vision Profile 5 + 4K + 60P HEVC Main10 Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k60P_dolby_vision_profile5_1.mp4"},{label:"Dobly Vision Profile 5 + 4K + 24P HEVC Main10 Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_dolby_vision_profile5_1.mp4"},{label:"Dobly Vision Profile 5 + 2K + 60P HEVC Main10 Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2K60P_dolby_vision_profile5_1.mp4"},{label:"PQ + 4K + 60P HEVC Main10 Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k60P_main10_hdr10.mov"},{label:"PQ + 4K + 60P HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K60P_bilibili_pq_1.mp4"},{label:"PQ + 4K + 60P HEVC Main10 Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K60P_bilibili_pq_2.mp4"},{label:"PQ + 4K + 60P HEVC Main10 Video 4",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K60P_bilibili_pq_4.mp4"},{label:"PQ + 4K + 60P HEVC Main10 Video 5",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K60P_bilibili_pq_5.mp4"},{label:"HLG + 4K + 60P HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K60P_bilibili_hlg_1.mp4"},{label:"DJI Mavic3 + 4K + 60P HEVC Main Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k60P_main_dji_mavic3.mov"},{label:"EOS R5C + 4K + 60P + 10bit + 422 + HEVC Rext Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k60P_rext_10bit_422_eos_r5c_1.mp4"},{label:"EOS R5C + 4K + 60P + 10bit + 420 + HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k60P_main10_10bit_420_eos_r5c_1.mp4"},{label:"EOS R6 + 4K + 50P + 10bit + 422 + HEVC Rext Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k50P.mp4"},{label:"4K + 30P + All Intra + 8bit HEVC Rext Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_all_i.mp4"},{label:"PQ + 4K + 24P + 12bit + 444 + HEVC Rext Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_rext_12bit_444_pq.mp4"},{label:"4K + 24P + 12bit + 444 + HEVC Rext Video",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4K24P_rext_12bit_444_yuv444p12le_1.mp4"},{label:"2K + 24P + 10bit + 444 + HEVC Rext Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2K24P_rext_10bit_444_yuv444p10le_1.mp4"},{label:"2K + 24P + 10bit + 444 + HEVC Rext Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2K24P_rext_10bit_444_yuv444p10le_2.mp4"},{label:"2K + 24P + 10bit + 444 + HEVC Rext Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2K24P_rext_10bit_444_yuv444p10le_3.mp4"},{label:"2K + 24P + 10bit + 444 + HEVC Rext Video 4",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2K24P_rext_10bit_444_yuv444p10le_4.mp4"},{label:"PQ + 4K + 30P + 10bit HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k30P_main10_1.mp4"},{label:"4K + 30P + 8bit HEVC Main Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k30P_main_2.mp4"},{label:"4K + 30P + 8bit HEVC Main Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k30P_main_3.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_1.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_2.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_3.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 4",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_4.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 5",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_5.mp4"},{label:"HLG + 4K + 25P + 10bit HEVC Main10 Video 6",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main10_6.mp4"},{label:"4K + 25P + HEVC Main Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main_1.mp4"},{label:"4K + 25P + HEVC Main Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k25P_main_2.mp4"},{label:"PQ + 4K + 24P + 10bit HEVC Main10 Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_hdr10_2.mp4"},{label:"PQ + 4K + 24P + 10bit HEVC Main10 Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_hdr10_3.mp4"},{label:"PQ + 4K + 24P + 10bit HEVC Main10 Video 4",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_hdr10_4.mp4"},{label:"4K + 24P + 10bit HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_1.mp4"},{label:"4K + 24P + 10bit HEVC Main10 Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_2.mp4"},{label:"4K + 24P + 10bit HEVC Main10 Video 3",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_4k24P_main10_3.mp4"},{label:"2K + 24P + HEVC Main10 Video 1",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_main10.mp4"},{label:"2K + 24P + HEVC Main10 Video 2",url:"https://lf3-cdn-tos.bytegoofy.com/obj/tcs-client/resources/hevc_2k24P_main10.mp4"}];function lv(e="MegSpot"){return`${e}-${new Date().getTime()}-${Math.random()}`}function hv(){try{return`${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g,e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16))}catch{return lv()}}const cv=e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),uv=e=>(t,n,i)=>{const r=e(t,n),s=e(t,i);return r!==null&&s!==null?r<s?r:s:r!==null?r:s!==null?s:null},fv=e=>({acceleration:t,position:n,velocity:i},r)=>{const s=e(n,i,t,r);if(s.length===0)return null;if(s.length===1)return s[0]>0?s[0]:null;if(s.length===2){if(s[1]<0)return null;if(s[0]>0)return s[0];if(s[1]>0)return s[1]}return null},dv=e=>(t,n,i)=>{const r=e(t,n,i);return r===null||r===Number.POSITIVE_INFINITY?null:r},gv=(e,t)=>class{constructor(){this._listeners=new WeakMap,this._nativeEventTarget=e()}addEventListener(i,r,s){if(r!==null){let a=this._listeners.get(r);a===void 0&&(a=t(this,r),typeof r=="function"&&this._listeners.set(r,a)),this._nativeEventTarget.addEventListener(i,a,s)}}dispatchEvent(i){return this._nativeEventTarget.dispatchEvent(i)}removeEventListener(i,r,s){const a=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(i,a===void 0?null:a,s)}},pv=e=>()=>{if(e===null)throw new Error("A native EventTarget could not be created.");return e.document.createElement("p")},vv=()=>{try{return new DOMException("","IllegalValueError")}catch(e){return e.name="IllegalValueError",e}},mv=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}},_v=(e,t,n,i,r,s,a,o)=>class extends i{constructor(l={},h=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY){super();const{timingProviderSource:u,vector:f}=l.update===void 0?{timingProviderSource:null,vector:l}:{timingProviderSource:l,vector:{}};if(this._endPosition=u===null?c:u.endPosition,this._onchange=null,this._onerror=null,this._onreadystatechange=null,this._readyState=u===null?"open":u.readyState,this._skew=u===null?0:u.skew,this._startPosition=u===null?h:u.startPosition,this._timingProviderSource=u,this._timeoutId=null,this._vector=u===null?{acceleration:0,position:0,velocity:0,...r(f),timestamp:s.now()/1e3}:u.vector,c<this._vector.position&&(this._vector={...this._vector,acceleration:0,position:c,velocity:0}),h>this._vector.position&&(this._vector={...this._vector,acceleration:0,position:h,velocity:0}),this._setInternalTimeout(),u===null)a(()=>this.dispatchEvent(new Event("readystatechange")));else{const g=()=>{this._skew=u.skew},d=()=>this._setInternalVector(u.vector),m=()=>{this._isAllowedTransition(u.readyState)?this._readyState=u.readyState:(this._readyState="closed",u.removeEventListener("adjust",g),u.removeEventListener("change",d),u.removeEventListener("readystatechange",m)),u.error!==null&&a(()=>this.dispatchEvent(new ErrorEvent("error",{error:u.error}))),a(()=>this.dispatchEvent(new Event("readystatechange")))};u.addEventListener("adjust",g),u.addEventListener("change",d),u.addEventListener("readystatechange",m)}}get endPosition(){return this._endPosition}get onchange(){return this._onchange===null?this._onchange:this._onchange[0]}set onchange(l){if(this._onchange!==null&&this.removeEventListener("change",this._onchange[1]),typeof l=="function"){const h=l.bind(this);this.addEventListener("change",h),this._onchange=[l,h]}else this._onchange=null}get onerror(){return this._onerror===null?this._onerror:this._onerror[0]}set onerror(l){if(this._onerror!==null&&this.removeEventListener("error",this._onerror[1]),typeof l=="function"){const h=l.bind(this);this.addEventListener("error",h),this._onerror=[l,h]}else this._onerror=null}get onreadystatechange(){return this._onreadystatechange===null?this._onreadystatechange:this._onreadystatechange[0]}set onreadystatechange(l){if(this._onreadystatechange!==null&&this.removeEventListener("readystatechange",this._onreadystatechange[1]),typeof l=="function"){const h=l.bind(this);this.addEventListener("readystatechange",h),this._onreadystatechange=[l,h]}else this._onreadystatechange=null}get readyState(){return this._readyState}get startPosition(){return this._startPosition}get timingProviderSource(){return this._timingProviderSource}query(){if(this._readyState!=="open")throw n();const l=s.now()/1e3,h=this._timingProviderSource===null?l-this._vector.timestamp:l+this._skew-this._vector.timestamp,c=o(this._vector,h);return this._endPosition<c.position||this._startPosition>c.position?(this._setInternalVector({...c,acceleration:0,position:this._endPosition<c.position?this._endPosition:this._startPosition,velocity:0}),this.query()):c}update(l){if(this._readyState!=="open")return Promise.reject(n());if(this._timingProviderSource!==null){const d=this._timingProviderSource.update(l);return d instanceof Promise?d:Promise.reject(new TypeError("The timingProviderSource failed to return a promise."))}const h=r(l);if(Object.keys(h).length===0)return Promise.resolve();const c={...this.query(),...h},{position:u,velocity:f,acceleration:g}=c;return u<this._startPosition||u>this._endPosition||u===this._startPosition&&(f<0||f===0&&g<0)||u===this._endPosition&&(f>0||f===0&&g>0)?Promise.reject(t()):(this._setInternalVector(c),Promise.resolve())}_isAllowedTransition(l){return this._readyState==="closing"&&l==="closed"||this._readyState==="connecting"||this._readyState==="open"&&(l==="closed"||l==="closing")}_setInternalTimeout(){if(this._timeoutId!==null&&(clearTimeout(this._timeoutId),this._timeoutId=null),this._endPosition===Number.POSITIVE_INFINITY&&this._startPosition===Number.NEGATIVE_INFINITY||this._vector.acceleration===0&&this._vector.velocity===0)return;const l=e(this._vector,this._startPosition,this._endPosition);l!==null&&(this._timeoutId=a(()=>this.query(),l))}_setInternalVector(l){this._vector=l,this._setInternalTimeout(),a(()=>this.dispatchEvent(new Event("change")))}},bv=(e,t,n,i)=>{if(n===0&&t===0)return e!==i?[]:[0];if(n===0)return[(i-e)/t];const r=t/n,s=Math.sqrt(r**2-2/n*(e-i));return[s-r,-(s+r)].filter(a=>!isNaN(a)).sort()},yv=e=>{if(e===void 0)return{};let t=e.acceleration!==null&&e.acceleration!==void 0?{acceleration:e.acceleration}:{};return e.position!==null&&e.position!==void 0&&(t={...t,position:e.position}),e.velocity!==null&&e.velocity!==void 0?{...t,velocity:e.velocity}:t},sc=(e,t)=>{const{acceleration:n,position:i,timestamp:r,velocity:s}=e;return{acceleration:n,position:i+s*t+.5*n*t**2,timestamp:r+t,velocity:s+n*t}},Cv=(e,t)=>n=>{const i={value:e};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},Sv=_v(dv(uv(fv(bv))),vv,mv,gv(pv(window),Cv),yv,performance,setTimeout,sc),Lo=Symbol.observable||"@@observable";function wv(e){return Symbol.observable||(typeof e=="function"&&e.prototype&&e.prototype[Symbol.observable]?(e.prototype[Lo]=e.prototype[Symbol.observable],delete e.prototype[Symbol.observable]):(e[Lo]=e[Symbol.observable],delete e[Symbol.observable])),e}const ir=()=>{},Io=e=>{throw e};function xv(e){var t,n,i;return e?e.next&&e.error&&e.complete?e:{complete:((t=e.complete)!=null?t:ir).bind(e),error:((n=e.error)!=null?n:Io).bind(e),next:((i=e.next)!=null?i:ir).bind(e)}:{complete:ir,error:Io,next:ir}}const Pv=(e,t,n)=>()=>n(i=>{if(t===null||t.cancelAnimationFrame===void 0||t.requestAnimationFrame===void 0)return e(i);let r=t.requestAnimationFrame(function s(a){r=t.requestAnimationFrame(s),i.next(a)});return()=>t.cancelAnimationFrame(r)}),Ev=e=>(t,n,i)=>e(r=>{const s=a=>r.next(a);return t.addEventListener(n,s,i),()=>t.removeEventListener(n,s,i)}),Tv=()=>typeof window>"u"?null:window,Av=(e,t)=>{const n=()=>{},i=r=>typeof r[0]=="function";return r=>{const s=(...a)=>{const o=r(i(a)?t({next:a[0]}):t(...a));return o!==void 0?o:n};return s[Symbol.observable]=()=>({subscribe:(...a)=>({unsubscribe:s(...a)})}),e(s)}},kv=e=>(e.error(new Error("The required browser API seems to be not supported.")),()=>{}),Mv=Tv(),ac=Av(wv,xv),Ov=Pv(kv,Mv,ac),Rv=Ev(ac),Lv=e=>(t,n,i,r)=>Math.max(n,Math.min(i,(e-t)/e*r)),Iv=1,Dv=.5,Do=.025,Nv=(e,t,n,i,r,s,a,o)=>{const l=o!==null&&o.navigator.userAgent.includes("Safari")&&!o.navigator.userAgent.includes("Chrome")?i(Do):n(e(Dv),r(o),Iv,Do,a);return t(s,l)},Fv=e=>(t,n,i)=>{const r=e.get(t);(r===void 0||Math.abs(r[0]-n)>1e-4||r[1]!==i)&&(t.currentTime=i,e.set(t,[t.currentTime,i]))},Gv=e=>(t,n,i)=>{const r=e.get(t);(r===void 0||r[0]!==n||r[1]!==i)&&(t.playbackRate=i===1?n>1?1.00001:.99999:i,e.set(t,[t.playbackRate,i]))},Hv=(e,t)=>(n,i,r=null)=>e(n,i,t,r),Bv=(e,t,n,i)=>(r,s,a,o=null)=>{let l=null;const h=()=>{const{currentTime:d,duration:m,playbackRate:y}=r,b=s.query();l=a(o===null?b:o(b),d,l);const p=typeof m=="number"&&!isNaN(m)?m:0,{position:C,velocity:S}=l;return i(d,p,r,y,C,S),S!==0};let c;const u=()=>{h()||(c(),c=g())},f=()=>{const d=[e()(()=>u()),n(s,"change")(()=>{t.visibilityState==="hidden"&&u()})];return()=>d.forEach(m=>m())},g=()=>n(s,"change")(()=>{h()&&(c(),c=f())});return c=h()?f():g(),()=>c()},jv=(e,[t,n],i,r,s)=>({position:a,velocity:o},l,h)=>{let{mediaElementDelay:c}=h!=null?h:{mediaElementDelay:0};if(o<t||o>n)return{mediaElementDelay:c,position:a,velocity:0};if(a<0||o===0)return{mediaElementDelay:c,position:a,velocity:o};const u=l-a,f=Math.abs(u);if(f>i){const{position:g}=h!=null?h:{position:null};if(u<0||u>c)return g===l&&(c+=f),s(c,a,d=>e(d-a,t,n,o));if(g!==l)return s(c-f,a,d=>e(d-a,t,n,o))}return f>r?{mediaElementDelay:c,position:l,velocity:e(u,t,n,o)}:{mediaElementDelay:c,position:l,velocity:o}},Uv=(e,t,n,i)=>(r,s,a,o,l,h)=>{l<0?(r>0&&n(a,r,0),e(a)):l>=s?(r!==s&&n(a,r,s),e(a)):r!==l?(n(a,r,l),h!==0?(o!==h&&i(a,o,h),t(a)):e(a)):o!==h&&(h!==0?(i(a,o,h),t(a)):e(a))},No=.5,Vv=e=>t=>(n,i,r)=>{let{lastAppliedPostion:s,lastAppliedTimestamp:a,lastAppliedVelocity:o,lastPlayheadDifference:l,mediaElementDelay:h,numberOfDetectedResets:c,numberOfExpectedResets:u}=r!=null?r:{lastAppliedPostion:0,lastAppliedTimestamp:0,lastAppliedVelocity:0,lastPlayheadDifference:0,mediaElementDelay:0,numberOfDetectedResets:0,numberOfExpectedResets:1};if(n.position<0||n.velocity===0)return s=n.position,o=n.velocity,{lastAppliedPostion:s,lastAppliedTimestamp:0,lastAppliedVelocity:o,lastPlayheadDifference:l,mediaElementDelay:h,numberOfDetectedResets:c,numberOfExpectedResets:u,position:s,velocity:o};if(o===n.velocity&&l<No){const d=Math.abs(i-s)*o;if(d<No)if(d+.001>l){if(l=d,c<u)return{lastAppliedPostion:s,lastAppliedTimestamp:a,lastAppliedVelocity:o,lastPlayheadDifference:l,mediaElementDelay:h,numberOfDetectedResets:c,numberOfExpectedResets:u,position:i,velocity:o}}else{if(l=d,c+=1,c<=u)return{lastAppliedPostion:s,lastAppliedTimestamp:a,lastAppliedVelocity:o,lastPlayheadDifference:l,mediaElementDelay:h,numberOfDetectedResets:c,numberOfExpectedResets:u,position:i,velocity:o};u+=1}else l=d,u=Math.max(c,1)}else a=0;const f=Math.abs(i-n.position),g=o===0||o<0&&n.velocity>0||o>0&&n.velocity<0;if(f>t||g){if(a>0){const d=n.timestamp-a,{position:m}=e({acceleration:0,position:s,timestamp:a,velocity:o},d);h=m-i}return s=n.position+h,o=n.velocity,{lastAppliedPostion:s,lastAppliedTimestamp:n.timestamp,lastAppliedVelocity:o,lastPlayheadDifference:0,mediaElementDelay:h,numberOfDetectedResets:0,numberOfExpectedResets:u,position:s,velocity:o}}return{lastAppliedPostion:s,lastAppliedTimestamp:a,lastAppliedVelocity:o,lastPlayheadDifference:l,mediaElementDelay:h,numberOfDetectedResets:c,numberOfExpectedResets:u,position:i,velocity:n.velocity}},Wv=()=>typeof window>"u"?null:window,ss=[Number.MIN_VALUE,Number.MAX_VALUE],Kv=e=>{if(e===null)return ss;const t=new e.Audio;try{t.playbackRate=17}catch{return[.625,16]}try{t.playbackRate=-1}catch{return[0,ss[1]]}return ss},zv=e=>{e.paused||e.pause()},$v=e=>{e.paused&&e.play().catch(t=>console.error(t))},Yv=(e,t,n)=>{const i=t+e;return{mediaElementDelay:e,position:i,velocity:n(i)}},Xv=Vv(sc),qv=Uv(zv,$v,Fv(new WeakMap),Gv(new WeakMap)),Qv=Bv(Ov,document,Rv,qv),oc=Nv(Lv,Hv,jv,Xv,Kv,Qv,Yv,Wv()),Wt=new Sv,re=Mt(!1),Is=Mt(0);Wt.addEventListener("readystatechange",()=>{Wt.readyState==="open"&&hc()});const lc=new Map;function hc(){re.value=Wt.readyState==="open"&&Array.from(lc.values()).every(e=>e.readyState>=2)}function Jv({id:e,path:t,callback:n}){re.value=!1;const i=document.createElement("video"),r=oc(i,Wt);return i.id=e+"?timestamp="+new Date().getTime(),lc.set(i.id,i),i.crossOrigin="anonymous",i.muted=!0,i.addEventListener("loadstart",()=>{re.value=!1}),i.addEventListener("loadedmetadata",()=>{Is.value=Math.max(Is.value,i.duration),n("loadedmetadata",i)}),i.addEventListener("loadeddata",()=>{hc(),n("loadeddata",i)}),i.src=t,{video:i,removeTimingsrc:r}}function Zv(e,t){oc(e,Wt,t)}function tm(){Wt.update({velocity:0})}function Fo(){const{position:e,velocity:t}=Wt.query();e>=Is.value&&t===0?Wt.update({position:0,velocity:1}):Wt.update({velocity:1})}function Go(){Wt.update({position:0})}function em(e=1){const{position:t}=Wt.query();Wt.update({position:t-Math.abs(e)})}function nm(e=1){const{position:t}=Wt.query();Wt.update({position:t+Math.abs(e)})}const pa=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),im=pa?Promise.resolve().then(function(){return om}):Promise.resolve().then(function(){return dm});async function rm(...e){return(await im).default(...e)}pa?Promise.resolve().then(function(){return hm}):Promise.resolve().then(function(){return pm});pa?Promise.resolve().then(function(){return um}):Promise.resolve().then(function(){return mm});const sm=async e=>{const t=await e.getFile();return t.handle=e,t};var am=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((r,s)=>{t[s]={description:r.description||"Files",accept:{}},r.mimeTypes?r.mimeTypes.map(a=>{t[s].accept[a]=r.extensions||[]}):t[s].accept["*/*"]=r.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),i=await Promise.all(n.map(sm));return e[0].multiple?i:i[0]},om={__proto__:null,default:am};function ur(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return ur=function(n){this.s=n,this.n=n.next},ur.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var i=this.s.return;return i===void 0?Promise.resolve({value:n,done:!0}):t(i.apply(this.s,arguments))},throw:function(n){var i=this.s.return;return i===void 0?Promise.reject(n):t(i.apply(this.s,arguments))}},new ur(e)}const cc=async(e,t,n=e.name,i)=>{const r=[],s=[];var a,o=!1,l=!1;try{for(var h,c=function(u){var f,g,d,m=2;for(typeof Symbol<"u"&&(g=Symbol.asyncIterator,d=Symbol.iterator);m--;){if(g&&(f=u[g])!=null)return f.call(u);if(d&&(f=u[d])!=null)return new ur(f.call(u));g="@@asyncIterator",d="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());o=!(h=await c.next()).done;o=!1){const u=h.value,f=`${n}/${u.name}`;u.kind==="file"?s.push(u.getFile().then(g=>(g.directoryHandle=e,g.handle=u,Object.defineProperty(g,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>f})))):u.kind!=="directory"||!t||i&&i(u)||r.push(cc(u,t,f,i))}}catch(u){l=!0,a=u}finally{try{o&&c.return!=null&&await c.return()}finally{if(l)throw a}}return[...(await Promise.all(r)).flat(),...await Promise.all(s)]};var lm=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return cc(t,e.recursive,void 0,e.skipDirectory)},hm={__proto__:null,default:lm},cm=async(e,t=[{}],n=null,i=!1,r=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const s=[];let a=null;if(e instanceof Blob&&e.type?a=e.type:e.headers&&e.headers.get("content-type")&&(a=e.headers.get("content-type")),t.forEach((h,c)=>{s[c]={description:h.description||"Files",accept:{}},h.mimeTypes?(c===0&&a&&h.mimeTypes.push(a),h.mimeTypes.map(u=>{s[c].accept[u]=h.extensions||[]})):a?s[c].accept[a]=h.extensions||[]:s[c].accept["*/*"]=h.extensions||[]}),n)try{await n.getFile()}catch(h){if(n=null,i)throw h}const o=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:s,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&r&&r(o);const l=await o.createWritable();return"stream"in e?(await e.stream().pipeTo(l),o):"body"in e?(await e.body.pipeTo(l),o):(await l.write(await e),await l.close(),o)},um={__proto__:null,default:cm},fm=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const i=document.createElement("input");i.type="file";const r=[...e.map(l=>l.mimeTypes||[]),...e.map(l=>l.extensions||[])].join();i.multiple=e[0].multiple||!1,i.accept=r||"",i.style.display="none",document.body.append(i);const s=l=>{typeof a=="function"&&a(),t(l)},a=e[0].legacySetup&&e[0].legacySetup(s,()=>a(n),i),o=()=>{window.removeEventListener("focus",o),i.remove()};i.addEventListener("click",()=>{window.addEventListener("focus",o)}),i.addEventListener("change",()=>{window.removeEventListener("focus",o),i.remove(),s(i.multiple?Array.from(i.files):i.files[0])}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),dm={__proto__:null,default:fm},gm=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const i=document.createElement("input");i.type="file",i.webkitdirectory=!0;const r=a=>{typeof s=="function"&&s(),t(a)},s=e[0].legacySetup&&e[0].legacySetup(r,()=>s(n),i);i.addEventListener("change",()=>{let a=Array.from(i.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(a=a.filter(o=>o.webkitRelativePath.split("/").every(l=>!e[0].skipDirectory({name:l,kind:"directory"})))):a=a.filter(o=>o.webkitRelativePath.split("/").length===2),r(a)}),"showPicker"in HTMLInputElement.prototype?i.showPicker():i.click()})),pm={__proto__:null,default:gm},vm=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let i=e;"body"in e&&(i=await async function(a,o){const l=a.getReader(),h=new ReadableStream({start:f=>async function g(){return l.read().then(({done:d,value:m})=>{if(!d)return f.enqueue(m),g();f.close()})}()}),c=new Response(h),u=await c.blob();return l.releaseLock(),new Blob([u],{type:o})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await i);const r=()=>{typeof s=="function"&&s()},s=t.legacySetup&&t.legacySetup(r,()=>s(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null},mm={__proto__:null,default:vm};const _m={class:"source-url"},bm=["for"],ym=["value"],Cm=["id"],Sm={key:0,class:"absolute"},wm={class:"bottom-toolbar"},xm=ze({__name:"Canvas",props:{index:null},setup(e,{expose:t}){const n=e,i=1.1,r=Mt("https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c4/Physicsworks.ogv/Physicsworks.ogv.240p.vp9.webm"),s=hv(),a=Mt(),o=Mt(),l=Mt(),h=Mt(),c=Mt(),u=Ie({img:null,imageNode:null,stage:null,currentTime:0,duration:0,offset:0,removeTimingsrc:null}),f=Ie({width:600,height:400}),g=Mt(!1),d=Ie({fill:"#242424",draggable:!0}),m=Ie({fill:"#242424",visible:!1}),y=()=>{g.value=!0},b=()=>{g.value=!1},p=F=>{F.evt.preventDefault();const I=u.stage,Y=I.scaleX(),st=(F.evt.deltaY>0?-1:1)>0?Y*i:Y/i;I.scale({x:st,y:st});const z=I.getPointerPosition(),it={x:(z.x-I.x())/Y,y:(z.y-I.y())/Y},at={x:z.x-it.x*st,y:z.y-it.y*st};I.position(at)};function C(F){const{video:I,removeTimingsrc:Y}=Jv({id:n.index+"",path:F!=null?F:r.value,callback:A});return u.removeTimingsrc=Y,I}function S(){u.currentTime=c.value.currentTime}function A(F,I){switch(F){case"loadedmetadata":Object.assign(d,{width:I.videoWidth,height:I.videoHeight}),u.duration=I.duration,u.stage;break;case"loadeddata":Object.assign(d,{image:I,width:400,height:300});break}}function E(F="default"){u.stage.container().style.cursor=F}function O(){const F=u.imageNode;F.on("mouseenter",function(){E("pointer")}),F.on("mouseleave",function(){E("default")}),F.on("mouseup",function(){E("default")}),F.on("mouseup",function(){E("default")}),F.on("dragstart",function(){E("move")}),F.on("dragmove",function(){E("move")}),F.on("dragend",function(){E("pointer")})}function x(F){u.offset+=F,L()}async function L(){u.removeTimingsrc&&u.removeTimingsrc(),u.removeTimingsrc=Zv(c.value,({position:F,...I})=>({position:F+u.offset,...I}))}function R(F){URL.revokeObjectURL(c.value.src),c.value.src="",c.value.src=F}async function D(){const F=await rm({mimeTypes:["video/*"]}),I=await cv(F);R(I)}function N(){return l.value.getNode().image()}function k(F){Object.assign(d,{visible:!1}),Object.assign(m,u.imageNode.getAttrs(),{image:F,visible:!0})}function T(){Object.assign(d,{visible:!0}),Object.assign(m,{visible:!1})}return Ge(()=>r.value,(F,I)=>{F!==I&&R(F)}),Ln.on("paused",()=>{console.log("paused")}),gn(()=>{u.imageNode=l.value.getNode(),u.stage=a.value.getStage(),O(),h.value=new rc.Animation(S,u.stage),h.value.start(),c.value=C(r.value)}),Ri(()=>{h.value.stop()}),t({getImage:N,setMask:k,cancelMask:T}),(F,I)=>{const Y=ar("v-image"),Z=ar("v-layer"),st=ar("v-stage");return ee(),De("div",null,[At("div",{class:"canvas-toolbar",style:Ne(`justify-content: flex-${e.index===0?"start":"end"};`)},[At("div",_m,[At("label",{for:`${Pt(s)}-url`},"video url:",8,bm),Rn("\xA0 "),sr(At("select",{"onUpdate:modelValue":I[0]||(I[0]=z=>r.value=z)},[(ee(!0),De(Dt,null,Rl(Pt(ov),(z,it)=>(ee(),De("option",{key:it,value:z.url},En(z.label),9,ym))),128))],512),[[ha,r.value]]),sr(At("input",{"onUpdate:modelValue":I[1]||(I[1]=z=>r.value=z),id:`${Pt(s)}-url`,type:"text"},null,8,Cm),[[Bn,r.value]]),Rn(" \xA0\xA0or\xA0\xA0 "),At("button",{onClick:D},"local file")])],4),At("div",{class:"canvas-container",style:Ne(`${e.index===0?"border-right: 1px solid #242424;":""}`)},[u.duration?(ee(),De("div",Sm,En(u.currentTime)+"\xA0/\xA0"+En(u.duration),1)):Yl("",!0),At("div",{style:Ne(`width: ${f.width}px; height: ${f.height}px;background: #e3e7e9; background-image: linear-gradient(45deg, #f6fafc 25%, transparent 0), linear-gradient(45deg, transparent 75%, #f6fafc 0), linear-gradient(45deg, #f6fafc 25%, transparent 0), linear-gradient(45deg, transparent 75%, #f6fafc 0); background-position: 0 0, 10px 10px, 10px 10px, 20px 20px; background-size: 20px 20px;`)},[ct(st,{ref_key:"stageRef",ref:a,config:f,onWheel:p},{default:Si(()=>[ct(Z,{ref_key:"layerRef",ref:o},{default:Si(()=>[ct(Y,{ref_key:"imageRef",ref:l,onDragstart:y,onDragend:b,config:d},null,8,["config"]),ct(Y,{config:m},null,8,["config"])]),_:1},512)]),_:1},8,["config"])],4)],4),At("div",wm,[Rn(" offset: "),At("button",{onClick:I[2]||(I[2]=z=>x(-1))},"-1"),sr(At("input",{"onUpdate:modelValue":I[3]||(I[3]=z=>u.offset=z),style:{width:"30px"},onChange:L},null,544),[[Bn,u.offset,void 0,{number:!0}]]),At("button",{onClick:I[4]||(I[4]=z=>x(1))},"+1")])])}}});const Di=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Ho=Di(xm,[["__scopeId","data-v-8379fab6"]]),Pm={class:"content-layout"},Em=ze({__name:"Content",props:{width:null,height:null},setup(e){const t=Mt(),n=Mt();return Ln.on("compare",async()=>{const i=t.value.getImage();n.value.setMask(i)}),Ln.on("cancel-compare",()=>{n.value.cancelMask()}),(i,r)=>(ee(),De("div",Pm,[ct(Ho,{index:0,ref_key:"left",ref:t},null,512),ct(Ho,{index:1,ref_key:"right",ref:n},null,512)]))}});const Tm=Di(Em,[["__scopeId","data-v-c8086ed4"]]),Am={class:"toolbar-container"},km=["disabled"],Mm=["disabled"],Om=["disabled"],Rm=["disabled"],Lm=["disabled"],Im=["disabled"],Dm=ze({__name:"Toolbar",setup(e){const t=()=>{tm(),Ln.emit("paused")},n=()=>{Ln.emit("compare")},i=()=>{Ln.emit("cancel-compare")};return(r,s)=>(ee(),De("div",Am,[At("button",{onClick:s[0]||(s[0]=(...a)=>Pt(Fo)&&Pt(Fo)(...a)),disabled:!Pt(re)},En(Pt(re)?"play":"loading"),9,km),At("button",{onClick:t,disabled:!Pt(re)},En(Pt(re)?"pause":"loading"),9,Mm),At("button",{onClick:s[1]||(s[1]=(...a)=>Pt(Go)&&Pt(Go)(...a)),disabled:!Pt(re)},"reset",8,Om),At("button",{onClick:s[2]||(s[2]=a=>Pt(em)(5)),disabled:!Pt(re)},"-5s",8,Rm),At("button",{onClick:s[3]||(s[3]=a=>Pt(nm)(5)),disabled:!Pt(re)},"+5s",8,Lm),At("button",{onMousedown:n,onMouseup:i,disabled:!Pt(re),title:"overlay to right",class:"overlay"}," \u300B ",40,Im)]))}});const Nm=Di(Dm,[["__scopeId","data-v-91bd6ec5"]]),Fm={class:"container"},Gm=ze({__name:"index",setup(e){const t=Mt(null),{width:n,height:i}=Vd(t);return(r,s)=>(ee(),De("div",Fm,[ct(Nm,{class:"toolbar"}),ct(Tm,{ref_key:"contentRef",ref:t,width:Pt(n),height:Pt(i),class:"content"},null,8,["width","height"])]))}});const Hm=Di(Gm,[["__scopeId","data-v-8d819f25"]]),Bm=ze({__name:"App",setup(e){return(t,n)=>(ee(),Nr(Hm,{msg:"Vite + Vue"}))}});const jm=Di(Bm,[["__scopeId","data-v-7762b92c"]]);var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uc(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var fc={exports:{}};const Wm=uc(Rd),Km=uc(av);/*!
 * vue-konva v3.0.0 - https://github.com/konvajs/vue-konva#readme
 * MIT Licensed
 */(function(e,t){(function(i,r){e.exports=r(Wm,Km)})(Um,function(n,i){return function(r){var s={};function a(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return r[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=r,a.c=s,a.d=function(o,l,h){a.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:h})},a.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},a.t=function(o,l){if(l&1&&(o=a(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var c in o)a.d(h,c,function(u){return o[u]}.bind(null,c));return h},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s=2)}([function(r,s){r.exports=n},function(r,s){r.exports=i},function(r,s,a){r.exports=a(3)},function(r,s,a){a.r(s);var o=a(0),l=a(1),h=a.n(l);function c(k){if(!h.a.autoDrawEnabled){var T=k.getLayer()||k.getStage();T&&T.batchDraw()}}var u={key:!0,style:!0,elm:!0,isRootInsert:!0},f=".vue-konva-event";function g(k,T,F,I){T===void 0&&(T={}),F===void 0&&(F={});var Y=k.__konvaNode,Z={},st=!1;for(var z in F)if(!u[z]){var it=z.slice(0,2)==="on",at=F[z]!==T[z];if(it&&at){var gt=z.substr(2).toLowerCase();gt.substr(0,7)==="content"&&(gt="content"+gt.substr(7,1).toUpperCase()+gt.substr(8)),Y.off(gt+f,F[z])}var Ft=!T.hasOwnProperty(z);Ft&&Y.setAttr(z,void 0)}for(var wt in T)if(!u[wt]){var xt=wt.slice(0,2)==="on",ne=F[wt]!==T[wt];if(xt&&ne){var It=wt.substr(2).toLowerCase();It.substr(0,7)==="content"&&(It="content"+It.substr(7,1).toUpperCase()+It.substr(8)),T[wt]&&(Y.off(It+f),Y.on(It+f,T[wt]))}!xt&&(T[wt]!==F[wt]||I&&T[wt]!==Y.getAttr(wt))&&(st=!0,Z[wt]=T[wt])}st&&(Y.setAttrs(Z),c(Y))}var d="v";function m(k){function T(F){return F.__konvaNode?F:F.parent?T(F.parent):(console.error("vue-konva error: Can not find parent node"),{})}return T(k.parent)}function y(k){var T;return k!=null&&k.component?(k==null||(T=k.component)===null||T===void 0?void 0:T.__konvaNode)||y(k.component.subTree):null}function b(k){var T=k.el,F=k.component,I=y(k);if((T==null?void 0:T.tagName)&&F&&!I){var Y=T&&T.tagName.toLowerCase();return console.error('vue-konva error: You are trying to render "'+Y+'" inside your component tree. Looks like it is not a Konva node. You can render only Konva components inside the Stage.'),null}return I}function p(k){var T=[];return k.children&&k.children.forEach(function(F){!F.component&&Array.isArray(F.children)&&T.push.apply(T,F.children),F.component&&T.push(F)}),T}function C(k,T){var F=p(k),I=[];F.forEach(function(Z){var st=b(Z);st&&I.push(st)});var Y=!1;I.forEach(function(Z,st){Z.getZIndex()!==st&&(Z.setZIndex(st),Y=!0)}),Y&&c(T)}function S(){return S=Object.assign||function(k){for(var T=1;T<arguments.length;T++){var F=arguments[T];for(var I in F)Object.prototype.hasOwnProperty.call(F,I)&&(k[I]=F[I])}return k},S.apply(this,arguments)}var A={props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},inheritAttrs:!1,setup:function(T,F){var I=F.attrs,Y=F.slots,Z=F.expose;F.emits;var st=Object(o.getCurrentInstance)(),z=Object(o.reactive)({}),it=Object(o.ref)(null),at=new window.Konva.Stage({width:T.config.width,height:T.config.height,container:document.createElement("div")});st.__konvaNode=at,wt();function gt(){return st.__konvaNode}function Ft(){return st.__konvaNode}function wt(){var xt=z||{},ne=S({},I,T.config);g(st,ne,xt,T.__useStrictMode),Object.assign(z,ne)}return Object(o.onMounted)(function(){it.value.innerHTML="",at.container(it.value),wt()}),Object(o.onUpdated)(function(){wt(),C(st.subTree,at)}),Object(o.onBeforeUnmount)(function(){at.destroy()}),Object(o.watch)(function(){return T.config},wt,{deep:!0}),Z({getStage:Ft,getNode:gt}),function(){var xt;return Object(o.h)("div",{ref:it},(xt=Y.default)===null||xt===void 0?void 0:xt.call(Y))}}};function E(){return E=Object.assign||function(k){for(var T=1;T<arguments.length;T++){var F=arguments[T];for(var I in F)Object.prototype.hasOwnProperty.call(F,I)&&(k[I]=F[I])}return k},E.apply(this,arguments)}var O=".vue-konva-event",x={Group:!0,Layer:!0,FastLayer:!0,Label:!0},L=function(k){return{props:{config:{type:Object,default:function(){return{}}},__useStrictMode:{type:Boolean}},setup:function(F,I){var Y=I.attrs,Z=I.slots,st=I.expose,z=Object(o.getCurrentInstance)(),it=Object(o.reactive)({}),at=window.Konva[k];if(!at){console.error("vue-konva error: Can not find node "+k);return}var gt=new at;z.__konvaNode=gt,z.vnode.__konvaNode=gt,xt();function Ft(){return z.__konvaNode}function wt(){return z.__konvaNode}function xt(){var It={};for(var he in z.vnode.props)he.slice(0,2)==="on"&&(It[he]=z.vnode.props[he]);var Kn=it||{},yn=E({},Y,F.config,It);g(z,yn,Kn,F.__useStrictMode),Object.assign(it,yn)}Object(o.onMounted)(function(){var It=m(z).__konvaNode;It.add(gt),c(gt)}),Object(o.onUnmounted)(function(){c(gt),gt.destroy(),gt.off(O)}),Object(o.onUpdated)(function(){xt(),C(z.subTree,gt)}),Object(o.watch)(function(){return F.config},xt,{deep:!0}),st({getStage:wt,getNode:Ft});var ne=x[k];return ne?function(){var It;return Object(o.h)("template",{},(It=Z.default)===null||It===void 0?void 0:It.call(Z))}:function(){return null}}}};typeof window<"u"&&!window.Konva&&a(1);var R=["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"],D=[{name:"Stage",component:A}].concat(R.map(function(k){return{name:k,component:L(k)}})),N={install:function(T,F){var I=d;F&&F.prefix&&(I=F.prefix),D.forEach(function(Y){T.component(""+I+Y.name,Y.component)})}};s.default=N}]).default})})(fc);const zm=Vm(fc.exports),dc=wh(jm);dc.use(zm);dc.mount("#app");
